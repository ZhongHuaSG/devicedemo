<!DOCTYPE html>
<html lang="zh-CN" id="webjk">
<head>
    <meta charset="UTF-8">
    <!--<meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv="Pragma" content="no-store" />
    <meta http-equiv="Expires" content="0" />-->
    <title>洲明本地监控系统</title>
    <style type="text/css">

        /*适应pad端 宽度在640-1000之间*/
        @media screen and (min-width: 640px) and (max-width: 1000px) {
            body {
                zoom: 80%;
            }
        }

        * {
            margin: 0;
            padding: 0;
            font-size: 100%;
        }

        html {
            overflow-y: auto;
            overflow-x: hidden;
            background-image: url(img/bg.jpg);
            background-repeat: no-repeat;
            background-size: 100% 100%;
            background-attachment: fixed;
        }

        html, body {
            width: 100%;
            height: 100%;
            -webkit-font-smoothing: antialiased;
            /*font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;*/
            font: 16px/1.5 tahoma, arial, 'Hiragino Sans GB', '\5b8b\4f53', sans-serif;
        }

        .index_content {
            width: 100%;
            height: 100%;
        }

        .index_nav {
            height: 11.3%;
            background-color: #1D8CE0;
            color: #ffffff;
            top: 0;
            left: 0;
            width: 100%;
            position: fixed;
            z-index: 9999;
        }

        .index_nav ul li {
            font-size: 1em;
            font-weight: 500;
            opacity: 0.8;
            cursor: pointer;
            display: list-item;
            z-index: 9999;
            text-align: -webkit-match-parent;
            list-style: none;
            padding-left: 2.8%;
        }

        .index_nav ul .l_left {
            float: left;
            margin-top: -0.2%;
            margin-left: 16%;
        }

        .index_nav ul .r_right {
            float: right;
            margin-top: 0.8%;
        }

        .index_nav ul li:hover {
            opacity: 1;
        }

        .p1 {
            margin-right: 16%;
        }

        .p2 {
            margin-right: 6%;
        }

        .nav_active {
            opacity: 1 !important;
            color: #04449c;
        }

        .sz {
            background-image: url(img/sz.svg);
            width: 1em;
            height: 2em;
            background-repeat: no-repeat;
        }

        .kz {
            background-image: url(img/kz.svg);
            width: 1em;
            height: 2em;
            background-repeat: no-repeat;
        }

        .zm {
            background-image: url(img/zm.svg);
            width: 11.3em;
            height: 3em;
            background-repeat: no-repeat;
        }

        .asz {
            background-image: url(img/sz1.svg);
            width: 1em;
            height: 2em;
            background-repeat: no-repeat;
        }

        .akz {
            background-image: url(img/kz1.svg);
            width: 1em;
            height: 2em;
            background-repeat: no-repeat;
        }

        .azm {
            background-image: url(img/zm1.svg);
            width: 11.3em;
            height: 3em;
            background-repeat: no-repeat;
        }

        .nc {
            height: 4em;
            display: block;
            margin-left: -300%;
            letter-spacing: 0.0001em;
            line-height: 5.8em;
            -webkit-touch-callout: none; /* iOS Safari */

            -webkit-user-select: none; /* Chrome/Safari/Opera */

            -khtml-user-select: none; /* Konqueror */

            -moz-user-select: none; /* Firefox */

            -ms-user-select: none; /* Internet Explorer/Edge */

            user-select: none; /* Non-prefixed version, currently not supported by any browser */
        }

        .nczm {
            display: block;
            margin-left: -18.7%;
            margin-top: 25%;
            font-size: larger;
            width: 112%;
            letter-spacing: 0.3em;
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Chrome/Safari/Opera */
            -khtml-user-select: none; /* Konqueror */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently not supported by any browser */
        }

        .yh {
            background-image: url(img/yh.svg);
            background-repeat: no-repeat;
            width: 2em;
            height: 2em;
            margin-left: 93%;
            margin-top: 1%;
            opacity: 0.8;
            z-index: 9999;
            position: relative;
        }

        .um {
            width: 4em;
            height: 5em;
            position: absolute;
            margin-left: -44%;
            margin-top: 109%;
            background-color: #ffffff;
            border-radius: 0.3em;
            border: 0.1em solid #ededed;
            display: none;

            top: 1.2em;
            left: 0;
        }

        .yh:hover .um {
            display: block;
        }

        .ncyh {
            width: 6em;
            height: 0.6em;
            display: block;
            line-height: 0.1em;
            letter-spacing: 0.07em;
            padding-top: 47%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            margin-left: -5px;
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Chrome/Safari/Opera */
            -khtml-user-select: none; /* Konqueror */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently not supported by any browser */
        }

        .yh:hover {
            opacity: 1;
            cursor: pointer;
        }

        a.bw {
            display: block;
            text-decoration: none;
            color: #999;
            margin-left: 1em;
            margin-top: 0.5em;
        }

        a.btc {
            display: block;
            text-decoration: none;
            color: #999;
            margin-left: 1em;
            margin-top: 0.6em;
        }

        a:hover {
            color: #1D8CE0;
        }

        .index_tabs {
            width: 100%;
            height: 100%;
            position: absolute;
            display: block;
            margin-top: 76px;
        }

        .tab {
            height: 100%;
            width: 100%;
            color: #20a0ff;
            position: absolute;
        }

        .left {
            width: 397px;
            height: 571px;
            float: left;
            margin-left: 3px;
            margin-top: 3px;
        }

        .left0 {
            width: 397px;
            height: 43%;
            border: 0.001em solid #129ce6;
        }

        .lt0 {
            background-color: #E5E9F2;
            line-height: 30px;
            font-weight: 500;
            font-family: serif;
        }

        .azig {
            margin-top: -176px;
            margin-left: -21px;
            position: absolute;
        }

        .kzqrun {
            margin-top: 96px;
            margin-left: 27px;
            width: 100px;
            height: 100px;
            /* background: aqua;
             animation: turn 1s linear infinite;
             background: url(img/azyx.png) no-repeat center center;*/
            position: relative;
        }

        .left1 {
            width: 397px;
            height: 55.5%;
            border: 0.001em solid #129ce6;
            position: relative;
            margin-top: 8px;
        }

        .lt1 {
            background-color: #E5E9F2;
            line-height: 30px;
            font-weight: 500;
            font-family: serif;
        }

        .fskig {
            margin-top: 133px;
            margin-left: 10px;
            position: absolute;
        }

        .center {
            width: 450px;
            height: 571px;
            border: 0.001em solid #129ce6;
            float: left;
            margin-left: 6px;
            margin-top: 3px;
        }

        .ct {
            background-color: #E5E9F2;
            line-height: 30px;
            text-align: center;
            font-weight: 500;
            font-family: serif;
        }

        .right {
            width: 397px;
            height: 571px;
            float: left;
            margin-left: 6px;
            margin-top: 3px;
        }

        .right0 {
            width: 397px;
            height: 100%;
            border: 0.001em solid #129ce6;
        }

        .rt0 {
            background-color: #E5E9F2;
            line-height: 30px;
            font-weight: 500;
            font-family: serif;
        }

        .gx0 {
            width: 397px;
            height: 540px;
            position: relative;
        }

        .right1 {
            width: 397px;
            height: 55.5%;
            border: 0.001em solid #129ce6;
            margin-top: 8px;
            position: relative;
        }

        .rt1 {
            background-color: #E5E9F2;
            line-height: 30px;
            font-weight: 500;
            font-family: serif;
        }


        .dy {
            width: 397px;
            height: 407px;
            margin-top: -254px;
            margin-left: -110px;
        }

        .dl {
            width: 397px;
            height: 407px;
            position: absolute;
            margin-top: -363px;
            margin-left: 135px;
        }

        .fs {
            position: absolute;
            margin-top: -370px;
            margin-left: 160px;
            width: 100px;
            height: 100px;
            /*animation: turn 1s linear infinite;*/
            animation-play-state: paused;
            background: url(img/fs.svg) no-repeat center center;
            z-index: 1;
        }

        /*
          turn : 定义的动画名称
          1s : 动画时间
          linear : 动画以何种运行轨迹完成一个周期
          infinite :规定动画应该无限次播放
         */
        @keyframes turn {
            0% {
                -webkit-transform: rotate(0deg);
            }
            25% {
                -webkit-transform: rotate(90deg);
            }
            50% {
                -webkit-transform: rotate(180deg);
            }
            75% {
                -webkit-transform: rotate(270deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        .hjws {
            width: 397px;
            height: 407px;
            position: relative;
            margin-top: -18px;
            margin-left: 11px;
        }

        #ledswitch {
            margin-top: 179px;
            margin-left: 821px;
            position: absolute;
        }

        #ledswitch .el-switch__core {
            width: 63px !important;
        }

        #ledswitch .el-switch__label--left {
            left: 60px !important;
        }

        #ledswitch .el-switch__label--right {
            right: 60px !important;
        }

        #brightswitch {
            margin-left: 1022px;
            margin-top: -87px;
            position: absolute;
            z-index: 11;
        }

        #brightswitch .el-switch__core {
            width: 50px !important;
        }

        #brightswitch .el-switch__label--left {
            left: 47px !important;
        }

        #brightswitch .el-switch__label--right {
            right: 47px !important;
        }

        div#ledslider {
            position: absolute;
            width: 43%;
            height: 61.78%;
            padding: 5px 30px;
            margin-top: 16px;
            margin-left: 78px;
        }

        .coloradjust {
            width: 45%;
            height: 47.78%;
            padding-left: 25px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 79px;
            margin-top: 124px;
            z-index: 10;
        }

        .brightadjust {
            width: 157%;
            height: 63.78%;
            padding-left: 30px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 449px;
            margin-top: -461px;
        }

        .hdradjustcontent {
            width: 157%;
            height: 32.78%;
            padding-left: 30px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 492px;
            margin-top: -26px;;
            z-index: 10;
        }

        .gamutadjust {
            width: 97%;
            height: 62.78%;
            padding-left: 45px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 623px;
            margin-top: -352px;
        }

        .gamutadjust1 {
            width: 10.27%;
            height: 15.5%;
            padding-left: 30px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 705px;
            margin-top: -35px;
        }

        .ctadjust {
            width: 157%;
            height: 44.78%;
            padding-left: 30px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 448px;
            margin-top: -241px;
        }

        .inputsourceadjust {
            width: 45%;
            height: 11.78%;
            padding-left: 25px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 79px;
            margin-top: -47px;
            z-index: 10;
        }

        .fbladjust {
            width: 13%;
            height: 9.78%;
            padding-left: 25px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 79px;
            margin-top: 45px;
            z-index: 10;
        }

        .senderadjust {
            width: 45%;
            height: 9.78%;
            padding-left: 25px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 79px;
            margin-top: -130px;
        }

        #ledsendercard .el-input__inner {
            width: 90% !important;
            margin-left: 7px;
        }

        #ledsendercard .el-input__suffix {
            right: -65px;
        }

        #selectsender .el-input__inner {
            width: 191% !important;
            margin-left: -53px;
            margin-top: 9px;
            height: 17px;
            padding-left: 1px;
        }

        #selectsender .el-input__suffix {
            right: -97px;
            top: -2px;
        }

        #selectsender .el-input--suffix .el-input__inner {
            padding-right: 0px;
        }

        #selectsender .el-input__inner {
            background-color: #0b2050 !important;
            border: 1px solid #468efd !important;
            color: #468efd !important;
        }

        #selectsender .el-select .el-input .el-select__caret {
            color: #468efd !important;
        }

        div#syncinput {
            position: absolute;
            margin-top: 0px;
            margin-left: 10px;
        }

        #syncinput .el-input__inner {
            width: 212% !important;
        }

        div#syncswitch {
            margin-left: 555px;
            margin-top: 75px;
            position: absolute;
        }

        .syncadjust {
            width: 26%;
            height: 9.78%;
            padding-left: 25px;
            border: #ffffff solid 1px;
            position: absolute;
            margin-left: 320px;
            margin-top: 45px;
            z-index: 10;
        }

        div#snsginput {
            position: absolute;
            margin-top: -36px;
            margin-left: 13px;
        }

        #snsginput .el-input__suffix {
            right: -179px;
        }

        .snsginputadjust {
            width: 13%;
            height: 10.78%;
            padding-left: 0px;
            border: #ffffff solid 1px;
            margin-left: 706px;
            margin-top: 77px;
            padding-top: 56px;
        }

        .wzjmadjust {
            width: 7%;
            height: 10.78%;
            padding-left: -1px;
            border: #ffffff solid 1px;
            margin-left: 885px;
            margin-top: -86px;
            padding-top: 56px;
        }

        .rgbadjust {
            width: 15%;
            height: 10.78%;
            padding-left: 57px;
            border: #ffffff solid 1px;
            margin-left: 987px;
            margin-top: -86px;
            padding-top: 56px;
        }

        .testmodeadjust {
            width: 39.6%;
            height: 9.78%;
            padding-left: 25px;
            border: #ffffff solid 1px;
            /* position: absolute; */
            margin-left: 708px;
            margin-top: 322px;
            padding-top: 87px;
        }

        legend {
            font-size: 13px;
            color: #ffffff;
            padding: 5px 10px;
            font-weight: 800;
            /*background:white;*/
        }

        .ledph1 {
            float: left;
            width: 155%;
            margin-left: 44px;
            margin-top: 116px;
            line-height: 72px;
        }

        div#input {
            margin-top: 0px;
            margin-left: 9px;
            position: absolute;
        }

        #input .el-input__suffix {
            right: -167px !important;
        }

        #input .el-input__inner {
            width: 274% !important;
        }

        div#input1 {
            margin-top: 179px;
            margin-left: 717px;
            position: absolute;
            z-index: 10;
        }

        div#input2 {
            margin-top: 179px;
            margin-left: 717px;
            position: absolute;
            display: none;
            z-index: 10;
        }

        div#ledradio {
            position: absolute;
            float: left;
            margin-left: 14px;
            margin-top: 8.3px;
        }

        .clearfix:after, .clearfix:before {
            display: table;
            content: " "
        }

        .clearfix:after {
            clear: both
        }

        .mainbox {
            margin-left: 165px;
            margin-top: -187px;
            width: 520px;
        }

        .mainbox > ul {
            margin-left: -.4rem;
            margin-right: -.4rem;
        }

        .mainbox > ul > li {
            float: left;
            padding: 0 .4rem
        }

        .mainbox > ul > li {
            width: 30%
        }

        .mainbox > ul > li:nth-child(2) {
            width: 40%
        }

        .boxall {
            height: 11.7rem;
            width: 13rem;
            border: 1px solid rgba(25, 186, 139, .17);
            padding: 0 .3rem .3rem .3rem;
            background: rgba(255, 255, 255, .04);
            background-size: 100% auto;
            position: relative;
            margin-bottom: .3rem;
            z-index: 10;
        }

        .boxall:before, .boxall:after {
            position: absolute;
            width: .1rem;
            height: .1rem;
            content: "";
            border-top: 2px solid #02a6b5;
            top: 0;
        }

        .boxall:before, .boxfoot:before {
            border-left: 2px solid #02a6b5;
            left: 0;
        }

        .boxall:after, .boxfoot:after {
            border-right: 2px solid #02a6b5;
            right: 0;
        }

        .boxfoot {
            position: absolute;
            bottom: 0;
            width: 100%;
            left: 0;
        }

        .boxfoot:before, .boxfoot:after {
            position: absolute;
            width: .1rem;
            height: .1rem;
            content: "";
            border-bottom: 2px solid #02a6b5;
            bottom: 0;
        }

        .sycm ul {
            margin-left: -.5rem;
            margin-right: -.5rem;
            padding: 0.9rem 0;
            min-height: 32px;
        }

        .sycm li {
            float: left;
            width: 47.33%;
            text-align: center;
            position: relative
        }

        .sycm li:before {
            position: absolute;
            content: "";
            height: 30%;
            width: 1px;
            background: rgba(255, 255, 255, .1);
            right: 0;
            top: 15%;
        }

        .sycm li:last-child:before {
            width: 0;
        }

        .sycm li h2 {
            font-size: 0.6rem;
            color: #ffffff;
            opacity: 0.7;
        }

        .sycm li span {
            font-size: 0.5rem;
            color: #ffffff;
            opacity: 1;
        }

        ul li {
            list-style-type: none;
        }

        .clearfix1:after, .clearfix1:before {
            display: table;
            content: " "
        }

        .clearfix1:after {
            clear: both
        }

        .mainbox1 {
            /*margin-top: 7px;*/
            padding: .4rem .4rem 0rem .4rem;
            position: absolute;
        }

        .mainbox1 > ul {
            margin-left: -.4rem;
            margin-right: -.4rem;
        }

        .mainbox1 > ul > li {
            float: left;
            padding: 0 .4rem
        }

        .mainbox1 > ul > li {
            width: 30%
        }

        .mainbox1 > ul > li:nth-child(2) {
            width: 40%
        }

        .boxall1 {
            height: 7rem;
            width: 22.8rem;
            border: 1px solid rgba(25, 186, 139, .17);
            padding: 0 .3rem .3rem .3rem;
            background: rgba(255, 255, 255, .04);
            background-size: 100% auto;
            position: absolute;
            margin-bottom: .3rem;
            z-index: 10;
            margin-top: 23px;
        }

        .boxall1:before, .boxall1:after {
            position: absolute;
            width: .1rem;
            height: .1rem;
            content: "";
            border-top: 2px solid #02a6b5;
            top: 0;
        }

        .boxall1:before, .boxfoot1:before {
            border-left: 2px solid #02a6b5;
            left: 0;
        }

        .boxall1:after, .boxfoot1:after {
            border-right: 2px solid #02a6b5;
            right: 0;
        }

        .boxfoot1 {
            position: absolute;
            bottom: 0;
            width: 100%;
            left: 0;
        }

        .boxfoot1:before, .boxfoot1:after {
            position: absolute;
            width: .1rem;
            height: .1rem;
            content: "";
            border-bottom: 2px solid #02a6b5;
            bottom: 0;
        }

        .sycm1 {
            margin-top: 9px;
        }

        .sycm1 ul {
            margin-left: -.5rem;
            margin-right: -.5rem;
            padding: .16rem 0;
            min-height: 53px;
        }


        .sycm1 li {
            float: left;
            width: 33.33%;
            text-align: center;
            position: relative
        }


        .sycm1 li:before {
            position: absolute;
            content: "";
            height: 30%;
            width: 1px;
            background: rgba(255, 255, 255, .1);
            right: 0;
            top: 15%;
        }

        .sycm1 li:last-child:before {
            width: 0;
        }

        .sycm1 li h2 {
            font-size: 0.6rem;
            color: #ffffff;
            opacity: 0.7;
        }

        .sycm1 li span {
            font-size: 0.5rem;
            color: #ffffff;
            opacity: 1;
        }

        .fskimp ul li {
            margin-left: -.5rem;
            margin-right: -.5rem;
            padding: .16rem 0;
            min-height: 45px;
        }

        .clearfix2:after, .clearfix2:before {
            display: table;
            content: " "
        }

        .clearfix2:after {
            clear: both
        }

        .mainbox2 {
            margin-top: 221px;
            padding: .4rem .4rem 0rem .4rem;
            margin-left: 2px;
        }

        .mainbox2 > ul {
            margin-left: -.4rem;
            margin-right: -.4rem;
        }

        .mainbox2 > ul > li {
            float: left;
            padding: 0 .4rem
        }

        .mainbox2 > ul > li {
            width: 30%
        }

        .mainbox2 > ul > li:nth-child(2) {
            width: 40%
        }

        .boxall2 {
            height: 17rem;
            width: 26.3rem;
            border: 1px solid rgba(25, 186, 139, .17);
            padding: 0 .3rem .3rem .3rem;
            background-size: 100% auto;
            position: relative;
            margin-bottom: .3rem;
            z-index: 10;
        }

        .boxall2:before, .boxall2:after {
            position: absolute;
            width: .1rem;
            height: .1rem;
            content: "";
            border-top: 2px solid #02a6b5;
            top: 0;
        }

        .boxall2:before, .boxfoot2:before {
            border-left: 2px solid #02a6b5;
            left: 0;
        }

        .boxall2:after, .boxfoot2:after {
            border-right: 2px solid #02a6b5;
            right: 0;
        }

        .boxfoot2 {
            position: absolute;
            bottom: 0;
            width: 100%;
            left: 0;
        }

        .boxfoot2:before, .boxfoot2:after {
            position: absolute;
            width: .1rem;
            height: .1rem;
            content: "";
            border-bottom: 2px solid #02a6b5;
            bottom: 0;
        }

        .sycm2 {
            margin-top: 35px;
        }

        .sycm2 ul {
            margin-left: -.5rem;
            margin-right: -.5rem;
            padding: .16rem 0;
            min-height: 71px;
        }

        .sycm2 li {
            float: left;
            width: 33.33%;
            text-align: center;
            position: relative;
            margin-top: 10px;
        }

        .sycm2 li:before {
            position: absolute;
            content: "";
            height: 30%;
            width: 1px;
            background: rgba(255, 255, 255, .1);
            right: 0;
            top: 15%;
        }

        .sycm2 li:last-child:before {
            width: 0;
        }

        .sycm2 li h2 {
            font-size: 0.6rem;
            color: #ffffff;
            opacity: 0.7;
            padding-bottom: 10px;
        }

        .sycm2 li span {
            font-size: 0.5rem;
            color: #ffffff;
            opacity: 1;
        }

        @font-face {
            font-family: 'UnidreamLED';
            src: url('fonts/LED Dot-Matrix.ttf');
        }

        .fskimp {
            margin-left: 265px;
            margin-top: 167px;
            position: absolute;
        }

        .fskimp h3 {
            font-size: 0.6rem;
            color: #ffffff;
            opacity: 0.7;
        }

        .fskimp p {
            font-size: 0.5rem;
            color: #ffffff;
            opacity: 1;
            line-height: 31px;
            text-decoration: underline;
        }

        .cssrun {
            position: absolute;
        }

        .ledrun2 {
            letter-spacing: 0.1em;
            font-size: 1em;
            font-family: 'UnidreamLED', serif;
            color: #00ff00;
            margin-top: 18px;
            font-style: normal;
            margin-left: 15px;

        }

        .ledsceen .cssrun {
            margin-top: -478px;
            margin-left: 90px;
            width: 253px;
            height: 133px;
            line-height: 100px;
            font-size: 2em;
            font-family: sans-serif;
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
        }

        .ledsceen .cssrun {
            background: url(img/led.svg) no-repeat center center;
            color: #FBF2D5;
            transform-origin: left;
            transform: perspective(300px) rotateX(0deg);
        }

        .ledsceen .cssrun span {
            position: absolute;
            animation: marquee 10s linear infinite;

        }

        @keyframes marquee {
            from {
                left: 100%;
            }
            to {
                left: -130%;
            }
        }

        .checkspan {
            color: #409EFF;
        }

        #wzjm {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 68px;
            padding: 1px;
            position: absolute;
            margin-left: 9px;
            margin-top: -53px;
        }

        #wzjm_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #rgbshow {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 131px;
            margin-top: -53px;
        }

        #rgbshow_content {
            height: 100%;
            background-color: #06B9D1;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        .nocopy {
            -webkit-user-select: none;
            -moz-user-select: none;
            -o-user-select: none;
            user-select: none;
        }

        #wzjmred {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: -52px;
            margin-top: -53px;
        }

        #wzjmred_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #wzjmgreen {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 3px;
            margin-top: -53px;
        }

        #wzjmgreen_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #wzjmblue {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 58px;
            margin-top: -53px;
        }

        #wzjmblue_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        div#testmode {
            position: absolute;
            float: left;
            margin-left: 730px;
            margin-top: 310px;
        }

        div#colorinput {
            position: absolute;
            margin-left: 728px;
            margin-top: 350px;
        }

        #colorinput .el-input__inner {
            width: 384% !important;
        }

        #colorinput .el-input__suffix {
            right: -218px !important;
        }

        div#clockinput {
            position: absolute;
            margin-top: -87px;
            margin-left: 1141px;
            z-index: 11;
            display: none;
        }

        #clockinput .el-input__inner {
            width: 229% !important;
        }

        #clockinput .el-input__suffix {
            width: 33px;
            right: -32px !important;
        }

        #clockinput .el-input {
            width: 36px !important;
        }

        #clockinput .el-input--suffix .el-input__inner {
            padding-right: 4px;
            padding-left: 5px;
        }

        #clockinput .el-input__icon {
            width: 62px !important;
        }

        #cginput .el-input__inner {
            width: 290% !important;
        }

        #cginput .el-input__suffix {
            right: -173px !important;
        }

        div#ledtest {
            position: absolute;
            width: 100%;
        }

        #wzjmall {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 978px;
            margin-top: 321px;
        }

        #wzjmall_content {
            height: 100%;
            background-color: #06B9D1;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #wzjmgrid {
            cursor: pointer;
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 1042px;
            margin-top: 321px;
        }

        #wzjmgrid_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #wzjmjishu {
            cursor: pointer;
            /* pointer-events: none; */
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 1105px;
            margin-top: 321px;
        }

        #wzjmjishu_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #wzjmodd {
            cursor: pointer;
            /* pointer-events: none; */
            border: 1px solid #409EFF;
            width: 52px;
            padding: 1px;
            position: absolute;
            margin-left: 1168px;
            margin-top: 321px;
        }

        #wzjmodd_content {
            height: 100%;
            background-color: #ABABAB;
            padding: 8px;
            color: #ffffff;
            text-align: center;
        }

        #testmode .el-radio {
            margin-right: 10px !important;
        }

        .minbright {
            position: absolute;
            margin-left: 760px;
            margin-top: -122px;
            display: none;
            z-index: 11;
        }

        .maxbright {
            position: absolute;
            margin-left: 904px;
            margin-top: -122px;
            display: none;
            z-index: 11;
        }

        #hdradjust {
            position: absolute;
            margin-left: 248px;
            margin-top: -23px;
            width: 337px;
            display: none;
        }

        #input1 .el-input__inner {
            width: 266% !important;
        }

        #input2 .el-input__inner {
            width: 266% !important;
        }

        #input1 .el-input__suffix {
            right: -164px !important;
        }

        #input2 .el-input__suffix {
            right: -164px !important;
        }

        .ledsetting {
            padding-top: 0px;
            padding-left: 0px;
        }

        .senderstyle {

        }
    </style>


    <link rel="icon" href="img/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/vue.min.js"></script>
    <script src="js/index.js"></script>
    <script src="js/echarts.min.js"></script>
    <script src="js/echarts-liquidfill.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>

</head>

<body>

<div class="index_content" id="app">
    <div class="index_nav">
        <ul>
            <li class="l_left total_chose_fr  azm  nav_active" id="jk"><span class="nczm">洲明本地监控系统</span></li>
            <li class="r_right p1 sz "><span class="nc">系统配置</span></li>
            <li class="r_right p2 kz "><span class="nc">屏体设置</span></li>
        </ul>

        <div class="yh" id="byh">
            <span class="ncyh">admin</span>
            <div id="user_menu" class="um">
                <a class="bw" href="javascript:">账户</a>
                <a class="btc" href="/logout">退出</a>
            </div>
        </div>
    </div>

    <div class="index_tabs">
        <!--本地监控-->
        <div class="tab" id="jkxt">
            <div class="left">
                <div class="left0"><h3 class="lt0">控制卡信息</h3>
                    <div class="kzqrun"></div>
                    <div class="azig"><img src="img/az.svg" alt=""></div>
                    <div class="mainbox">
                        <ul class="clearfix">
                            <li>
                                <div class="boxall">
                                    <div class="sycm">
                                        <ul class="clearfix">
                                            <li><h2>型号</h2><span
                                                    v-for="cm in comlist">{{cm.LEDPARAS.ANDROID_MODEL}}</span></li>
                                            <li><h2>版本</h2><span
                                                    v-for="cm in comlist">{{cm.LEDPARAS.ANDROID_VER}}</span></li>
                                        </ul>
                                        <div class="jkcontent"
                                             style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                                        <ul class="clearfix">
                                            <li><h2>ip地址</h2><span
                                                    v-for="cm in comlist">{{cm.LEDPARAS.ANDROID_IP}}</span></li>
                                            <li><h2>mac地址</h2><span
                                                    v-for="cm in comlist">{{cm.LEDPARAS.ANDROID_MAC}}</span></li>
                                        </ul>
                                        <div class="jkcontent"
                                             style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                                        <ul class="clearfix">
                                            <li><h2>当前工作时间</h2><span>{{curworktime}}</span></li>
                                            <li><h2>累计工作时间</h2><span>{{talworktime}}</span></li>
                                        </ul>
                                    </div>

                                    <div class="boxfoot"></div>
                                </div>
                            </li>
                            <li>

                            </li>
                        </ul>

                    </div>

                </div>
                <div class="left1">
                    <h3 class="lt1">发送卡信息</h3>
                    <div class="mainbox1">
                        <ul class="clearfix1">
                            <li>
                                <div class="boxall1">
                                    <div class="sycm1">
                                        <ul class="clearfix1">
                                            <li><h2>ip地址</h2>
                                                <span id="selectsender">
                                              <template>
                                                <el-select v-for="item in senderlist" v-model="sendercardid"
                                                           @change="onChangeSenderCard(sendercardid)" placeholder="">
                                                    <el-option
                                                            v-for="item in senderlist"
                                                            active-text="正常"
                                                            inactive-text="默认"
                                                            :key="item.SENDERORDER"
                                                            :label="item.IPADDR"
                                                            :value="item.SENDERORDER">
                                                    </el-option>
                                                </el-select>
                                              </template>
                                            </span>
                                            </li>
                                            <li><h2>mac地址</h2><span>{{macaddr}}</span></li>
                                            <li><h2>通讯状态</h2><span id="fskonspan"></span></li>
                                        </ul>
                                        <div class="jkcontent"
                                             style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                                        <ul class="clearfix1">
                                            <li><h2>型号</h2><span>{{sender_type}}</span></li>
                                            <li><h2>版本</h2><span>{{ver}}</span></li>
                                            <li><h2>在用网口数</h2><span>{{port_ordernum}}</span></li>
                                        </ul>
                                    </div>

                                    <div class="boxfoot1"></div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="fskimp">
                        <ul>
                            <li>
                                <h3>实际带载箱体数</h3>
                                <p><span>{{sender_boxusednum}}</span></p>
                            </li>
                            <li>
                                <h3>带载总箱体数</h3>
                                <p><span>{{sender_boxtotalnum}}</span></p>
                            </li>
                        </ul>
                    </div>
                    <div class="fskig"><img src="img/fsk.svg" alt=""></div>
                </div>
            </div>

            <div class="center">
                <h3 class="ct">LED屏体信息</h3>
                <div class="mainbox2">
                    <ul class="clearfix2">
                        <li>
                            <div class="boxall2">
                                <div class="sycm2">
                                    <ul class="clearfix2">
                                        <li><h2>屏体ID</h2><span v-if="source.LEDSCREEN&&source.LEDSCREEN.INDEX">{{source.LEDSCREEN.INDEX}}</span>
                                        </li>
                                        <li><h2>屏体分辨率</h2><span v-for="cm in comlist">{{cm.LEDPARAS.LED_RSLT}}</span>
                                        </li>
                                        <li><h2>LED间距</h2><span v-for="cm in comlist">{{cm.LEDPARAS.LED_SPACE}}</span>
                                        </li>
                                    </ul>
                                    <div class="jkcontent" style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                                    <ul class="clearfix2">
                                        <li><h2>在线发送卡数量</h2><span
                                                v-for="cm in comlist">{{cm.LEDPARAS.SENDER_CNT}}</span></li>
                                        <li><h2>屏体类型</h2><span v-for="cm in comlist">{{cm.LEDPARAS.LED_TYPE}}</span>
                                        </li>
                                        <li><h2>屏体刷新率</h2><span v-for="cm in comlist">{{cm.LEDPARAS.COMMON_RECPARAS.REFRESH}}</span>
                                        </li>
                                    </ul>

                                    <div style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                                    <ul class="clearfix2">
                                        <li><h2>输入源</h2><span>{{inputsource}}</span></li>
                                        <li><h2>输入源分辨率</h2><span>{{insrc_rslt}}</span></li>
                                        <li><h2>输入源刷新率</h2><span>{{insrc_fre}}</span></li>
                                    </ul>

                                </div>

                                <div class="boxfoot2"></div>
                            </div>
                        </li>
                    </ul>
                </div>


                <div class="ledsceen">
                    <div class="cssrun">
                        <span class="ledrun2"
                              v-if="source.LEDSCREEN&&source.LEDSCREEN.INDEX">{{source.LEDSCREEN.INDEX}}</span>
                    </div>
                </div>
            </div>

            <div class="right">
                <div class="right0"><h3 class="rt0">光学参数信息</h3>
                    <div>
                        <div class="gx0" id="chartmain0"></div>
                    </div>
                </div>
                <div class="right1" style="display: none;"><h3 class="rt1">传感器信息</h3>
                    <div class="hjws" id="chartmain3"></div>
                    <div class="dy" id="chartmain1"></div>
                    <div title="开">
                        <div class="fs" id="fssvgturn"></div>
                    </div>
                    <div class="dl" id="chartmain2"></div>
                </div>
            </div>

            <div class="container-flex" tabindex="0" hidefocus="true">
                <div class="box-center">
                    <div class="center-bottom">
                        <div class="city-data">
                            <div id="tuopu">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="pop-up">
                    <span class="close-pop"></span>
                    <h3>
                        <b>箱体型号:<span id="productTitle" style="color: white;"></span></b></h3>
                    <!-- 模组信息弹框 -->
                    <div class="modedetail">
                        <!-- 模组信息 -->
                        <h2>
                            <b>模组信息</b>
                        </h2>
                        <ul>
                            <!-- 分辨率 -->
                            <li style="color: #0e94eb;">
                                分辨率：<b><span id="MOD_RSL"></span></b>
                            </li>
                            <!-- 间距 -->
                            <li style="color: #0e94eb;margin-top: 13px;">
                                间距：<b><span id="MOD_SPACE"></span></b>
                            </li>
                            <!-- 分割线 -->
                            <li class="fengexian"></li>
                            <!-- 规格类型 -->
                            <!--                            <li style="color: #0e94eb;margin-top: 13px;">-->
                            <!--                                规格型号：<b><span id="LAMP_PARA_STYLE" style="color: #E9E7E7;margin-left: 81px;"></span></b>-->
                            <!--                            </li>-->
                            <!-- 亮度 -->
                            <!--                            <li style="color: #0e94eb;margin-top: 13px;">-->
                            <!--                                亮度：<b><span id="LAMP_PARA_BRIGHT" style="color: #E9E7E7;margin-left: 119px;"></span></b>-->
                            <!--                            </li>-->
                            <!-- 发光亮度 -->
                            <!--                            <li style="color: #0e94eb;margin-top: 13px;">-->
                            <!--                                发光角度：<b><span id="LAMP_PARA_ANGLE" style="color: #E9E7E7;margin-left: 81px;"></span></b>-->
                            <!--                            </li>-->

                            <!-- 扫描方式 -->
                            <li style="color: #0e94eb;margin-top: 13px;">
                                扫描方式：<b><span id="MOD_SCAN_NUM"></span></b>
                            </li>
                            <li style="color: #0e94eb;">模组序列号：<b><span id="MOD_ID"></span></b></li>
                        </ul>
                    </div>
                    <div class="set-div">
                        <div class="sensor_Message">
                            <label class="four-f">&nbsp;&nbsp;&nbsp;传感器</label>
                            <div class="didimen1">
                                <ul class="sensor_Message_1">
                                    <li style="margin-top: 8px;color: #0e94eb;">电压：<span id="SENSOR_VOL"
                                                                                         style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">电流：<span id="SENSOR_CURRENT"
                                                                                         style="color: #E9E7E7">A</span>
                                    </li>
                                </ul>
                                <ul class="tempoge">
                                    <li style="margin-top: 8px;color: #0e94eb;">温度：<span id="SENSOR_TMP"
                                                                                         style="color: #E9E7E7">℃</span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">湿度：<span id="SENSOR_HUMI"
                                                                                         style="color: #E9E7E7">%RH</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="driverIc">
                            <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;智能HUB板</label>
                            <div class="didimen2">
                                <ul style="margin-left:12px;margin-top:4px;">
                                    <li style="margin-top: 8px;color: #0e94eb;">接收卡状态：<span id="BOX_MASTER"
                                                                                            style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">网口状态：<span id="PORT_MASTER"
                                                                                           style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">电源状态：<span id="POWER_MASTER"
                                                                                           style="color: #E9E7E7"></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="Power_Message">
                            <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;电源：</label>
                            <div class="didimen3">
                                <ul style="margin-left:12px;margin-top:-4px;">
                                    <li style="margin-top: 8px;color: #0e94eb;">实际功率：<span id="RT_POWERDIS"
                                                                                           style="color: #E9E7E7"></span>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- 模组拓扑 -->
                        <div class="module-model">
                            <!--  模组1 -->
                            <div class="module1" onclick="aiguozhe('module1')">

                            </div>
                            <!--  模组2 -->
                            <div class="module2" onclick="aiguozhe('module2')">

                            </div>
                            <!--  模组3 -->
                            <div class="module3" onclick="aiguozhe('module3')">

                            </div>
                            <!--  模组4 -->
                            <div class="module4" onclick="aiguozhe('module4')">

                            </div>

                            <!--  模组5 -->
                            <div class="module5" onclick="aiguozhe('module5')">

                            </div>

                            <!--  模组6-->
                            <div class="module6" onclick="aiguozhe('module6')">

                            </div>

                            <!--  模组7-->
                            <div class="module7" onclick="aiguozhe('module7')">

                            </div>

                            <!--  模组8-->
                            <div class="module8" onclick="aiguozhe('module8')">

                            </div>
                        </div>
                        <div class="rec_Message">

                            <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;接收卡信息：</label>
                            <div class="didimen4">
                                <ul style="margin-left:3px;margin-top:-6px;">
                                    <li style="margin-top: 8px;color: #0e94eb;">接收卡名称：<span id="rec_Type"
                                                                                            style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">接收卡型号：<span id="rec_ID"
                                                                                            style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">接收卡个数：<span id="rec_Count"
                                                                                            style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">版本号：<span id="REC_VER"
                                                                                          style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">带载面积：<span id="REC_Carrying_Area"
                                                                                           style="color: #E9E7E7">m㎡</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="module_Message">
                            <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模组信息：</label>
                            <div class="didimen5">
                                <ul style="margin-left:2px;margin-top:-4px;">
                                    <li style="margin-top: 8px;color: #0e94eb;">模组个数：<span id="MOD_ORDER"
                                                                                           style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">正常模组：<span id="MOD_NORMAL"
                                                                                           style="color: #E9E7E7"></span>
                                    </li>
                                    <li style="margin-top: 8px;color: #0e94eb;">故障模组：<span id="MOD_FAULT"
                                                                                           style="color: #E9E7E7"></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="tab" style="display: none;">
            2
        </div>

        <div class="tab" style="display:none">
            <template>
                <el-tabs :tab-position="tabPosition" style="height: 1100px;">
                    <el-tab-pane label="屏体配置">
                        <div id="boxconnect">
                            <div class="addtab">
                                <span>显示屏数量：</span>
                                <el-input-number v-model="pingti_num" @change="handleChange_pingti"
                                                 @focus="becomeReadOnly" :min="1" :max="999"
                                                 label="描述文字"></el-input-number>
                            </div>
                            <!--发送卡选择-->
                            <div class="selectSender">
                                <label>
                                    <b>发送卡：</b>
                                </label>
                                <el-select v-model="singleSender" size="small" @change="changSender()"
                                           placeholder="请选择发送卡">
                                    <el-option
                                            v-for="senderitem in senderItem"
                                            :key="senderitem.value"
                                            :label="senderitem.label"
                                            :disabled="senderitem.disabled"
                                            :value="senderitem.value">
                                    </el-option>
                                </el-select>
                            </div>

                            <!-- 发送到硬件 -->
                            <div class="sendMessageToMachine">
                                <el-row>
                                    <el-button type="success" @click="sendJsonToMachine()" plain>发送到硬件</el-button>
                                </el-row>
                            </div>

                            <!--屏体选择-->
                            <el-tabs v-model="editableTabsValue" @tab-click="senderTabClick" type="card">
                                <el-tab-pane
                                        v-for="(screenitem, index) in editableTabs"
                                        :key="screenitem.name"
                                        :label="screenitem.title"
                                        :name="screenitem.name"
                                >
                                    <div class="backuppairing">
                                        <el-checkbox v-model="pairingChecked" label="设置双备份" @change="optionDbBackup"
                                                     size="mini" border size="medium"></el-checkbox>
                                    </div>
                                    <div class="portRow">
                                        <div class="portRow-Label">
                                            <label>发送卡网口设置</label>
                                        </div>

                                        <div class="normalPort">
                                            <el-radio-group v-model="port_radio" @change="choosePort(port_radio)"
                                                            size="small">
                                                <el-radio-button
                                                        v-for="(portoneitem, index) in portItem.slice(0,8)"
                                                        :key="portoneitem.name"
                                                        :label="portoneitem.name"
                                                        :disabled="portoneitem.status"
                                                        :name="portoneitem.name"
                                                >
                                                </el-radio-button>
                                            </el-radio-group>

                                            <div class="port-smallNum">
                                                <el-radio-group v-model="port_radio" @change="choosePort(port_radio)"
                                                                size="small">
                                                    <el-radio-button
                                                            v-for="(porttwoitem, index) in portItem.slice(8)"
                                                            :key="porttwoitem.name"
                                                            :label="porttwoitem.name"
                                                            :disabled="porttwoitem.status"
                                                            :name="porttwoitem.name"
                                                    >
                                                    </el-radio-button>
                                                </el-radio-group>
                                            </div>
                                        </div>

                                        <div class="abnormalPort">
                                            <el-radio-group v-model="backupName" @change="changeBackupName()"
                                                            size="small">
                                                <el-radio-button
                                                        v-for="(abportoneitem, index) in masterPortItem"
                                                        :key="abportoneitem.name"
                                                        :label="'P('+abportoneitem.id+','+abportoneitem.backupid+')'"
                                                        :disabled="abportoneitem.status"
                                                        :name="abportoneitem.id"
                                                >
                                                </el-radio-button>
                                            </el-radio-group>
                                        </div>

                                        <div class="chooseBackUpId">
                                            <el-dropdown @command="handleCommand" trigger="click">
                                                <span class="el-dropdown-link">
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="el-icon-arrow-down el-icon--right"></i>&nbsp;&nbsp;&nbsp;&nbsp;
                                                </span>
                                                <el-dropdown-menu slot="dropdown">
                                                    <el-dropdown-item
                                                            v-for="(backupitem, index) in backUpPortItem"
                                                            :name="backupitem.name"
                                                            :command="backupitem.id"
                                                    >{{backupitem.name}}
                                                    </el-dropdown-item>
                                                </el-dropdown-menu>
                                            </el-dropdown>
                                        </div>

                                    </div>
                                    <fieldset class="pianyiliang-border">
                                        <legend>
                                            <h2>偏移量</h2>
                                        </legend>
                                        <div class="pianyiliang">
                                            <div class="XXX">
                                                <span>X</span>
                                                <el-input-number v-model="pianyinumX" controls-position="right"
                                                                 @change="handleChange_pianyiliangX" size="mini"
                                                                 :min="-1000" :max="1000"></el-input-number>
                                            </div>

                                            <div class="YYY">
                                                <span>Y</span>
                                                <el-input-number v-model="pianyinumY" controls-position="right"
                                                                 @change="handleChange_pianyiliangY" size="mini"
                                                                 :min="-1000" :max="1000"></el-input-number>
                                            </div>
                                        </div>
                                    </fieldset>
                                    <div class="pingti-option">
                                        <div class="row-label">
                                            <label>接收卡列数</label>
                                        </div>
                                        <el-input-number v-model="rowNum" size="mini" @change="handleRowChange" :min="0"
                                                         :max="999" label="描述文字"></el-input-number>

                                        <div class="line-counter">
                                            <div class="row-label">
                                                <label>接收卡行数</label>
                                            </div>
                                            <el-input-number v-model="lineNum" size="mini" @change="handleLineChange"
                                                             :min="0" :max="999" label="描述文字"></el-input-number>
                                        </div>
                                    </div>
                                    <fieldset class="boxtype-border">
                                        <legend><h2>箱体类型</h2></legend>
                                        <div class="boxType">
                                            <el-select v-model="boxtype" size="small" @change="chooseReviceType()"
                                                       placeholder="请选择">
                                                <el-option
                                                        v-for="boxitem in boxItem"
                                                        :key="boxitem.name"
                                                        :label="boxitem.name"
                                                        :value="boxitem.name">
                                                </el-option>
                                            </el-select>
                                        </div>
                                        <div class="box-width-height">
                                            <div class="box_width">
                                                <span>宽度:</span>
                                                <el-input
                                                        size="mini"
                                                        placeholder="宽度"
                                                        v-model="box_width"
                                                        :disabled="true">
                                                </el-input>
                                            </div>
                                            <div class="box_height">
                                                <span>高度:</span>
                                                <el-input
                                                        size="mini"
                                                        placeholder="高度"
                                                        v-model="box_height"
                                                        :disabled="true">
                                                </el-input>
                                            </div>
                                        </div>
                                    </fieldset>
                                    <fieldset class="box-connetor-border">
                                        <legend><h2>网口快速连接-{{screenitem.content}}</h2></legend>
                                        <div class="box-connetor">
                                            <el-row>
                                                <el-button type="success" icon="el-icon-my-firstbtn"
                                                           @click="connetorFirst" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-secondbtn"
                                                           @click="connetorSecond" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-thirdbtn"
                                                           @click="connetorThird" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-fouthbtn"
                                                           @click="connetorFouth" circle></el-button>
                                            </el-row>
                                            <div class="secondhang">
                                                <el-row>
                                                    <el-button type="success" icon="el-icon-my-fifthbtn"
                                                               @click="connetorFifth" circle></el-button>
                                                    <el-button type="success" icon="el-icon-my-sixthbtn"
                                                               @click="connetorSixth" circle></el-button>
                                                    <el-button type="success" icon="el-icon-my-sventhbtn"
                                                               @click="connetorSventh" circle></el-button>
                                                    <el-button type="success" icon="el-icon-my-eigthbtn"
                                                               @click="connetorEigth" circle></el-button>
                                                </el-row>
                                            </div>
                                            <div class="thirdhang">
                                                <el-button type="success" icon="el-icon-my-ninthbtn"
                                                           @click="connetorNinth" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-tenthbtn"
                                                           @click="connetorTenth" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-elventhbtn"
                                                           @click="connetorElventh" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-twelfthbtn"
                                                           @click="connetorTwelfth" circle></el-button>
                                            </div>
                                            <div class="fourthhang">
                                                <el-button type="success" icon="el-icon-my-tirteenthbtn"
                                                           @click="connetorTirteenth" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-fourteenthbtn"
                                                           @click="connetorFourteenth" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-fifteenthbtn"
                                                           @click="connetorFifteenth" circle></el-button>
                                                <el-button type="success" icon="el-icon-my-sixteenthbtn"
                                                           @click="connetorSixteenth" circle></el-button>
                                            </div>
                                        </div>
                                    </fieldset>
                                    <!-- 工具箱 -->
                                    <div class="box-connect-tools">
                                        <el-button-group>
                                            <el-button type="primary" @click="goBackBtn">回退</el-button>
                                            <!--                        <el-button type="primary" @click="resetgoBackBtn">反回退</el-button>-->
                                            <el-button type="primary" @click="resetAllPortBtn">重置所有网口</el-button>
                                            <el-button type="primary" @click="resetThisPortBtn">重置当前网口</el-button>
                                        </el-button-group>
                                    </div>
                                </el-tab-pane>
                            </el-tabs>

                            <!--分割线-->
                            <div class="fengexian-boxconnect">

                            </div>
                            <!-- 绘制图形框 -->
                            <div class="box-Connect-box">
                                <canvas id="box-canvas"> 你的浏览器不支持 canvas，请升级你的浏览器。</canvas>
                            </div>
                        </div>
                    </el-tab-pane>
                    <el-tab-pane label="屏体控制">

                        <div class="senderstyle">
                            <!--发送卡下拉列表-->
                            <fieldset class="senderadjust">
                                <legend id="sendercard">发送卡</legend>
                                <div id="ledsendercard">
                                    <template>
                                        <el-select v-model="senderid" @change="onChangeSendervalue" placeholder="请选择">
                                            <el-option
                                                    v-for="item in senderstatuslist"
                                                    active-text="正常"
                                                    inactive-text="默认"
                                                    :key="item.ORDER"
                                                    :label="`${item.HOSTIP} ${xianshi(item.STATUS)}`"
                                                    :value="item.ORDER">
                                            </el-option>
                                        </el-select>
                                    </template>
                                </div>
                            </fieldset>
                        </div>

                        <div class="ledsetting">
                            <fieldset class="inputsourceadjust">
                                <legend>输入源</legend>
                                <!--输入源按钮-->
                                <div id="ledradio">
                                    <template>
                                        <el-radio-group v-if="radio!=null" @change="onChangeRadio" v-model="radio">
                                            <el-radio v-model="radio" label="HDMI"><span id="hdmitext">HDMI 无信号</span>
                                            </el-radio>
                                            <el-radio v-model="radio" label="DVI-D"><span id="dvitext">DVI-D 无信号</span>
                                            </el-radio>
                                            <el-radio v-model="radio" label="SDI"><span id="sditext">SDI 无信号</span>
                                            </el-radio>
                                        </el-radio-group>
                                    </template>
                                </div>
                            </fieldset>

                            <!--同步开关-->
                            <div id="syncswitch">
                                <el-switch
                                        v-model="status2"
                                        @change="swichchange2"
                                        active-color="#13ce66"
                                        inactive-color="#ff4949" active-text="播放" inactive-text="暂停">
                                </el-switch>
                            </div>

                            <!--同步信号下拉选择框-->
                            <fieldset class="syncadjust">
                                <legend>同步信号</legend>
                                <div id="syncinput">
                                    <template>
                                        <el-select v-model="syncvalue" @change="onChangeSyncvalue" placeholder="请选择">
                                            <el-option
                                                    v-for="item in syncoptions"
                                                    active-text="正常"
                                                    inactive-text="默认"
                                                    :key="item.syncvalue"
                                                    :label="item.label"
                                                    :value="item.syncvalue">
                                            </el-option>
                                        </el-select>
                                    </template>
                                </div>
                            </fieldset>
                            <!--用户分辨率下拉列表-->
                            <fieldset class="fbladjust">
                                <legend id="userfbl">分辨率</legend>
                                <div id="input">
                                    <template>
                                        <el-select v-model="fblvalue" @change="onChangeFblvalue" placeholder="请选择">
                                            <el-option
                                                    v-for="item in fbloptions"
                                                    active-text="正常"
                                                    inactive-text="默认"
                                                    :key="item.fblvalue"
                                                    :label="item.label"
                                                    :value="item.fblvalue">
                                            </el-option>
                                        </el-select>
                                    </template>
                                </div>
                            </fieldset>

                            <!--亮度开关-->
                            <div id="brightswitch">
                                <el-switch
                                        v-model="status3"
                                        @change="swichchange3"
                                        active-color="#13ce66"
                                        inactive-color="#ff4949" active-text="自动" inactive-text="手动">
                                </el-switch>
                            </div>

                            <!--亮度手动最大值最小值-->
                            <div class="minbright">
                                <template>
                                    <el-input-number v-model="brightminnum" @change="minbrighthandleChange" :min="1"
                                                     :max="100" label="1"></el-input-number>
                                </template>
                            </div>
                            <!--亮度手动最大值最大值-->
                            <div class="maxbright">
                                <template>
                                    <el-input-number v-model="brightmaxnum" @change="maxbrighthandleChange" :min="1"
                                                     :max="100" label="2"></el-input-number>
                                </template>
                            </div>

                            <!--亮度定时-->
                            <div id="clockinput">
                                <template>
                                    <el-select v-model="clockvalue" @change="onChangeClockvalue" placeholder="请选择">
                                        <el-option
                                                v-for="item in clockoptions"
                                                active-text="正常"
                                                inactive-text="默认"
                                                :key="item.clockvalue"
                                                :label="item.label"
                                                :value="item.clockvalue">
                                        </el-option>
                                    </el-select>
                                </template>
                            </div>

                            <fieldset class="gamutadjust1">
                                <legend>色域调节</legend>
                                <!--色域下拉列表选项-->
                                <div id="cginput"
                                     style="position: absolute;margin-top: 17px;margin-left: -21px;z-index: 11;">
                                    <template>
                                        <el-select v-model="cgvalue" @change="onChangeCgvalue" placeholder="请选择">
                                            <el-option
                                                    v-for="item in cgoptions"
                                                    active-text="正常"
                                                    inactive-text="默认"
                                                    :key="item.cgvalue"
                                                    :label="item.label"
                                                    :value="item.cgvalue">
                                            </el-option>
                                        </el-select>
                                    </template>
                                </div>
                            </fieldset>

                            <fieldset class="coloradjust">
                                <legend>色彩调节</legend>
                                <!--slider滑块调节-->
                                <div id="ledslider" class="ledph">
                                    <!--一键恢复默认-->
                                    <div style="width: 100px;height: 100px;position:absolute;margin-top: -11px;margin-left: -110px;z-index: 10">
                                        <el-row>
                                            <el-button type="primary" @click="onChangedefault" plain>
                                                恢复默认
                                            </el-button>
                                        </el-row>
                                    </div>

                                    <template>
                                        <!--左边滑块-->
                                        <div class="ledph1">

                                            <fieldset class="brightadjust">
                                                <legend>亮度调节</legend>
                                                <div class="block"
                                                     style="position: absolute; margin-left:-23px;margin-top:-18px;width: 337px;">
                                                    <div class="demonstration" style="float:left;padding-right: 10px;"
                                                         title="[0,100]">亮度
                                                    </div>
                                                    <div style="display: inline;float:left;width: 70%;padding-left: 10px;padding-right: 10px;">
                                                        <el-slider @change="onChangeValue1" v-model="value1"
                                                                   v-bind:disabled="status3"></el-slider>
                                                    </div>
                                                    <div>{{value1}}</div>
                                                </div>
                                            </fieldset>

                                            <div class="block" style="position: absolute;margin-top: -127px;">
                                                <div class="demonstration"
                                                     style="float:left;padding-right: 10px;position: relative;z-index: 11;"
                                                     title="[-20,20]">色相
                                                </div>
                                                <div style="display: inline;float: left;width: 259%;padding-left: 51px;padding-right: 10px;margin-top: -71px;">
                                                    <el-slider @change="onChangeValue2" v-model="value2" :min="-20"
                                                               :max="20"></el-slider>
                                                </div>
                                                <div style="margin-left: 356px;position: absolute;">{{value2}}</div>
                                            </div>

                                            <fieldset class="ctadjust">
                                                <legend>色温调节</legend>
                                                <div class="block"
                                                     style="position: absolute; margin-left: -16px;margin-top: -44px;width: 337px;">
                                                    <div class="demonstration" style="float:left;padding-right: 10px;"
                                                         title="[3500,9800]">色温
                                                    </div>
                                                    <div style="display: inline;float:left;width: 70%;padding-left: 10px;padding-right: 13px;">
                                                        <el-slider :step="100" @change="onChangeValue3" v-model="value3"
                                                                   :min="3500" :max="9800"></el-slider>
                                                    </div>
                                                    <div>{{value3}}</div>
                                                </div>
                                            </fieldset>

                                            <div class="block" style="margin-top: -76px;position: absolute;">
                                                <div class="demonstration"
                                                     style="float:left;padding-right: 10px;position: relative;z-index: 11;"
                                                     title="[0,200]">色度
                                                </div>
                                                <div style="display: inline;float: left;width: 263%;padding-left: 50px;padding-right: 10px;margin-top: -70px;">
                                                    <el-slider @change="onChangeValue4" v-model="value4" :min="0"
                                                               :max="200"></el-slider>
                                                </div>
                                                <div style="margin-left: 356px;position: absolute;">{{value4}}</div>
                                            </div>

                                            <fieldset class="gamutadjust">
                                                <legend>亮度因子</legend>
                                                <div class="block"
                                                     style="position: absolute; margin-left: -37px;margin-top: -52px;width: 337px;">
                                                    <div class="demonstration" style="float:left;padding-right: 16px;"
                                                         title="[0,100]">色域关
                                                    </div>
                                                    <div style="display: inline;float:left;width: 69%;padding-left: 1px;padding-right: 13px;">
                                                        <el-slider @change="onChangeValue6"
                                                                   v-model="value6"></el-slider>
                                                    </div>
                                                    <div>{{value6}}</div>
                                                </div>

                                                <div class="block"
                                                     style="position: absolute; margin-left: -37px;;margin-top: -17px;width: 337px;">
                                                    <div class="demonstration" style="float:left;padding-right: 16px;"
                                                         title="[0,100]">色域开
                                                    </div>
                                                    <div style="display: inline;float:left;width: 69%;padding-left: 1px;padding-right: 13px;">
                                                        <el-slider @change="onChangeValue10"
                                                                   v-model="value10"></el-slider>
                                                    </div>
                                                    <div>{{value10}}</div>
                                                </div>
                                            </fieldset>

                                            <div class="block"
                                                 style="margin-left: -49.5px;margin-top: 23px;position: absolute;">
                                                <div class="demonstration"
                                                     style="float:left;padding-right: 10px;position: relative;z-index: 11;"
                                                     title="[-10,10]">灰度基准值
                                                </div>
                                                <div style="display: inline;float: left;width: 135%;padding-left: 99px;padding-right: 10px;margin-top: -70px;">
                                                    <el-slider @change="onChangeValue7" v-model="value7" :min="-10"
                                                               :max="10" :step="0.5"></el-slider>
                                                </div>
                                                <div style="margin-left: 408px;position: absolute;">{{value7}}</div>
                                            </div>
                                            <div class="block"
                                                 style="margin-left: -52px;position: absolute;margin-top: 73px;">
                                                <div class="demonstration"
                                                     style="float:left;padding-right: 10px;position: relative;z-index: 11;"
                                                     title="[0,31]">增强器调整
                                                </div>
                                                <div style="display: inline;float: left;width: 134%;padding-left: 101px;padding-right: 10px;margin-top: -70px;">
                                                    <el-slider @change="onChangeValue8" v-model="value8" :min="0"
                                                               :max="31"></el-slider>
                                                </div>
                                                <div style="margin-left: 412px;position: absolute;">{{value8}}</div>
                                            </div>
                                            <div class="block"
                                                 style="margin-left: -33px;position: absolute;margin-top: -30px;">
                                                <div class="demonstration"
                                                     style="float:left;padding-right: 10px;position: relative;z-index: 11;"
                                                     title="[0,200]">灰度增益
                                                </div>
                                                <div style="display: inline;float: left;width: 161%;padding-left: 83px;padding-right: 10px;margin-top: -70px;">
                                                    <el-slider @change="onChangeValue9" v-model="value9" :min="0"
                                                               :max="200"></el-slider>
                                                </div>
                                                <div style="margin-left: 390px;position: absolute;">{{value9}}</div>
                                            </div>

                                        </div>


                                        <fieldset class="hdradjustcontent">
                                            <legend>HDR</legend>
                                            <!--hdr滑块-->
                                            <div class="block" id="hdradjust">
                                                <div class="demonstration" id="hdrslider"
                                                     style="float:left;padding-right: 10px;padding-top: 23px;">HDR
                                                </div>
                                                <div style="display: inline;float:left;width: 45%;padding-left: 10px;padding-right: 13px;">
                                                    <el-slider v-model="value5" @change="onChangeValue5" max="100"
                                                               v-bind:disabled="!status1"></el-slider>
                                                </div>
                                                <div id="hdrslidervalue" style="margin-top: 21px;">{{value5}}</div>
                                            </div>
                                        </fieldset>

                                    </template>
                                </div>
                            </fieldset>

                            <!--gamma选择下拉列表-->
                            <div id="input1">
                                <template>
                                    <el-select v-model="gmvalue" @change="changegmavalue" placeholder="请选择">
                                        <el-option
                                                v-for="item in gmoptions"
                                                active-text="正常"
                                                inactive-text="默认"
                                                :key="item.gmvalue"
                                                :label="item.label"
                                                :value="item.gmvalue">
                                        </el-option>
                                    </el-select>
                                </template>
                            </div>

                            <!--hdrmode选择下拉列表-->
                            <div id="input2">
                                <template>
                                    <el-select v-model="hdrmodevalue" @change="changehdrmodevalue" placeholder="请选择">
                                        <el-option
                                                v-for="item in hdrmodeoptions"
                                                active-text="正常"
                                                inactive-text="默认"
                                                :key="item.hdrmodevalue"
                                                :label="item.label"
                                                :value="item.hdrmodevalue">
                                        </el-option>
                                    </el-select>
                                </template>
                            </div>

                            <!--hdr开关-->
                            <div id="ledswitch">
                                <el-switch
                                        v-model="status1"
                                        @change="swichchange"
                                        active-color="#13ce66"
                                        inactive-color="#ff4949" active-text="HDR开" inactive-text="HDR关">
                                </el-switch>
                                <span id="bitnum" style="margin-left:-34px;">16位</span>
                            </div>

                            <!--led测试-->
                            <div id="ledtest">

                                <div style="position: absolute;width: 100%;margin-top: 155px;">

                                    <!--同步信号丢失显示画面下拉列表-->
                                    <fieldset class="snsginputadjust">
                                        <legend>同步信号丢失显示画面</legend>
                                        <div id="snsginput">
                                            <template>
                                                <el-select v-model="snsgvalue" @change="onChangeSnsgvalue"
                                                           placeholder="请选择">
                                                    <el-option
                                                            v-for="item in snsgoptions"
                                                            active-text="正常"
                                                            inactive-text="默认"
                                                            :key="item.snsgvalue"
                                                            :label="item.label"
                                                            :value="item.snsgvalue">
                                                    </el-option>
                                                </el-select>
                                            </template>
                                        </div>
                                    </fieldset>

                                    <!--箱体顺序-->
                                    <fieldset class="wzjmadjust">
                                        <legend>箱体顺序</legend>
                                        <div id="wzjm" onclick="changeColor()">
                                            <div id="wzjm_content" class="nocopy">
                                                不显示
                                            </div>
                                        </div>
                                    </fieldset>

                                    <!--显示颜色-->
                                    <fieldset class="rgbadjust">
                                        <legend>显示颜色</legend>

                                        <div id="wzjmred" onclick="changeRedColor()">
                                            <div id="wzjmred_content" class="nocopy">
                                                红色
                                            </div>
                                        </div>
                                        <div id="wzjmgreen" onclick="changeGreenColor()">
                                            <div id="wzjmgreen_content" class="nocopy">
                                                绿色
                                            </div>
                                        </div>
                                        <div id="wzjmblue" onclick="changeBlueColor()">
                                            <div id="wzjmblue_content" class="nocopy">
                                                蓝色
                                            </div>
                                        </div>
                                        <div id="rgbshow" onclick="changergbColor()">
                                            <div id="rgbshow_content" class="nocopy">
                                                显示
                                            </div>
                                        </div>

                                    </fieldset>

                                </div>

                                <!--测试模式-->
                                <fieldset class="testmodeadjust">
                                    <legend>测试模式</legend>
                                    <!--测试模式按钮-->
                                    <div style="position: absolute;width: 100%;margin-top: -391px;margin-left: -738px;">
                                        <div id="testmode">
                                            <template>
                                                <el-radio-group v-if="radio1!=null" @change="onTestChangeRadio"
                                                                v-model="radio1">
                                                    <el-radio v-model="radio1" label="箱体"></el-radio>
                                                    <el-radio v-model="radio1" label="内置"></el-radio>
                                                </el-radio-group>
                                            </template>
                                        </div>
                                        <!--测试模式下拉列表-->
                                        <div id="colorinput">
                                            <template>
                                                <el-select v-model="colorvalue" @change="changecolorvalue1"
                                                           placeholder="请选择">
                                                    <el-option
                                                            v-for="item in coloroptions"
                                                            active-text="正常"
                                                            inactive-text="默认"
                                                            :key="item.colorvalue"
                                                            :label="item.label"
                                                            :value="item.colorvalue">
                                                    </el-option>
                                                </el-select>
                                            </template>
                                        </div>
                                        <!--测试模式网格-->
                                        <div id="wzjmall" onclick="changeAllColor()" onchange="recChangeAllColor()">
                                            <div id="wzjmall_content" class="nocopy">
                                                所有
                                            </div>
                                        </div>
                                        <div id="wzjmgrid" onclick="changeGridColor()" onchange="recChangeGridColor()">
                                            <div id="wzjmgrid_content" class="nocopy">
                                                网格
                                            </div>
                                        </div>
                                        <div id="wzjmjishu" onclick="changeJishuColor()"
                                             onchange="recChangeJishuColor()">
                                            <div id="wzjmjishu_content" class="nocopy">
                                                奇数
                                            </div>
                                        </div>
                                        <div id="wzjmodd" onclick="changeOddColor()" onchange="recChangeOddColor()">
                                            <div id="wzjmodd_content" class="nocopy">
                                                偶数
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                            </div>

                        </div>
                    </el-tab-pane>
                </el-tabs>
            </template>
        </div>

    </div>


</div>

</body>


<script type="text/javascript">
    let _self = null;
    //websocket实例
    let websocket = null;
    /**
     * 绘制图表所需的全局变量
     * */
    let area_port = null;
    //发送卡索引
    let senderIndex = null;
    let xTox = 132;
    let yToy = 84;

    let demo = new Vue({
        el: '#app',
        data() {
            return {
                /**
                 * 屏体设置所需参数
                 * 新版本
                 * */
                tabIndex: 1,
                //网口列表
                portItem: [
                    {
                        id: '1',
                        name: 'P1',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '2',
                        name: 'P2',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '3',
                        name: 'P3',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '4',
                        name: 'P4',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '5',
                        name: 'P5',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '6',
                        name: 'P6',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '7',
                        name: 'P7',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '8',
                        name: 'P8',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '9',
                        name: 'P9',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '10',
                        name: 'P10',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '11',
                        name: 'P11',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '12',
                        name: 'P12',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '13',
                        name: 'P13',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '14',
                        name: 'P14',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '15',
                        name: 'P15',
                        backupid: null,
                        status: false
                    },
                    {
                        id: '16',
                        name: 'P16',
                        backupid: null,
                        status: false
                    }
                ],
                //中间变量-用以辨识数组
                usedPortItem: [],
                //屏体数量:
                pingti_num: 1,
                last_pingti_num: undefined,
                //发送卡列表
                senderItem:[{
                    value: 'sender1',
                    label: '发送卡1'
                },{
                    value: 'sender2',
                    label: '发送卡2'
                }],
                //当前选中箱体
                clicked_Box: null,
                //当前发送卡
                singleSender: null,
                //箱体长度
                box_height: '270',
                //箱体宽度
                box_width: '480',
                //箱体类型
                boxtype: 'UHPII1.2',
                //箱体列表常量
                boxItem: [
                    {
                        name: 'UHPII0.9',
                        mod: '160×180',
                        box: '640×360',
                        jianju: '0.953'
                    },
                    {
                        name: 'UHPII1.2',
                        mod: '120×135',
                        box: '480×270',
                        jianju: '1.27'
                    },
                    {
                        name: 'UHPII2.5',
                        mod: '60×135',
                        box: '240×135',
                        jianju: '2.54'
                    }
                ],
                //偏移量-X
                pianyinumX: 0,
                //偏移量-Y
                pianyinumY: 0,
                //接收卡列数
                rowNum: 0,
                //接收卡行数
                lineNum: 0,
                //网口选择
                port_radio: null,
                //当前选中箱体的模组
                clicked_Box_ModGroup: null,
                //tab起始值
                editableTabsValue: '1',
                //tab数据
                editableTabs: [{
                    title: '屏体 1',
                    name: '1',
                    content: '屏体 1',
                    contextbody: {
                        row: 0,
                        line: 0,
                        pianyiliangX: 0,
                        pianyiliangY: 0,
                        boxtype: 'UHPII1.2',
                        senderItem: [
                            {
                                name: 'sender1',
                                port: []
                            }
                        ]
                    }
                }],

                //设置下发参数
                senderPostList: [],

                tabPosition: 'left',
                comlist: "",
                destination: "",
                source: "",
                responsemsg: "",

                bright: "",
                brtc: "",
                cenh: "",
                chroma: "",
                colc: "",
                conc: "",
                gamma: "",
                hue: "",

                macaddr: "",
                sendcardstatus: "",
                sender_type: "",
                ver: "",
                inputsource: "",
                insrc_rslt: "",
                insrc_fre: "",

                senderlist: [],
                sendercardid: "1",

                senderstatuslist: [],
                senderid: "",
                senderip: "",
                senderstatus: "",

                port_ordernum: "",
                sender_boxusednum: "",
                sender_boxtotalnum: "",

                curworktime: "",
                talworktime: "",

                status1: false,
                status2: true,
                status3: false,
                status4: true,
                status5: true,
                status6: true,
                status7: true,
                status8: true,

                ledred: "0",
                ledgreen: "0",
                ledblue: "0",

                brightminnum: "",
                brightmaxnum: "",

                value1: "",
                value2: "",
                value3: "",
                value4: "",
                value5: "",
                value6: "",
                value7: "",
                value8: "",
                value9: "",
                value10: "",
                hexhighvalue: "0",

                radio: "",
                radio1: "箱体",

                syncoptions: [{
                    syncvalue: '0',
                    label: 'Genlock'
                }, {
                    syncvalue: '1',
                    label: '输入'
                }],
                syncvalue: '',

                snsgoptions: [{
                    snsgvalue: '0',
                    label: '黑色'
                }, {
                    snsgvalue: '1',
                    label: '绿色'
                }, {
                    snsgvalue: '2',
                    label: '蓝色'
                }, {
                    snsgvalue: '3',
                    label: '红色'
                }, {
                    snsgvalue: '4',
                    label: '最后一帧图像'
                }],
                snsgvalue: '',

                fbloptions: [{
                    fblvalue: '1920*1080',
                    label: '1920*1080'
                }, {
                    fblvalue: '1280*1024',
                    label: '1280*1024'
                }, {
                    fblvalue: '2560*1600',
                    label: '2560*1600'
                }, {
                    fblvalue: '3840*2160',
                    label: '3840*2160'
                }],
                fblvalue: '',

                gmoptions: [{
                    gmvalue: '0',
                    label: '1.8'
                }, {
                    gmvalue: '1',
                    label: '2'
                }, {
                    gmvalue: '2',
                    label: '2.2'
                }, {
                    gmvalue: '3',
                    label: '2.4'
                }, {
                    gmvalue: '4',
                    label: '2.5'
                }, {
                    gmvalue: '5',
                    label: '2.8'
                }, {
                    gmvalue: '6',
                    label: '3'
                }, {
                    gmvalue: '7',
                    label: 'linear'
                }],
                gmvalue: '5',

                hdrmodeoptions: [{
                    hdrmodevalue: '100',
                    label: 'SDR->HDR'
                }, {
                    hdrmodevalue: '101',
                    label: 'HLG'
                }, {
                    hdrmodevalue: '102',
                    label: 'PQ'
                }],
                hdrmodevalue: '100',

                coloroptions: [{
                    colorvalue: '0',
                    label: '关'
                }, {
                    colorvalue: '1',
                    label: '红'
                }, {
                    colorvalue: '2',
                    label: '绿'
                }, {
                    colorvalue: '3',
                    label: '蓝'
                }, {
                    colorvalue: '4',
                    label: '洋红'
                }, {
                    colorvalue: '5',
                    label: '青'
                }, {
                    colorvalue: '6',
                    label: '橙'
                }, {
                    colorvalue: '7',
                    label: '白'
                }, {
                    colorvalue: '8',
                    label: '黑'
                }, {
                    colorvalue: '9',
                    label: '彩虹色'
                }, {
                    colorvalue: '10',
                    label: '水平增加'
                }, {
                    colorvalue: '11',
                    label: '垂直增加'
                }, {
                    colorvalue: '12',
                    label: '对角线灰度'
                }, {
                    colorvalue: '13',
                    label: '水平线'
                }, {
                    colorvalue: '14',
                    label: '垂直线'
                }, {
                    colorvalue: '15',
                    label: '固定0-63灰度'
                }
                ],
                colorvalue: '',

                clockoptions: [{
                    clockvalue: '2',
                    label: '1 分钟'
                }, {
                    clockvalue: '4',
                    label: '2 分钟'
                }, {
                    clockvalue: '6',
                    label: '3 分钟'
                }, {
                    clockvalue: '8',
                    label: '4 分钟'
                }, {
                    clockvalue: '12',
                    label: '6 分钟'
                }, {
                    clockvalue: '16',
                    label: '8 分钟'
                }, {
                    clockvalue: '20',
                    label: '10 分钟'
                }, {
                    clockvalue: '30',
                    label: '15 分钟'
                }, {
                    clockvalue: '60',
                    label: '30 分钟'
                }, {
                    clockvalue: '120',
                    label: '60 分钟'
                }],
                clockvalue: '',

                cgoptions: [{
                    cgvalue: '0',
                    label: '关'
                }, {
                    cgvalue: '1',
                    label: '宽的'
                }, {
                    cgvalue: '2',
                    label: '保留'
                }],
                cgvalue: '',

                //为了屏蔽选框的值
                backupName: '',
                //双网口模式
                pairingChecked: false,
                //筛选的网口列表
                backUpPortItem:[],
                //展示的网口列表
                masterPortItem:[],
            }
        },
        mounted() {
            let count = 0;
            let screenCount = 0;
            _self = this;
            //避免重复连接
            let lockReconnect = false;
            //ws地址
            let wsUrl = "ws://" + window.location.hostname + ":" + "9090";

            function createWebSocket(url) {
                console.log("进入createWebSocket websocket连接方法");
                try {
                    if ('WebSocket' in window) {
                        websocket = new WebSocket(url);
                    } else {
                        alert("当前浏览器不支持websocket服务，请换个浏览器");
                    }
                    initEventHandle();
                } catch (e) {
                    console.log("createWebSocket方法catch处理异常");
                    reconnect(url);
                }
            }

            function initEventHandle() {
                websocket.onclose = function (event) {
                    console.log('websocket服务关闭了');
                    /*window.location.reload();*/
                    reconnect(wsUrl);
                };
                websocket.onerror = function (event) {
                    console.log('websocket服务出错了');
                    reconnect(wsUrl);
                };
                websocket.onopen = function (event) {
                    console.log("WebSocket连接成功");
                    //心跳检测重置
                    heartCheck.reset().start();
                    doinit();
                };
                websocket.onmessage = function (event) {
                    console.log("WebSocket收到消息");
                    doWithMsg(event.data);
                    heartCheck.reset().start();
                };

                //初始化请求数据
                function doinit() {
                    console.log("doinit方法");
                    let ledsender = {
                        type: 8,
                        content: 0
                    };
                    websocket.send(JSON.stringify(ledsender));
                    console.log("初始化请求发送卡数据完成");
                    let ledinitdata = {
                        type: 36,
                        content: 0
                    };
                    websocket.send(JSON.stringify(ledinitdata));
                    console.log("初始化请求所有数据完成");
                }

                //收到消息处理消息
                function doWithMsg(msg) {
                    count++;
                    console.log("第" + count + "次收到数据");
                    //如果获取到消息，心跳检测重置，拿到任何消息都说明当前连接是正常的
                    console.log("msg收到的原始数据:" + msg);


                    try {
                        let respJsonScreenObj = JSON.parse(msg);
                        console.log("respJsonScreenObj收到的原始数据转成对象" + respJsonScreenObj);
                        let type;
                        type = respJsonScreenObj.type;
                        console.log("respJsonScreenObj.type:" + type);
                        console.log("respJsonScreenObj.respContent:" + respJsonScreenObj.respContent);
                        switch (type) {
                            //亮度
                            case   7:
                                _self.value1 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //发送卡状态
                            case  8:
                                let senderstatuslistobj = JSON.parse(respJsonScreenObj.respContent);
                                console.log("senderstatuslistobj" + senderstatuslistobj);
                                _self.senderstatuslist = senderstatuslistobj;
                                if (_self.senderstatuslist.length > 0) {
                                    _self.senderid = "1";
                                }
                                console.log("_self.senderstatuslist" + _self.senderstatuslist);
                                break;

                            //响应设置发送卡色温
                            case   11:
                                _self.value3 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应设置发送卡灰度增益
                            case   12:
                                _self.value9 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应设置发送卡灰度基准值调整
                            case   13:
                                _self.value7 = parseInt(respJsonScreenObj.respContent) / 2;
                                break;

                            //色度
                            case   14:
                                _self.value4 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //色相
                            case   15:
                                _self.value2 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应设置发送卡增强器调整
                            case   16:
                                _self.value8 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //gama
                            case   17:
                                let receivegama = parseInt(respJsonScreenObj.respContent);
                                if (receivegama === 100 || receivegama === 101 || receivegama === 102) {
                                    _self.status1 = true;
                                    this.hdrmodevalue = receivegama;
                                } else {
                                    _self.status1 = false;
                                    this.gmvalue = receivegama;
                                }
                                break;

                            //分辨率
                            case   18:
                                _self.fblvalue = respJsonScreenObj.respContent;
                                break;

                            //输入源 分辨率 刷新率
                            case   19:
                                let inputsourceObj = JSON.parse(respJsonScreenObj.respContent);
                                _self.radio = inputsourceObj.iNPUTSOURCE;
                                if (_self.radio === "HDMI") {
                                    $("#hdmitext").text(inputsourceObj.iNPUTSOURCE + " " + inputsourceObj.iNSRC_RSLT + " " + inputsourceObj.iNSRC_FRE);
                                    $("#hdmitext").addClass("checkspan");
                                } else if (_self.radio === "DVI-D") {
                                    $("#dvitext").text(inputsourceObj.iNPUTSOURCE + " " + inputsourceObj.iNSRC_RSLT + " " + inputsourceObj.iNSRC_FRE);
                                    $("#dvitext").addClass("checkspan");
                                } else if (_self.radio === "SDI") {
                                    $("#sditext").text(inputsourceObj.iNPUTSOURCE + " " + inputsourceObj.iNSRC_RSLT + " " + inputsourceObj.iNSRC_FRE);
                                    $("#sditext").addClass("checkspan");
                                } else {
                                    console.log("未识别到输入源");
                                }
                                _self.fblvalue = inputsourceObj.iNSRC_RSLT;
                                break;

                            //hdr开关
                            case   20:
                                if (respJsonScreenObj.respContent === "1") {
                                    _self.status1 = true;
                                    $("#bitnum").html("20位");
                                    $("#hdradjust").attr('style', 'display: block;');
                                    $("#input1").attr('style', 'display: none;');
                                    $("#input2").attr('style', 'display: block;');
                                } else {
                                    _self.status1 = false;
                                    $("#bitnum").html("16位");
                                    $("#hdradjust").attr('style', 'display: none;');
                                    $("#input2").attr('style', 'display: none;');
                                    $("#input1").attr('style', 'display: block;');
                                }
                                break;

                            //hdr滑块亮度设置
                            case   21:
                                _self.value5 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应设置色域功能选择 0: OFF (Default)   1: Wide   2:reserve
                            case   22:
                                _self.cgvalue = respJsonScreenObj.respContent;
                                break;

                            //响应设置色域功能关闭时的最大亮度设置
                            case   23:
                                _self.value6 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应设置色域功能未关闭时的最大亮度设置
                            case   24:
                                _self.value10 = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应自动亮度设置功能的ON/OFF
                            case   25:
                                if (respJsonScreenObj.respContent === "1") {
                                    _self.status3 = true;
                                    $(".minbright").attr('style', 'display: block;');
                                    $(".maxbright").attr('style', 'display: block;');
                                    $("#clockinput").attr('style', 'display: block;');
                                } else {
                                    _self.status3 = false;
                                    $(".minbright").attr('style', 'display: none;');
                                    $(".maxbright").attr('style', 'display: none;');
                                    $("#clockinput").attr('style', 'display: none;');
                                }
                                break;

                            //响应自动亮度控制开启时的最大亮度设置 1 - 100
                            case   26:
                                _self.brightmaxnum = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应自动亮度控制开启时的最小亮度设置 1 - 100
                            case   27:
                                _self.brightminnum = parseInt(respJsonScreenObj.respContent);
                                break;

                            //响应设置自动亮度控制（ABC）更新时间。1 - 120
                            case   28:
                                _self.clockvalue = respJsonScreenObj.respContent;
                                break;

                            //响应设置输入信号的冻结操作。0: FREEZE Off    1: FREEZE On
                            case   29:
                                if (respJsonScreenObj.respContent === "1") {
                                    _self.status2 = false;
                                } else {
                                    _self.status2 = true;
                                }
                                break;

                            //响应设置箱体连接顺序显示的ON/OFF
                            case   30:
                                if (respJsonScreenObj.respContent === "1") {
                                    _self.status4 = true;
                                } else {
                                    _self.status4 = false;
                                }
                                recChangeColor();
                                break;

                            //响应将每种RGB颜色设置为显示ON/OFF RGBE 1,0,1,1
                            case   31:
                                let rgbObj = JSON.parse(respJsonScreenObj.respContent);
                                if (rgbObj.red === "1") {
                                    _self.status5 = true;
                                } else {
                                    _self.status5 = false;
                                }
                                if (rgbObj.green === "1") {
                                    _self.status6 = true;
                                } else {
                                    _self.status6 = false;
                                }
                                if (rgbObj.blue === "1") {
                                    _self.status7 = true;
                                } else {
                                    _self.status7 = false;
                                }
                                recChangeRedColor();
                                recChangeGreenColor();
                                recChangeBlueColor();
                                break;

                            //响应视频输出开/关设置。0: Display ON (Default)   1: Display OFF
                            case   32:
                                if (respJsonScreenObj.respContent === "0") {
                                    _self.status8 = true;
                                } else {
                                    _self.status8 = false;
                                }
                                recChangergbColor();
                                break;

                            //响应在没有输入信号时设置操作（箱体）0: Black(default)   1: Last image
                            case   33:
                                _self.snsgvalue = respJsonScreenObj.respContent;
                                break;

                            //响应箱体的测试图案
                            case   34:
                                let colorvalueObj = JSON.parse(respJsonScreenObj.respContent);
                                _self.hexhighvalue = colorvalueObj.hexhigh;
                                _self.colorvalue = colorvalueObj.hexlow;
                                changecolorvalue();
                                break;

                            //响应内置输出的测试图案 0: Off (default) 1: Color bar (Horizontal) 2: Color bar (Vertical) 3: Horizontal direction 10 step gray scale 4: Vertical direction 10 step gray scale 5: Cross hatch6: Luminance 100% 7: Luminance 50%
                            case   35:
                                _self.colorvalue = respJsonScreenObj.respContent;
                                break;

                            //响应同步信号值
                            case 38:
                                _self.syncvalue = respJsonScreenObj.respContent;
                                break;

                            //心跳
                            case   99:
                                let pongObj = respJsonScreenObj.respContent;
                                console.log("客户端收到心跳:" + pongObj);
                                break;

                            //监控
                            case 100:
                                screenCount++;
                                console.log("第" + screenCount + "次收到监控数据");
                                let jsonScreenObj = JSON.parse(respJsonScreenObj.respContent);
                                console.log("jsonScreenObj监控对象" + jsonScreenObj);
                                console.log("respJsonScreenObj.respContent监控数据" + respJsonScreenObj.respContent);
                                _self.comlist = jsonScreenObj.COMLIST;
                                console.log("_self.comlist", _self.comlist);
                                console.log("_self.comlist", _self.comlist.length);
                                _self.destination = jsonScreenObj.DESTINATION;
                                _self.source = jsonScreenObj.SOURCE;
                                let ledlist = _self.comlist;
                                let i;
                                _self.port_ordernum = 0;
                                _self.sender_boxusednum = 0;
                                _self.sender_boxtotalnum = 0;
                                for (i in ledlist) {
                                    let recurworktime = ledlist[i].LEDPARAS.CURRENT_WORKTIME;
                                    formatSeconds(recurworktime);
                                    let rectalworktime = ledlist[i].LEDPARAS.TOTAL_WORKTIME;
                                    formatSeconds1(rectalworktime);
                                    _self.senderlist = ledlist[i].LEDPARAS.SENDER_ORDER;
                                    /*if (screenCount===1&&_self.senderlist.length > 0) {
                                        _self.sendercardid = "1";
                                    }*/
                                    onChangeSenderCard(_self.sendercardid);
                                    let j;
                                    for (j in _self.senderlist) {
                                        if (_self.senderlist[j].STATUS === "1") {
                                            if (_self.senderlist[j].SENDER_BOXUSED === "" || typeof (_self.senderlist[j].SENDER_BOXUSED) === "undefined") {
                                                _self.senderlist[j].SENDER_BOXUSED = "0";
                                            }
                                            if (_self.senderlist[j].SENDER_BOXTOTAL === "" || typeof (_self.senderlist[j].SENDER_BOXTOTAL) === "undefined") {
                                                _self.senderlist[j].SENDER_BOXTOTAL = "0";
                                            }
                                            _self.sender_boxusednum += parseInt(_self.senderlist[j].SENDER_BOXUSED);
                                            _self.sender_boxtotalnum += parseInt(_self.senderlist[j].SENDER_BOXTOTAL);
                                        }
                                        let portorderlist = _self.senderlist[j].PORT_ORDER;
                                        let t;
                                        for (t in portorderlist) {
                                            let boxlist = portorderlist[t].BOX;
                                            if (boxlist[0].BOX_STATE !== "0") {
                                                _self.port_ordernum += 1;
                                                console.log("_self.port_ordernum:" + _self.port_ordernum);
                                            }
                                        }
                                        /*for (t in portorderlist) {
                                            let boxlist = portorderlist[t].BOX;
                                            let k;
                                            for(k in boxlist){
                                                if (boxlist[k].BOX_STATE !== "0") {
                                                    _self.port_ordernum += 1;
                                                    console.log("_self.port_ordernum:" + _self.port_ordernum);
                                                    break;
                                                }
                                            }
                                        }*/
                                    }
                                }
                                console.log("comlist：", _self.comlist);
                                console.log("destination：", _self.destination);
                                console.log("source：", _self.source);
                                console.log("ledlist：", ledlist);
                                console.log("_self.bright：", _self.bright);
                                let nowdt = new Date();
                                console.log("现在接收完成监控数据时间为" + nowdt.toLocaleTimeString());
                                break;

                            case 101:
                                _self.responsemsg = respJsonScreenObj.respContent;
                                console.log("101:" + _self.responsemsg);
                                break;

                            case 102:
                                _self.responsemsg = respJsonScreenObj.respContent;
                                console.log("102:" + _self.responsemsg);
                                break;

                            default:
                                console.log("数据异常");
                        }
                    } catch (e) {
                        /* heartCheck.reset();*/
                        console.log("onmessage异常" + e);
                    }


                    let option0 = {
                        tooltip: {
                            formatter: function (param) {
                                if (param.seriesName === '亮度等级') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.bright;
                                } else if (param.seriesName === '伽马') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.gamma;
                                } else if (param.seriesName === '色温') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.chroma + 'k';
                                } else if (param.seriesName === '色相') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.hue;
                                } else if (param.seriesName === '色度') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.colc;
                                } else if (param.seriesName === '灰度增益') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.conc;
                                } else if (param.seriesName === '灰度基准值') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.brtc / 2;
                                } else if (param.seriesName === '增强器调整') {
                                    return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.cenh;
                                } else {
                                    return "";
                                }
                            },
                        },

                        series: [{
                            type: 'liquidFill',
                            name: '亮度等级',
                            radius: '20%',
                            color: ['#195ba6'],
                            center: ['30%', '15%'],
                            data: [1],
                            backgroundStyle: {
                                borderWidth: 2,
                                borderColor: '#1789fb',
                                color: '#1c233f',
                            },
                            outline: {
                                itemStyle: {
                                    borderWidth: 5,
                                    borderColor: '#1789fb',
                                    borderType: 'dashed',
                                }
                            },
                            label: {
                                normal: { //此处没有生效，本地生效 1
                                    formatter: function (param) {
                                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.bright;
                                    },
                                    textStyle: {
                                        fontSize: 10,
                                        color: '#e6e6e6',
                                    },
                                },
                            },
                        },
                            {
                                type: 'liquidFill',
                                name: '伽马',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['70%', '15%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { //此处没有生效，本地生效 4
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.gamma;
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },
                            },
                            {

                                type: 'liquidFill',
                                name: '色温',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['30%', '35%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { // 同上 3
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.chroma + 'k';
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },

                            },

                            {

                                type: 'liquidFill',
                                name: '色相',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['70%', '35%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { // 同上 6
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.hue;
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },

                            },

                            {
                                type: 'liquidFill',
                                name: '色度',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['30%', '55%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { // 同上 3
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.colc;
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },

                            },
                            {
                                type: 'liquidFill',
                                name: '灰度增益',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['70%', '55%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { //此处没有生效，本地生效 1
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.conc;
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },
                            },

                            {
                                type: 'liquidFill',
                                name: '灰度基准值',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['30%', '75%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { //此处没有生效，本地生效 1
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.brtc / 2;
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },
                            },

                            {
                                type: 'liquidFill',
                                name: '增强器调整',
                                radius: '20%',
                                color: ['#195ba6'],
                                center: ['70%', '75%'],
                                data: [1],
                                backgroundStyle: {
                                    borderWidth: 2,
                                    borderColor: '#1789fb',
                                    color: '#1c233f',
                                },
                                outline: {
                                    itemStyle: {
                                        borderWidth: 5,
                                        borderColor: '#1789fb',
                                        borderType: 'dashed',
                                    }
                                },
                                label: {
                                    normal: { //此处没有生效，本地生效 1
                                        formatter: function (param) {
                                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.cenh;
                                        },
                                        textStyle: {
                                            fontSize: 10,
                                            color: '#e6e6e6',
                                        },
                                    },
                                },
                            }
                        ]
                    };
                    //获取dom容器
                    let myChart0 = echarts.init(document.getElementById('chartmain0'));
                    // 使用刚指定的配置项和数据显示图表。
                    myChart0.setOption(option0);


                    // 基于准备好的dom，初始化echarts实例
                    let myChart = echarts.init(document.getElementById('tuopu'));


                    /*alert("_self.senderstatuslist"+_self.senderstatuslist);
                alert("this.senderstatuslist"+this.senderstatuslist);*/
                //判断发送卡长度遍历并推入数据
                    if(_self.senderstatuslist.length>0){
                        _self.senderItem = [];
                        //循环接收到的发送卡数量
                        for (let s = 0; s < _self.senderstatuslist.length; s++) {
                            let getSender = _self.senderstatuslist[s];
                            let disabled = true;
                            if (getSender.STATUS === '1') {
                                disabled = false;
                            } else {
                                disabled = true;
                            }
                            if (_self.senderItem.length === 0) {
                                let sender = {
                                    id: getSender.ORDER + "",
                                    value: getSender.ORDER + "",
                                    label: getSender.HOSTIP + "",
                                    disabled: disabled
                                };
                                _self.senderItem.push(sender);
                            } else {
                                //新发送卡
                                let sender = null;
                                //循环本地发送卡列表
                                for (let a = 0; a < _self.senderItem.length; a++) {
                                    //防止死循环保险，当本地发送卡长度等于传来的发送卡长度时跳出循环
                                    /*if(_self.senderItem.length === _self.senderstatuslist.length){
                                        break;
                                    }*/
                                    //判断是否有相同的发送卡有的时候跳过本次循环继续循环，没有的时候赋值推入数组
                                    if (_self.senderItem[a].id === getSender.ORDER + "") {
                                        continue;
                                    } else {
                                        sender = {
                                            id: getSender.ORDER + "",
                                            value: getSender.ORDER + "",
                                            label: getSender.HOSTIP + "",
                                            disabled: disabled
                                        };
                                    }
                                }
                                //推入本地发送卡
                                _self.senderItem.push(sender);
                            }
                        }
                        if (_self.singleSender === null) {
                            _self.singleSender = _self.senderItem[0].value;
                        }
                        if (_self.editableTabs[_self.editableTabsValue - 1].contextbody.senderItem[0].name === 'sender1') {
                            _self.editableTabs[_self.editableTabsValue - 1].contextbody.senderItem[0].name = _self.senderItem[0].value;
                        }
                        if (senderIndex === null) {
                            senderIndex = 0;
                        }
                    }

                    //数据拆分
                    var ledParasJson = "";
                    var senderOrderList = [];

                    //发送卡初始X值
                    var XInitSender = 200;

                    //发送卡初始Y值
                    var YInitSender = 830;

                    //网口初始X值-X轴上单个偏移差值为60一个单位(向右+60)
                    var XInitPort = 250;
                    //网口初始Y值-Y轴上单个偏移差值为70一个单位（向下-70）
                    var YInitPort = 910;
                    //网口最大总数量
                    var MaxPort = 16;

                    //X轴上单个偏移差值为60一个单位(向右+60)----箱体（同网口）
                    var XInit = [560, 630, 700, 770, 840, 910, 980, 1050];
                    //Y轴上单个偏移差值为140一个单位(向下-140)----箱体
                    var YInit = [810, 690, 570, 450, 330, 210, 90, -30];
                    //获取当前网址，如： http://localhost:8083/uimcardprj/share/meun.jsp
                    var curWwwPath = window.document.location.href;
                    //获取主机地址之后的目录，如： uimcardprj/share/meun.jsp
                    var pathName = window.document.location.pathname;
                    var pos = curWwwPath.indexOf(pathName);
                    //获取主机地址，如： http://localhost:8083
                    var localhostPaht = curWwwPath.substring(0, pos);
                    //获取带"/"的项目名，如：/uimcardprj
                    var projectName = pathName.substring(0, pathName.substr(1).indexOf('/') + 1);

                    //矢量图形组
                    var nodes = [{
                        x: 0,
                        y: 530,
                        nodeName: '控制卡',
                        name: '控制卡',
                        type: '播放器',
                        detail: "OK",
                        // svgPath: 'M868.48 104.96H155.52a32 32 0 0 0-32 32v538.24a32 32 0 0 0 32 32h712.96a32 32 0 0 0 32-32V136.96a32 32 0 0 0-32-32z m-32 64V390.4H187.52V168.96zM187.52 643.2V422.4h648.96v221.44z M252.8 232.96h32v74.88h-32zM334.72 232.96h32v74.88h-32zM252.8 502.4h32v74.88h-32zM334.72 502.4h32v74.88h-32zM868.48 853.12H600.96a94.72 94.72 0 0 0-56.96-56.96v-53.76h-64v53.76a94.72 94.72 0 0 0-56.96 56.96H155.52a32 32 0 1 0 0 64h267.52a94.08 94.08 0 0 0 177.92 0h267.52a32 32 0 0 0 0-64zM512 915.84a30.72 30.72 0 1 1 30.72-30.72 30.72 30.72 0 0 1-30.72 30.72z',
                        svgPath: 'image://' + localhostPaht + '/images/player.png',
                        symbolSize: 100,

                    }
                    ]
                    //连接线数组
                    var links = [];
                    //走线方式数组
                    var portGroup = [];
                    //已使用网口数组
                    let usedPort = [];

                    //请求后台参数
                    for (let i = 0; i < _self.comlist.length; i++) {
                        //获取屏幕对象
                        ledParasJson = _self.comlist[i].LEDPARAS;
                        //外围参数拓展显示
                        // console.log(ledParasJson);
                        //通用接收卡对象
                        var recParas = ledParasJson.COMMON_RECPARAS;
                        //通用模组对象
                        var modParas = ledParasJson.COMMON_MODPARAS;
                        if (typeof (modParas.MOD_RSLT) == "undefined") {
                            $('#MOD_RSL').text("未检测到");
                        } else {
                            $('#MOD_RSL').text(modParas.MOD_RSLT);
                        }

                        if (typeof (modParas.MOD_SPACE) == "undefined") {
                            $('#MOD_SPACE').text("未检测到");
                        } else {
                            $('#MOD_SPACE').text(modParas.MOD_SPACE + "MM");
                        }

                        if (typeof (modParas.SCAN_NUM) == "undefined") {
                            $('#MOD_SCAN_NUM').text("未检测到");
                        } else {
                            $('#MOD_SCAN_NUM').text(modParas.SCAN_NUM + "SCAN");
                        }

                        //接收卡名称
                        if (typeof (recParas.REC_TYPE) == "undefined") {
                            $('#rec_Type').text("暂无数据");
                        } else {
                            $('#rec_Type').text(recParas.REC_TYPE);
                        }

                        if (typeof (recParas.BOX_NAME) == "undefined") {
                            $('#productTitle').text("未检测到");
                        } else {
                            //箱体类型
                            $('#productTitle').text(recParas.BOX_NAME);
                        }

                        if (typeof (recParas.MOD_ORDER) == "undefined") {
                            $('#MOD_ORDER').text("未检测到");
                        } else {
                            //模组个数
                            $('#MOD_ORDER').text(recParas.MOD_ORDER);
                        }

                        if (typeof (modParas.MOD_SIZE) == "undefined") {
                            $('#REC_Carrying_Area').text("未检测到");
                        } else {
                            //接收卡带载面积计算：
                            var Mod_Area_Group = modParas.MOD_SIZE.split("*");
                            for (var s = 0; s < Mod_Area_Group.length; s++) {
                                Mod_Area_Group[s] = Mod_Area_Group[s].replace(/[^0-9]/ig, "");
                            }
                            //接收卡带载面积：
                            $('#REC_Carrying_Area').text(parseInt((Mod_Area_Group[0] * Mod_Area_Group[1] * recParas.MODULE_CNT) / 10000) + "mm²");
                        }

                        // if(typeof (modParas.ICSYLE) == "undefined" ){
                        //     $('#ICSYLE').text("未检测到");
                        // }else{
                        //     //驱动IC
                        //     $('#ICSYLE').text(modParas.ICSYLE);
                        // }
                        //判断发送卡列表是否存在
                        if (typeof (ledParasJson.SENDER_ORDER) === "undefined") {
                            continue;
                        }

                        //发送卡数组
                        senderOrderList = ledParasJson.SENDER_ORDER;

                        //丢弃发送卡的值
                        let abandon = 0;
                        //遍历发送卡列表可知发送卡数量
                        for (let i = 0; i < senderOrderList.length; i++) {

                            //判断网口列表是否存在
                            if (typeof (senderOrderList[i].PORT_ORDER) === "undefined") {
                                abandon++;
                                continue;
                            }
                            //实际坐标的值
                            senderSum = i - abandon;


                            //判断发送卡连接是否有问题----有时候发送卡断电显示
                            let senderConnecting = true;

                            //该发送卡箱体总数
                            let totalBox = 0;

                            //箱体报警总数
                            let fault_num = 0;
                            //当前发送卡信息
                            let senderOrder = senderOrderList[i];
                            if(typeof (senderOrder.ID) === "undefined"){
                                senderOrder.ID = senderOrder.IPADDR;
                            }
                            //发送卡信息
                            var sender = {
                                x: XInitSender,
                                y: YInitSender - senderSum * 300,
                                symbolSize: [80, 50],
                                nodeName: senderOrder.ID,
                                name: senderOrder.ID,
                                type: '发送卡',
                                detail: 'ok',
                                // svgPath: 'M 0 265.6 v 448 h 192 v 64 h 128 v -64 h 384 v 64 h 128 v -64 h 192 v -448 H 0 Z m 960 384 H 64 v -320 h 896 v 320 Z m -64 -256 h -256 v 192 h 256 v -192 Z m -64 128 h -128 v -64 h 128 v 64 Z m -640 -64 H 128 v -64 h 64 v 64 Z m 128 0 H 256 v -64 h 64 v 64 Z m 128 0 h -64 v -64 h 64 v 64 Z m -256 128 H 128 v -64 h 64 v 64 Z m 128 0 H 256 v -64 h 64 v 64 Z m 128 0 h -64 v -64 h 64 v 64 Z m 128 -128 h -64 v -64 h 64 v 64 Z m 0 128 h -64 v -64 h 64 v 64 Z'
                                svgPath: 'image://' + localhostPaht + '/images/senderReal.png'
                            }
                            //矢量图形新增
                            nodes.push(sender);
                            //获取走线端口数量
                            let portNum = senderOrder.PORT_ORDER.length;

                            //已用网口的数组
                            let usePort = [];
                            //遍历走线接口
                            for (var j = 0; j < portNum; j++) {

                                //走线详情信息
                                var port = senderOrder.PORT_ORDER[j];

                                //遍历端口显示----默认发送卡有16个端口
                                for (let initPort = 1; initPort < 17; initPort++) {
                                    let portName = "P" + initPort;
                                    //已使用网口
                                    if (portName === port.ID) {
                                        //新增网线+发送卡归属关系
                                        var hiddenLine = {
                                            source: senderOrder.ID,
                                            target: port.ID + senderOrder.ID,
                                            name: '连通',
                                            type: 0,
                                            nodeName: '主网线'
                                        }
                                        links.push(hiddenLine);
                                        let singlePort = null;
                                        //判断索引是否能够取余4来判断在当前X轴的Y位置
                                        if ((initPort) % 4 === 0) {
                                            //当前port对象
                                            singlePort = {
                                                //X轴上单个偏移差值为60一个单位(向右+60)
                                                x: XInitPort + parseInt((initPort) / 4 - 1) * 42,
                                                //Y轴上单个偏移差值为70一个单位（向下-70）
                                                y: YInitPort - 3 * 50 - senderSum * 300,
                                                symbolSize: 20,
                                                nodeName: port.ID,
                                                name: port.ID + senderOrder.ID,
                                                type: '网口',
                                                detail: null,
                                                svgPath: 'path://M509.92 176C325.504 176 176 325.504 176 509.92c0 184.416 149.504 333.92 333.92 333.92 184.416 0 333.92-149.504 333.92-333.92C843.84 325.504 694.32 176 509.92 176z m0 48c157.904 0 285.92 128 285.92 285.92 0 157.904-128.016 285.92-285.92 285.92C352 795.84 224 667.808 224 509.92 224 352 352 224 509.92 224z m0 96C405.024 320 320 405.024 320 509.92c0 104.88 85.024 189.92 189.92 189.92 104.88 0 189.92-85.04 189.92-189.92 0-104.896-85.04-189.92-189.92-189.92z',
                                            };
                                        } else {
                                            console.log("当前索引" + initPort);
                                            singlePort = {
                                                //X轴上单个偏移差值为60一个单位(向右+60)
                                                x: XInitPort + parseInt((initPort) / 4) * 42,
                                                //Y轴上单个偏移差值为70一个单位（向下-70）
                                                y: YInitPort - (initPort - 1) % 4 * 50 - senderSum * 300,
                                                symbolSize: 20,
                                                nodeName: port.ID,
                                                name: port.ID + senderOrder.ID,
                                                type: '网口',
                                                detail: null,
                                                svgPath: 'path://M509.92 176C325.504 176 176 325.504 176 509.92c0 184.416 149.504 333.92 333.92 333.92 184.416 0 333.92-149.504 333.92-333.92C843.84 325.504 694.32 176 509.92 176z m0 48c157.904 0 285.92 128 285.92 285.92 0 157.904-128.016 285.92-285.92 285.92C352 795.84 224 667.808 224 509.92 224 352 352 224 509.92 224z m0 96C405.024 320 320 405.024 320 509.92c0 104.88 85.024 189.92 189.92 189.92 104.88 0 189.92-85.04 189.92-189.92 0-104.896-85.04-189.92-189.92-189.92z',
                                            };
                                        }
                                        //走线方式数组添加
                                        nodes.push(singlePort);
                                        usePort.push(portName);
                                    }
                                }


                                /**
                                 * 筛选箱体--重组箱体模型--将Box.order = 1按顺序往下排
                                 *
                                 * */
                                //外层循环，控制趟数，每一次找到一个最大值
                                for (let i = 0; i < port.BOX.length - 1; i++) {
                                    // 内层循环,控制比较的次数，并且判断两个数的大小
                                    for (let j = 0; j < port.BOX.length - 1 - i; j++) {
                                        let ops = parseInt(port.BOX[j].ORDER);
                                        let rit = parseInt(port.BOX[j + 1].ORDER);
                                        // 如果前面的数大，放到后面(当然是从小到大的冒泡排序)
                                        if (ops > rit) {
                                            let temp = port.BOX[j];
                                            port.BOX[j] = port.BOX[j + 1];
                                            port.BOX[j + 1] = temp;
                                        }
                                    }

                                }
                                //遍历单个走线口的箱体信息
                                totalBox = totalBox + port.BOX.length;
                                for (var boxindex = 0; boxindex < port.BOX.length; boxindex++) {

                                    var box = port.BOX[boxindex];

                                    //新增归属关系
                                    var hiddenLine = {
                                        source: senderOrder.ID,
                                        target: senderOrder.ID + box.ID + boxindex,
                                        name: '连通',
                                        type: 0,
                                        nodeName: '主网线'
                                    }
                                    links.push(hiddenLine);

                                    //判断箱体顺序是否为1能和端口直连
                                    if (box.ORDER === '1') {
                                        var box_State;
                                        //判断箱体状态
                                        if (box.BOX_STATE === '1') {
                                            box_State = "连通"
                                        } else if (box.BOX_STATE === '2') {
                                            box_State = "警告"
                                        } else if (box.BOX_STATE === '3') {
                                            box_State = "报警"
                                            fault_num++
                                        } else {
                                            box_State = "无法检测"
                                            fault_num++
                                        }
                                        var portBox = {
                                            source: port.ID + senderOrder.ID,
                                            target: senderOrder.ID + box.ID + boxindex,
                                            name: box_State,
                                            type: '网线',
                                            nodeName: '网线'
                                        }
                                        //端口连接线新增
                                        links.push(portBox);
                                    }

                                    //新增归属关系
                                    var hiddenLineForPort = {
                                        source: port.ID + senderOrder.ID,
                                        target: senderOrder.ID + box.ID + boxindex,
                                        name: '连通',
                                        type: 0,
                                        nodeName: '主网线'
                                    }
                                    links.push(hiddenLineForPort);
                                    //判断小于最后一个箱体之间的相互串联
                                    if (box.ORDER < port.BOX.length) {
                                        var boxNext = port.BOX[boxindex + 1]
                                        //当下个箱体为空时不执行
                                        if (boxindex + 1 < port.BOX.length) {
                                            var box_State;
                                            //判断箱体状态
                                            if (boxNext.BOX_STATE === '1') {
                                                box_State = "连通"
                                            } else if (boxNext.BOX_STATE === '2') {
                                                box_State = "警告"
                                            } else if (boxNext.BOX_STATE === '3') {
                                                box_State = "报警"
                                                fault_num++
                                            } else {
                                                box_State = "无法检测"
                                                fault_num++
                                            }
                                            var portBox = {
                                                source: senderOrder.ID + box.ID + boxindex,
                                                target: senderOrder.ID + boxNext.ID + (boxindex + 1),
                                                name: box_State,
                                                type: '串联',
                                                nodeName: '串联'
                                            }
                                            links.push(portBox);
                                        }
                                    }
                                    //单个箱体的信息
                                    var singleBox = {
                                        x: XInit[box.XPOS - 1],
                                        y: YInit[box.YPOS - 1],
                                        symbolSize: 70,
                                        nodeName: "箱体" + box.XPOS + "-" + box.YPOS,
                                        name: senderOrder.ID + box.ID + boxindex,
                                        type: '箱体',
                                        detail: box,
                                        svgPath: 'M651.636364 1024V558.545455h558.545454v465.454545z '
                                    }
                                    nodes.push(singleBox);
                                }

                            }


                            //遍历未连接的端口显示----默认发送卡有16个端口
                            for (var unPortNumIndex = 1; unPortNumIndex < 17; unPortNumIndex++) {
                                let portName = "P" + unPortNumIndex;

                                if ($.inArray(portName, usePort) === -1) {
                                    //新增归属关系
                                    var hiddenLine = {
                                        source: senderOrder.ID,
                                        target: portName + senderOrder.ID,
                                        name: '连通',
                                        type: 0,
                                        nodeName: '主网线'
                                    }
                                    links.push(hiddenLine);
                                    //判断索引是否能够取余4来判断在当前X轴的Y位置
                                    if ((unPortNumIndex) % 4 === 0) {
                                        //当前port对象
                                        var singlePort = {
                                            //X轴上单个偏移差值为60一个单位(向右+60)
                                            x: XInitPort + parseInt((unPortNumIndex) / 4 - 1) * 42,
                                            //Y轴上单个偏移差值为70一个单位（向下-70）
                                            y: YInitPort-3*50-senderSum*300,
                                            symbolSize: 20,
                                            nodeName: "P" + unPortNumIndex,
                                            name: portName + senderOrder.ID,
                                            type: '未连接网口',
                                            detail: null,
                                            svgPath: 'M509.92 176C325.504 176 176 325.504 176 509.92c0 184.416 149.504 333.92 333.92 333.92 184.416 0 333.92-149.504 333.92-333.92C843.84 325.504 694.32 176 509.92 176z m0 48c157.904 0 285.92 128 285.92 285.92 0 157.904-128.016 285.92-285.92 285.92C352 795.84 224 667.808 224 509.92 224 352 352 224 509.92 224z m0 96C405.024 320 320 405.024 320 509.92c0 104.88 85.024 189.92 189.92 189.92 104.88 0 189.92-85.04 189.92-189.92 0-104.896-85.04-189.92-189.92-189.92z',
                                        };
                                        //走线方式数组添加
                                        nodes.push(singlePort);
                                    } else {
                                        var singlePort = {
                                            //X轴上单个偏移差值为60一个单位(向右+60)
                                            x: XInitPort + parseInt((unPortNumIndex) / 4) * 42,
                                            //Y轴上单个偏移差值为70一个单位（向下-70）
                                            y: YInitPort-(unPortNumIndex-1)%4*50-senderSum*300,
                                            symbolSize: 20,
                                            nodeName: "P" + unPortNumIndex,
                                            name: portName + senderOrder.ID,
                                            type: '未连接网口',
                                            detail: null,
                                            svgPath: 'M509.92 176C325.504 176 176 325.504 176 509.92c0 184.416 149.504 333.92 333.92 333.92 184.416 0 333.92-149.504 333.92-333.92C843.84 325.504 694.32 176 509.92 176z m0 48c157.904 0 285.92 128 285.92 285.92 0 157.904-128.016 285.92-285.92 285.92C352 795.84 224 667.808 224 509.92 224 352 352 224 509.92 224z m0 96C405.024 320 320 405.024 320 509.92c0 104.88 85.024 189.92 189.92 189.92 104.88 0 189.92-85.04 189.92-189.92 0-104.896-85.04-189.92-189.92-189.92z',
                                        };
                                        //走线方式数组添加
                                        nodes.push(singlePort);

                                    }
                                }
                            }

                            if (totalBox === fault_num) {
                                senderConnecting = false
                            }


                            if (senderConnecting === true) {
                                //新增拓扑连接线
                                var lineSender = {
                                    source: '控制卡',
                                    target: senderOrder.ID,
                                    name: '连通',
                                    type: '网线',
                                    nodeName: '主网线'
                                }
                                //连接线新增
                                links.push(lineSender);
                            } else {
                                //新增拓扑连接线
                                var lineSender = {
                                    source: '控制卡',
                                    target: senderOrder.ID,
                                    name: '无法检测',
                                    type: '网线',
                                    nodeName: '主网线'
                                }
                                //连接线新增
                                links.push(lineSender);
                            }
                        }

                    }


                    //判断更新发送卡字段是否为空
                    if (typeof (senderstatuslist) != "undefined") {
                        //遍历该数组的发送卡
                        for (var senderListIndex = 0; senderListIndex < senderstatuslist.length; senderListIndex++) {
                            //判断发送卡的状态是否离线
                            if (senderstatuslist[senderListIndex].status !== "1") {
                                for (var i = 0; i < nodes.length; i++) {
                                    if (nodes[i].type === '发送卡') {
                                        if (nodes[i].nodeName === senderstatuslist[senderListIndex].senderId) {
                                            nodes[i].detail = 'uncheck'
                                        }
                                    }
                                }
                                for (var s = 0; s < links.length; s++) {
                                    if (links[s].target === senderstatuslist[senderListIndex].senderId) {
                                        links[s].name = "无法检测";
                                    }
                                    //当原设备是有问题发送卡
                                    if (links[s].source === senderstatuslist[senderListIndex].senderId) {

                                        for (var ok = 0; ok < links.length; ok++) {
                                            //有问题网口
                                            if (links[s].target === links[ok].source) {
                                                links[ok].name = "无法检测";
                                                //有问题的直连箱体
                                                for (var rts = 0; rts < links.length; rts++) {
                                                    if (links[ok].target === links[rts].source) {
                                                        links[rts].name = "无法检测";
                                                    }
                                                }
                                            }
                                        }
                                    }

                                }
                            }
                        }
                    }

                    // data = jQuery.parseJSON(data);
                    // dataType指明了返回数据为json类型，故不需要再反序列化
                    //拓扑图形实现
                    var charts = {
                        //拓扑模块
                        nodes: [],
                        //目标连接线
                        links: [],
                        //连通线
                        linesData: [],
                        //无法检测线
                        unchecklinesData: [],
                        //警告线
                        warninglinesData: [],
                        //报警线
                        faultlinesData: []
                    }


                    var dataMap = new Map();
                    //遍历SVG图形
                    for (var j = 0; j < nodes.length; j++) {
                        const {
                            x,
                            y,
                            nodeName,
                            name,
                            type,
                            detail,
                            svgPath,
                            symbolSize
                        } = nodes[j];
                        if (type === '箱体') {
                            var BoxColor;
                            var BoxEmColor;
                            //判断箱体状态
                            if (detail === 'uncheck') {
                                BoxColor = '#595857'
                                BoxEmColor = '#e9e4d4'
                            } else if (detail.BOX_STATE === '1') {
                                BoxColor = '#043c58'
                                BoxEmColor = '#1D5D76'
                            } else if (detail.BOX_STATE === '2') {
                                BoxColor = 'orange'
                                BoxEmColor = '#ffec47'
                            } else if (detail.BOX_STATE === '3') {
                                BoxColor = '#a73836'
                                BoxEmColor = '#b94047'
                            } else {
                                BoxColor = '#595857'
                                BoxEmColor = '#e9e4d4'
                            }
                            var node = {
                                nodeName,
                                name,
                                type,
                                detail,
                                value: [x, y],
                                symbolSize: symbolSize || 50,
                                symbol: 'path://' + svgPath,
                                label: {
                                    position: ['9%', '42%'],
                                    fontSize: 20
                                },
                                itemStyle: {
                                    borderColor: 'rgba(147, 235, 248, 1)',
                                    borderWidth: 3,
                                    color: BoxColor,
                                    emphasis: {
                                        color: BoxEmColor
                                    },
                                }
                            }
                            dataMap.set(nodes[j].name, [x, y])
                            charts.nodes.push(node)
                        } else if (type === '未连接网口') {
                            var node = {
                                nodeName,
                                name,
                                type,
                                detail,
                                value: [x, y],
                                symbolSize: symbolSize || 50,
                                symbol: 'path://' + svgPath,
                                itemStyle: {
                                    color: '#75878a',
                                    emphasis: {
                                        color: '#808080'
                                    },
                                }
                            }
                            dataMap.set(nodes[j].name, [x, y])
                            charts.nodes.push(node)
                        } else {
                            var node = {
                                nodeName,
                                name,
                                type,
                                detail,
                                value: [x, y],
                                symbolSize: symbolSize || 50,
                                symbol: svgPath,
                                itemStyle: {
                                    color: '#468efd',
                                    emphasis: {
                                        color: '#7ca9ee'
                                    },
                                }
                            }
                            dataMap.set(nodes[j].name, [x, y])
                            charts.nodes.push(node)
                        }
                    }
                    //判断网口的索引是否大于4
                    var sopindex = 1;
                    //遍历目标连接线
                    for (var i = 0; i < links.length; i++) {
                        var link;
                        if (links[i].type === 0) {
                            link = {
                                source: links[i].source,
                                target: links[i].target,
                                type: '',
                                nodeName: '',
                                label: {
                                    show: false
                                },
                                lineStyle: {
                                    width: 0, // 线宽是0
                                    color: 'rgba(0, 0, 0, 0)' // 线的颜色是透明的
                                },
                            }
                            charts.links.push(link);
                        } else {

                            var lineColor;
                            var lines;
                            // 组装动态移动的效果数据
                            //拐角线的重组
                            if (links[i].nodeName === "网线") {
                                var SourceX = dataMap.get(links[i].source)[0];
                                var SourceY = dataMap.get(links[i].source)[1];
                                var TategerX = dataMap.get(links[i].target)[0];
                                //当目标Y值小于YInit[4]，该箱体已经在第五组
                                var TategerY = dataMap.get(links[i].target)[1];
                                //第一个点--在网口出来的位置
                                var Source0;
                                //第二个点--在网口上方的位置
                                var Source;
                                //第三个点--在箱体上方的位置
                                var Target;
                                //当源坐标Y坐标等于第一行时
                                if (SourceY > YInitPort - 151) {

                                    //当目标Y坐标小于Y轴第三个屏体的Y坐标
                                    if(TategerY === YInit[2] || TategerY === YInit[1] ||TategerY === YInit[3]){
                                        Source0 = [SourceX+sopindex*7,SourceY]
                                        Source = [SourceX+sopindex*7,TategerY-sopindex*20-65]
                                        Target = [TategerX,TategerY-sopindex*20-65]
                                    }
                                    //当目标Y坐标小于Y轴第四个屏体的Y坐标
                                    else if(TategerY < YInit[3]){
                                        Source0 = [SourceX+sopindex*7,SourceY]
                                        Source = [SourceX-sopindex*21,SourceY-sopindex*20+88]
                                        Target = [TategerX,SourceY-sopindex*20+88]
                                        //当目标Y坐标小于Y轴第二个屏体的Y坐标
                                    }else{
                                        Source0 = [SourceX+sopindex*7,SourceY]
                                        Source = [SourceX+sopindex*7,SourceY+sopindex*30+36]
                                        Target = [TategerX,SourceY+sopindex*30+36]
                                    }

                                }
                                //数据处于第二行发送卡
                                else if (SourceY < YInitPort - 299 && SourceY > YInitPort - 451) {
                                    //当目标Y坐标小于Y轴第三个屏体的Y坐标
                                    if (TategerY < YInit[2] && TategerY > YInit[4]) {
                                        Source0 = [SourceX + sopindex * 7, SourceY]
                                        Source = [SourceX + sopindex * 7, TategerY - sopindex * 20 - 65]
                                        Target = [TategerX, TategerY - sopindex * 20 - 65]
                                    }
                                    //当目标Y坐标小于Y轴第四个屏体的Y坐标
                                    else if (TategerY < YInit[3]) {
                                        Source0 = [SourceX + sopindex * 7, SourceY]
                                        Source = [SourceX - sopindex * 21, SourceY - sopindex * 20 + 88]
                                        Target = [TategerX, SourceY - sopindex * 20 + 88]
                                    }
                                    //当目标Y坐标大于Y轴第二个屏体的Y坐标
                                    else if (TategerY > YInit[1]) {
                                        Source0 = [SourceX + sopindex * 7, SourceY]
                                        Source = [SourceX + sopindex * 7, SourceY + sopindex * 20 + 248]
                                        Target = [TategerX, SourceY + sopindex * 20 + 248]
                                    } else {
                                        Source0 = [SourceX + sopindex * 7, SourceY]
                                        Source = [SourceX + sopindex * 7, SourceY + sopindex * 20 + 46]
                                        Target = [TategerX, SourceY + sopindex * 20 + 46]
                                    }
                                } else {
                                    Source0 = [SourceX + sopindex * 7, SourceY]
                                    Source = [SourceX + sopindex * 7, TategerY + sopindex * 20 + 46]
                                    Target = [TategerX, TategerY + sopindex * 20 + 46]
                                }
                                lines = {
                                    coords: [
                                        dataMap.get(links[i].source),
                                        Source0,
                                        Source,
                                        Target,
                                        dataMap.get(links[i].target)
                                    ],
                                    type: links[i].type,
                                    nodeName: links[i].nodeName,
                                };
                                sopindex++;
                                if (sopindex > 4) {
                                    sopindex = 1;
                                }
                            } else if (links[i].nodeName === "主网线") {
                                var SourceX = dataMap.get(links[i].source)[0];
                                var SourceY = dataMap.get(links[i].source)[1];
                                var TategerX = dataMap.get(links[i].target)[0];
                                var TategerY = dataMap.get(links[i].target)[1];

                                if (SourceY === TategerY) {
                                    lines = {
                                        coords: [
                                            dataMap.get(links[i].source),
                                            dataMap.get(links[i].target)
                                        ],
                                        type: links[i].type,
                                        nodeName: links[i].nodeName,
                                    };
                                } else {
                                    var center = [SourceX, TategerY];
                                    lines = {
                                        coords: [
                                            dataMap.get(links[i].source),
                                            center,
                                            dataMap.get(links[i].target)
                                        ],
                                        type: links[i].type,
                                        nodeName: links[i].nodeName,
                                    };
                                }

                            } else {
                                lines = {
                                    coords: [
                                        dataMap.get(links[i].source),
                                        dataMap.get(links[i].target)
                                    ],
                                    type: links[i].type,
                                    nodeName: links[i].nodeName,
                                };
                            }

                            if (links[i].name === '连通') {
                                charts.linesData.push(lines);
                                lineColor = '#7CFC00';
                            } else if (links[i].name === '警告') {
                                charts.warninglinesData.push(lines);
                                lineColor = '#FFFF00';
                            } else if (links[i].name === '报警') {
                                charts.faultlinesData.push(lines);
                                lineColor = '#FF0000';
                            } else {
                                charts.unchecklinesData.push(lines);
                                lineColor = '#a1afc9';
                            }
                            var lineSize = 2;
                            if (links[i].type === '串联') {
                                lineSize = 6;
                            }
                            link = {
                                source: links[i].source,
                                target: links[i].target,
                                type: links[i].type,
                                nodeName: links[i].nodeName,
                                label: {
                                    normal: {
                                        show: false,
                                    },
                                    emphasis: {
                                        symbolSize: 8,
                                        fontSize: 38,
                                        color: 'red',
                                        show: true,
                                        formatter: links[i].name
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineSize,
                                        curveness: 0.15,
                                        symbolSize: lineSize,
                                        color: lineColor
                                    },
                                    emphasis: {
                                        symbolSize: lineSize,
                                        type: 'solid',
                                        color: lineColor
                                    }
                                },
                            }
                        }
                    }

                    option = {
                        legend: {
                            data: ['连通', '无法检测', '警告', '报警'],
                            icon: "circle",
                            textStyle: {
                                fontSize: 25,
                                fontWeight: "lighter"
                            }
                        },
                        //提示框显示
                        tooltip: {
                            //显示延迟
                            showDelay: 100,
                            backgroundColor: '#1F2D3D',
                            borderColor: '#324057',
                            borderRadius: 4,           // 提示边框圆角，单位px，默认为4
                            borderWidth: 1,            // 提示边框线宽，单位px，默认为0（无边框）
                            padding: 5,                // 提示内边距，单位px，默认各方向内边距为5，
                            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                                type: 'line',         // 默认为直线，可选为：'line' | 'shadow'
                                lineStyle: {          // 直线指示器样式设置
                                    color: '#48b',
                                    width: 2,
                                    type: 'solid'
                                },
                                shadowStyle: {                       // 阴影指示器样式设置
                                    width: 'auto',                   // 阴影大小
                                    color: '#475669'  // 阴影颜色
                                }
                            },
                            //动画变换延迟单位：s
                            transitionDuration: 0.8,
                            // formatter: '设备类型:{b}<br />序列号:<br />'
                            formatter: function (item) {
                                if (item.data.type === '箱体') {
                                    var box_State;
                                    //判断箱体状态
                                    if (item.data.detail === 'uncheck') {
                                        box_State = "无法检测"
                                    } else if (item.data.detail.BOX_STATE === '1') {
                                        box_State = "连通"
                                    } else if (item.data.detail.BOX_STATE === '2') {
                                        box_State = "警告"
                                    } else if (item.data.detail.BOX_STATE === '3') {
                                        box_State = "报警"
                                    } else {
                                        box_State = "无法检测"
                                    }
                                    return '设备类型:<b style="color: green;">&nbsp;&nbsp;' + item.data.type + '</b><hr />' +
                                        '设备ID:<b style="color: green;">&nbsp;&nbsp;' + item.data.nodeName + '</b><hr />' +
                                        '箱体坐标(X-Y)：<b style="color: green;">' + item.data.detail.XPOS + '-' + item.data.detail.YPOS + '</b><hr />' +
                                        '工作状态：<b style="color: green;">' + box_State + '</b><hr />';
                                } else if (item.data.type === '串联') {
                                    return '';
                                } else {
                                    return '设备类型:<b style="color: green;">&nbsp;&nbsp;' + item.data.type + '</b><hr />' +
                                        '设备ID:<b style="color: green;">&nbsp;&nbsp;' + item.data.nodeName + '</b><hr />';
                                }
                            }
                        },
                        // backgroundColor: "#0B1321",
                        xAxis: {
                            min: 0,
                            max: 1000,
                            show: false,
                            type: 'value'
                        },
                        yAxis: {
                            min: 0,
                            max: 1000,
                            show: false,
                            type: 'value'
                        },
                        series: [{
                            type: 'graph',
                            coordinateSystem: 'cartesian2d',
                            focusNodeAdjacency: true, // 鼠标移到节点上突出显示节点以及节点的边和邻接节点
                            edgeSymbol: ['circle', 'arrow'],
                            edgeSymbolSize: [4, 10],
                            label: {
                                show: true,
                                position: 'bottom',
                                color: '#ffffff',
                                formatter: function (item) {
                                    return item.data.nodeName
                                }
                            },
                            data: charts.nodes,
                            links: charts.links
                        },
                            //连通效果
                            {
                                name: '连通',
                                type: 'lines',
                                zlevel: 2,
                                step: "start",
                                polyline: true,
                                coordinateSystem: 'cartesian2d',
                                effect: {
                                    //移动速率
                                    period: 6,
                                    show: true,
                                    trailLength: 0.1,
                                    symbol: 'arrow',
                                    color: '#0c8918',
                                    symbolSize: 10
                                },
                                lineStyle: {
                                    type: 'solid',
                                    width: 2,
                                    color: '#7CFC00',
                                    curveness: 0.9

                                },
                                data: charts.linesData
                            },
                            //无法检测效果
                            {
                                name: '无法检测',
                                type: 'lines',
                                zlevel: 2,
                                step: "start",
                                polyline: true,
                                coordinateSystem: 'cartesian2d',
                                effect: {
                                    period: 20,
                                    show: true,
                                    trailLength: 0.1,
                                    symbol: 'path://M547.4 512l278.2-278.2c9.8-9.8 9.8-25.6 0-35.4-9.8-9.8-25.6-9.8-35.4 0L512 476.6 233.8 198.4c-9.8-9.8-25.6-9.8-35.4 0-9.8 9.8-9.8 25.6 0 35.4L476.6 512 198.4 790.2c-9.8 9.8-9.8 25.6 0 35.4 4.9 4.9 11.3 7.3 17.7 7.3s12.8-2.4 17.7-7.3L512 547.4l278.2 278.2c4.9 4.9 11.3 7.3 17.7 7.3s12.8-2.4 17.7-7.3c9.8-9.8 9.8-25.6 0-35.4L547.4 512z',
                                    color: 'red',
                                    symbolSize: 20
                                },
                                lineStyle: {
                                    type: 'solid',
                                    width: 2,
                                    color: '#595857',
                                    curveness: 0.1

                                },
                                data: charts.unchecklinesData
                            },
                            //警告效果
                            {
                                name: '警告',
                                type: 'lines',
                                zlevel: 2,
                                step: "start",
                                polyline: true,
                                coordinateSystem: 'cartesian2d',
                                effect: {
                                    period: 40,
                                    show: true,
                                    trailLength: 0.1,
                                    symbol: 'path://M743.316211 54.649263l487.154526 797.157053A113.178947 113.178947 0 0 1 1133.891368 1024H159.528421A113.178947 113.178947 0 0 1 63.056842 851.806316l487.208421-797.103158A113.178947 113.178947 0 0 1 737.28 45.810526l6.036211 8.838737z m395.15621 853.369263l-487.154526-797.103158-0.754527-1.077894-1.024-0.754527a5.389474 5.389474 0 0 0-7.383579 1.778527l-487.154526 797.103158a5.389474 5.389474 0 0 0 4.581053 8.245894H1133.945263a5.389474 5.389474 0 0 0 4.581053-8.192z M646.736842 323.368421a75.290947 75.290947 0 0 1 75.075369 80.626526l-17.354106 242.903579a57.882947 57.882947 0 0 1-115.442526 0l-17.354105-242.903579A75.290947 75.290947 0 0 1 646.736842 323.368421z M646.736842 808.421053m-53.894737 0a53.894737 53.894737 0 1 0 107.789474 0 53.894737 53.894737 0 1 0-107.789474 0Z',
                                    color: '#faff72',
                                    symbolSize: 40
                                },
                                lineStyle: {
                                    type: 'solid',
                                    width: 2,
                                    color: 'orange',
                                    curveness: 0.1

                                },
                                data: charts.warninglinesData
                            },
                            //报警效果
                            {
                                name: '报警',
                                type: 'lines',
                                zlevel: 2,
                                step: "start",
                                polyline: true,
                                coordinateSystem: 'cartesian2d',
                                effect: {
                                    period: 60,
                                    show: true,
                                    trailLength: 0.1,
                                    symbol: 'arrow',
                                    color: 'red',
                                    symbolSize: 10
                                },
                                lineStyle: {
                                    type: 'solid',
                                    width: 2,
                                    color: '#a73836',
                                    curveness: 0.1

                                },
                                data: charts.faultlinesData
                            },
                        ]
                    };

                    // 使用刚指定的配置项和数据显示图表。
                    myChart.setOption(option);
                    // 处理点击事件并且弹出数据名称-params传入的参数
                    myChart.on('click', function (params) {
                        if (params.data.type === '箱体') {
                            //箱体参数赋值
                            var detail = params.data.detail;
                            info_title = detail;
                            //维修日志赋值

                            if (typeof (detail.REC) != "undefined" && detail.REC.length > 0) {
                                //接收卡信息
                                var rec = info_title.REC[0];
                                // console.log(rec);
                                //传感器赋值
                                if (typeof (rec.SENSOR_VOL) == "undefined") {
                                    $('#SENSOR_VOL').attr('style','color:#E9E7E7;');
                                    $('#SENSOR_VOL').text("暂无数据");
                                } else {
                                    let sensorVol = parseFloat(rec.SENSOR_VOL);
                                    //警告
                                    <!-- 生产环境版本 -->
                                    // if(sensorVol>3.6 && sensorVol <4.0){
                                    //     $("#SENSOR_VOL").removeAttr("style");
                                    //     $('#SENSOR_VOL').attr('style','color:#FFD700;');
                                    //     $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V 电压警告");
                                    //     //警告
                                    // }else if(sensorVol>5.5 && sensorVol <6.0){
                                    //     $("#SENSOR_VOL").removeAttr("style");
                                    //     $('#SENSOR_VOL').attr('style','color:#FFD700;');
                                    //     $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V 电压警告");
                                    //     //报警
                                    // }else if(sensorVol < 3.6){
                                    //     $("#SENSOR_VOL").removeAttr("style");
                                    //     $('#SENSOR_VOL').attr('style','color:#DC143C;');
                                    //     $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V 电压报警");
                                    //     //报警
                                    // }else if(sensorVol > 6.0){
                                    //     $("#SENSOR_VOL").removeAttr("style");
                                    //     $('#SENSOR_VOL').attr('style','color:#DC143C;');
                                    //     $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V 电压报警");
                                    // }else{
                                    //     $("#SENSOR_VOL").removeAttr("style");
                                    //     $('#SENSOR_VOL').attr('style','color:#E9E7E7;');
                                    //     $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V");
                                    // }
                                    <!-- 调试版本 -->
                                    //报警
                                    if(sensorVol>4.17 && sensorVol <4.20){
                                        $("#SENSOR_VOL").removeAttr("style");
                                        $('#SENSOR_VOL').attr('style','color:#DC143C;');
                                        $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V 电压报警");
                                        //警告
                                    }else if(sensorVol < 4.17) {
                                        $("#SENSOR_VOL").removeAttr("style");
                                        $('#SENSOR_VOL').attr('style', 'color:#FFD700;');
                                        $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V 电压警告");
                                    }else{
                                        $("#SENSOR_VOL").removeAttr("style");
                                        $('#SENSOR_VOL').attr('style','color:#E9E7E7;');
                                        $('#SENSOR_VOL').text(rec.SENSOR_VOL + "V");
                                    }
                                }
                                if (typeof (rec.SENSOR_CURRENT) == "undefined") {
                                    $('#SENSOR_CURRENT').text("暂无数据");
                                } else {
                                    $('#SENSOR_CURRENT').text(rec.SENSOR_CURRENT + "A");
                                }
                                if (typeof (rec.SENSOR_HUMI) == "undefined") {
                                    $('#SENSOR_HUMI').attr('style','color:#E9E7E7;');
                                    $('#SENSOR_HUMI').text("暂无数据");
                                } else {
                                    let sensorHumi = parseFloat(rec.SENSOR_HUMI);
                                    //警告
                                    if(sensorHumi>70.9 && sensorHumi <81.0){
                                        $("#SENSOR_HUMI").removeAttr("style");
                                        $('#SENSOR_HUMI').attr('style','color:#FFD700;');
                                        $('#SENSOR_HUMI').text(rec.SENSOR_HUMI + "%RH 湿度警告");
                                        //报警
                                    }else if(sensorHumi > 80.9){
                                        $("#SENSOR_HUMI").removeAttr("style");
                                        $('#SENSOR_HUMI').attr('style','color:#DC143C;');
                                        $('#SENSOR_HUMI').text(rec.SENSOR_HUMI + "%RH 湿度报警");
                                    }else{
                                        $("#SENSOR_HUMI").removeAttr("style");
                                        $('#SENSOR_HUMI').attr('style','color:#E9E7E7;');
                                        $('#SENSOR_HUMI').text(rec.SENSOR_HUMI + "%RH");
                                    }
                                }
                                if (typeof (rec.SENSOR_TMP) == "undefined") {
                                    $('#SENSOR_TMP').attr('style','color:#E9E7E7;');
                                    $('#SENSOR_TMP').text("暂无数据");
                                } else {
                                    let sensorTmp = parseFloat(rec.SENSOR_TMP);
                                    //警告
                                    if(sensorTmp>60.9 && sensorTmp <80.0){
                                        $("#SENSOR_TMP").removeAttr("style");
                                        $('#SENSOR_TMP').attr('style','color:#FFD700;');
                                        $('#SENSOR_TMP').text(rec.SENSOR_TMP + "℃ 温度警告");
                                        //报警
                                    }else if(sensorTmp > 79.9){
                                        $("#SENSOR_TMP").removeAttr("style");
                                        $('#SENSOR_TMP').attr('style','color:#DC143C;');
                                        $('#SENSOR_TMP').text(rec.SENSOR_TMP + "℃ 温度报警");
                                    }else{
                                        $("#SENSOR_TMP").removeAttr("style");
                                        $('#SENSOR_TMP').attr('style','color:#E9E7E7;');
                                        $('#SENSOR_TMP').text(rec.SENSOR_TMP + "℃");
                                    }
                                }
                                //接收卡版本号
                                if (typeof (rec.REC_VER) === "undefined") {
                                    $('#REC_VER').text("暂无数据");
                                } else {
                                    $('#REC_VER').text(rec.REC_VER);
                                }


                                clicked_Box_ModGroup = rec.MOD;
                                //模组信息赋值
                                //遍历模组
                                //通过遍历计算报警模组数量
                                var mod_Normal_count = 0;
                                for (let i = 0; i < rec.MOD.length; i++) {

                                    let sigleMod = rec.MOD[i];

                                    let target = null;
                                    let pos = parseInt(sigleMod.POS);

                                    switch (pos) {
                                        case 1:
                                            target = "module1";
                                            break;
                                        case 2:
                                            target = "module5";
                                            break;
                                        case 3:
                                            target = "module2";
                                            break;
                                        case 4:
                                            target = "module6";
                                            break;
                                        case 5:
                                            target = "module3";
                                            break;
                                        case  6:
                                            target = "module7";
                                            break;
                                        case  7:
                                            target = "module4";
                                            break;
                                        case  8:
                                            target = "module8";
                                            break;
                                    }

                                    if (typeof (sigleMod.ID) != "undefined") {
                                        $('#MOD_ID').text(sigleMod.ID);
                                    } else {
                                        $('#MOD_ID').text("暂无数据");
                                    }

                                    //无法检测-灰色
                                    if (rec.MOD[i].MOD_STATE === "0") {
                                        $('.'+target).attr('style','background: rgba(169,169,169, .9);border-color:#696969;');
                                        //正常
                                    } else if (rec.MOD[i].MOD_STATE === "1") {
                                        mod_Normal_count++;
                                        $('.'+target).attr('style','background: rgba(173,255,47, 0);border-color:black;');
                                        //警告-黄色
                                    } else if (rec.MOD[i].MOD_STATE === "2") {
                                        $('.'+target).attr('style','background: rgba(255,255,0, .5);border-color:#FFD700;');
                                        //报警-红色
                                    } else {
                                        $('.'+target).attr('style','background: rgba(178,34,34, .5);border-color:#FF0000;');hhghg
                                    }
                                }
                                //报警模组数
                                $('#MOD_FAULT').text(rec.MOD.length - mod_Normal_count);
                                //正常模组数
                                $('#MOD_NORMAL').text(mod_Normal_count);

                                if (typeof (rec.MAX_POWER) == "undefined") {
                                    $('#MAX_POWER').text("暂无数据");
                                } else {
                                    //最大功率
                                    $('#MAX_POWER').text(rec.MAX_POWER + "W/m²");
                                }
                                if (typeof (rec.RT_POWERDIS) == "undefined") {
                                    //实际功率
                                    $('#RT_POWERDIS').text("暂无数据");
                                } else {
                                    //实际功率
                                    $('#RT_POWERDIS').text(rec.RT_POWERDIS + "W/m²");
                                }

                                if (typeof (rec.AVE_POWERDIS) == "undefined") {
                                    //平均功率
                                    $('#AVE_POWERDIS').text("暂无数据");
                                } else {
                                    //平均功率
                                    $('#AVE_POWERDIS').text(rec.AVE_POWERDIS + "W/m²");
                                }

                                //接收卡信息赋值
                                //接收卡名称
                                if (typeof (rec.REC_ID) == "undefined") {
                                    $('#rec_Id').text("暂无数据");
                                } else {
                                    $('#rec_Id').text(rec.REC_ID);
                                }

                                //接收卡个数
                                $('#rec_Count').text(detail.REC.length);
                                //接收卡运行时间
                                if (typeof (rec.TOTAL_WORKTIME) == "undefined") {
                                    $('#rec_TOTAL_WORKTIME').text("暂无数据");
                                } else {
                                    $('#rec_TOTAL_WORKTIME').text(rec.TOTAL_WORKTIME + "S");
                                }

                                // 主接收卡  01 主接收卡工作   02 备份接收卡工作
                                if (typeof (detail.REC_MASTER) == "undefined") {
                                    $('#BOX_MASTER').text("暂无数据");
                                } else if (detail.REC_MASTER === '1') {
                                    $('#BOX_MASTER').text('主接收卡工作');
                                } else {
                                    $('#BOX_MASTER').text('备份接收卡工作');
                                }

                                // 网口状态   01 A网口工作   02 B网口工作
                                if (typeof (detail.PORT_MASTER) == "undefined") {
                                    $('#PORT_MASTER').text("暂无数据");
                                } else if (detail.PORT_MASTER === '1') {
                                    $('#PORT_MASTER').text('网口1工作');
                                } else {
                                    $('#PORT_MASTER').text('网口2工作');
                                }

                                // 网口状态   01 A网口工作   02 B网口工作
                                if (typeof (detail.POWER_MASTER) == "undefined") {
                                    $('#POWER_MASTER').text("暂无数据");
                                } else if (detail.PORT_MASTER === '1') {
                                    $('#POWER_MASTER').text('主电源在线');
                                } else if (detail.PORT_MASTER === '2 ') {
                                    $('#POWER_MASTER').text('备份电源在线');
                                } else {
                                    $('#POWER_MASTER').text('主，备电源都在线');
                                }

                            }


                            let BOX_State = params.data.detail.BOX_STATE;

                            if (BOX_State === '1') {

                            } else if (BOX_State === '2') {

                            } else if (BOX_State === '3') {

                            } else {
                                clearPopup("无法检测");
                            }


                            //驱动IC赋值
                            $('#cover').css('display', 'block'); //显示遮罩层
                            $('.container').attr('style', 'visibility: visible').find('.pop-up').attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
                        }
                    });
                }
            }

            //监听窗口关闭事件，当窗口关闭时，主动去关闭WebSocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
            window.onbeforeunload = function () {
                closeWebSocket();
            };

            //关闭WebSocket连接
            function closeWebSocket() {
                websocket.close();
            }

            function reconnect(url) {
                if (lockReconnect) return;
                lockReconnect = true;
                //没连接上会一直重连，设置延迟避免请求过多
                setTimeout(function () {
                    createWebSocket(url);
                    lockReconnect = false;
                }, 2000);
            }

            //心跳检测
            let heartCheck = {
                timeout: 60000,//60秒
                timeoutObj: null,
                serverTimeoutObj: null,
                reset: function () {
                    clearTimeout(this.timeoutObj);
                    clearTimeout(this.serverTimeoutObj);
                    return this;
                },
                start: function () {
                    let self = this;
                    this.timeoutObj = setTimeout(function () {
                        //这里发送一个心跳，后端收到后，返回一个心跳消息，
                        //onmessage拿到返回的心跳就说明连接正常
                        let wsHeartBeat = {
                            type: 99,
                            content: "ping"
                        };
                        websocket.send(JSON.stringify(wsHeartBeat));
                        console.log("客户端发送心跳:ping");
                        //如果超过一定时间还没重置，说明后端主动断开了
                        self.serverTimeoutObj = setTimeout(function () {
                            //如果onclose会执行reconnect，我们执行ws.close()就行了.如果直接执行reconnect 会触发onclose导致重连两次
                            closeWebSocket();
                        }, self.timeout)
                    }, this.timeout)
                }
            };

            //初始化websocket
            createWebSocket(wsUrl);
            websocket.addEventListener('error', function (event) {
                console.log('WebSocket error: ', event);
            });
            websocket.addEventListener('open', function (event) {
                console.log('WebSocket open: ', event);
            });
        },
        methods: {

            xianshi: function (item) {
                if (item === '1') {
                    return '在线';
                } else if (item === '0') {
                    return '离线';
                } else {
                    console.log("发送卡状态未定义或者数据为空");
                }

            },

            onChangeValue1() {
                let ledbright = {
                    type: 7,
                    content: this.value1
                };
                websocket.send(JSON.stringify(ledbright));
            },

            onChangeSyncvalue() {
                let ledsyncvalue = {
                    type: 38,
                    content: this.syncvalue
                };
                websocket.send(JSON.stringify(ledsyncvalue));
            },

            onChangeSnsgvalue() {
                let ledSnsgValue = {
                    type: 33,
                    content: this.snsgvalue
                };
                websocket.send(JSON.stringify(ledSnsgValue));
            },

            onChangeFblvalue() {
                let ledfblvalue = {
                    type: 18,
                    content: this.fblvalue
                };
                websocket.send(JSON.stringify(ledfblvalue));
            },

            onChangeSendervalue() {
                let ledfblvalue = {
                    type: 36,
                    content: this.senderid
                };
                websocket.send(JSON.stringify(ledfblvalue));
            },

            onChangeRadio() {
                if (this.radio === "SDI") {
                    $("#userfbl").text("SDI");
                    this.fbloptions = [{
                        fblvalue: 'Single',
                        label: 'Single'
                    }, {
                        fblvalue: '2-Sample interleave',
                        label: '2-Sample interleave'
                    }, {
                        fblvalue: 'Square division',
                        label: 'Square division'
                    }];
                } else {
                    $("#userfbl").text("分辨率");
                    this.fbloptions = [{
                        fblvalue: '1920*1080',
                        label: '1920*1080'
                    }, {
                        fblvalue: '1280*1024',
                        label: '1280*1024'
                    }, {
                        fblvalue: '2560*1600',
                        label: '2560*1600'
                    }, {
                        fblvalue: '3840*2160',
                        label: '3840*2160'
                    }];
                }
                if (this.radio === "HDMI") {
                    let ledredio = {
                        type: 19,
                        content: 0
                    };
                    websocket.send(JSON.stringify(ledredio));
                } else if (this.radio === "DVI-D") {
                    let ledredio = {
                        type: 19,
                        content: 1
                    };
                    websocket.send(JSON.stringify(ledredio));
                } else if (this.radio === "SDI") {
                    let ledredio = {
                        type: 19,
                        content: 2
                    };
                    websocket.send(JSON.stringify(ledredio));
                } else {
                    alert("设置失败");
                }
            },

            minbrighthandleChange() {
                let ledbrightminvalue = {
                    type: 27,
                    content: this.brightminnum
                };
                websocket.send(JSON.stringify(ledbrightminvalue));
            },

            maxbrighthandleChange() {
                let ledbrightmaxvalue = {
                    type: 26,
                    content: this.brightmaxnum
                };
                websocket.send(JSON.stringify(ledbrightmaxvalue));
            },

            onTestChangeRadio() {
                if (this.radio1 === "内置") {
                    $("#wzjmall").attr('style', 'display: none;');
                    $("#wzjmgrid").attr('style', 'display: none;');
                    $("#wzjmjishu").attr('style', 'display: none;');
                    $("#wzjmodd").attr('style', 'display: none;');
                    let testone = {
                        type: 34,
                        content: {
                            hexhigh: "0",
                            hexlow: "0"
                        }
                    };
                    this.coloroptions = [{
                        colorvalue: '0',
                        label: '关'
                    }, {
                        colorvalue: '1',
                        label: '颜色条(横向)'
                    }, {
                        colorvalue: '2',
                        label: '颜色条(纵向)'
                    }, {
                        colorvalue: '3',
                        label: '10步进(横向)'
                    }, {
                        colorvalue: '4',
                        label: '10步进(纵向)'
                    }, {
                        colorvalue: '5',
                        label: '网格'
                    }, {
                        colorvalue: '6',
                        label: '白100%'
                    }, {
                        colorvalue: '7',
                        label: '白50%'
                    }];
                    websocket.send(JSON.stringify(testone));
                } else {
                    if (this.colorvalue === "0") {
                        $("#wzjmall").attr('style', 'display: none;');
                        $("#wzjmgrid").attr('style', 'display: none;');
                        $("#wzjmjishu").attr('style', 'display: none;');
                        $("#wzjmodd").attr('style', 'display: none;');
                    } else {
                        $("#wzjmall").attr('style', 'display: block;');
                        $("#wzjmgrid").attr('style', 'display: block;');
                        $("#wzjmjishu").attr('style', 'display: block;');
                        $("#wzjmodd").attr('style', 'display: block;');
                    }
                    let testledColorContent = {
                        type: 35,
                        content: 0
                    };
                    websocket.send(JSON.stringify(testledColorContent));

                    this.coloroptions = [{
                        colorvalue: '0',
                        label: '关'
                    }, {
                        colorvalue: '1',
                        label: '红'
                    }, {
                        colorvalue: '2',
                        label: '绿'
                    }, {
                        colorvalue: '3',
                        label: '蓝'
                    }, {
                        colorvalue: '4',
                        label: '洋红'
                    }, {
                        colorvalue: '5',
                        label: '青'
                    }, {
                        colorvalue: '6',
                        label: '橙'
                    }, {
                        colorvalue: '7',
                        label: '白'
                    }, {
                        colorvalue: '8',
                        label: '黑'
                    }, {
                        colorvalue: '9',
                        label: '彩虹色'
                    }, {
                        colorvalue: '10',
                        label: '水平增加'
                    }, {
                        colorvalue: '11',
                        label: '垂直增加'
                    }, {
                        colorvalue: '12',
                        label: '对角线灰度'
                    }, {
                        colorvalue: '13',
                        label: '水平线'
                    }, {
                        colorvalue: '14',
                        label: '垂直线'
                    }, {
                        colorvalue: '15',
                        label: '固定0-63灰度'
                    }
                    ];
                }

            },
            onChangeValue2() {
                let hueContent = {
                    type: 15,
                    content: this.value2
                };
                websocket.send(JSON.stringify(hueContent));
            },

            onChangeValue3() {
                let chromaContent = {
                    type: 11,
                    content: this.value3
                };
                websocket.send(JSON.stringify(chromaContent));
            },

            onChangeValue4() {
                let colorContent = {
                    type: 14,
                    content: this.value4
                };
                websocket.send(JSON.stringify(colorContent));
            },
            onChangeValue6() {
                let gamutOffContent = {
                    type: 23,
                    content: this.value6
                };
                websocket.send(JSON.stringify(gamutOffContent));
            },
            onChangeValue10() {
                let gamutOnContent = {
                    type: 24,
                    content: this.value10
                };
                websocket.send(JSON.stringify(gamutOnContent));
            },
            onChangeValue7() {
                let grayStandardContent = {
                    type: 13,
                    content: this.value7 * 2
                };
                websocket.send(JSON.stringify(grayStandardContent));
            },
            onChangeValue8() {
                let senderPlusContent = {
                    type: 16,
                    content: this.value8
                };
                websocket.send(JSON.stringify(senderPlusContent));
            },
            onChangeValue9() {
                let grayPlusContent = {
                    type: 12,
                    content: this.value9
                };
                websocket.send(JSON.stringify(grayPlusContent));
            },
            swichchange() {
                if (this.status1 === true) {
                    $("#bitnum").html("20位");
                    $("#hdradjust").attr('style', 'display: block;');
                    $("#input2").attr('style', 'display: block;');
                    $("#input1").attr('style', 'display: none;');
                    let hdrswichonContent = {
                        type: 20,
                        content: 1
                    };
                    websocket.send(JSON.stringify(hdrswichonContent));
                } else {
                    $("#bitnum").html("16位");
                    $("#hdradjust").attr('style', 'display: none;');
                    $("#input2").attr('style', 'display: none;');
                    $("#input1").attr('style', 'display: block;');
                    let hdrswichoffContent = {
                        type: 20,
                        content: 0
                    };
                    websocket.send(JSON.stringify(hdrswichoffContent));
                }
            },
            swichchange2() {
                if (this.status2 === false) {
                    let GenlockSwitchOn = {
                        type: 29,
                        content: 1
                    };
                    websocket.send(JSON.stringify(GenlockSwitchOn));
                } else {
                    let GenlockSwitchOff = {
                        type: 29,
                        content: 0
                    };
                    websocket.send(JSON.stringify(GenlockSwitchOff));
                }
            },
            swichchange3() {
                if (this.status3 === true) {
                    $(".minbright").attr('style', 'display: block;');
                    $(".maxbright").attr('style', 'display: block;');
                    $("#clockinput").attr('style', 'display: block;');
                    let ledBrightAuto = {
                        type: 25,
                        content: 1
                    };
                    websocket.send(JSON.stringify(ledBrightAuto));
                } else {
                    $(".minbright").attr('style', 'display: none;');
                    $(".maxbright").attr('style', 'display: none;');
                    $("#clockinput").attr('style', 'display: none;');
                    let ledBrightManual = {
                        type: 25,
                        content: 0
                    };
                    websocket.send(JSON.stringify(ledBrightManual));
                }

            },
            changegmavalue() {
                let gmaContent = {
                    type: 17,
                    content: this.gmvalue
                };
                websocket.send(JSON.stringify(gmaContent));
            },

            changehdrmodevalue() {
                let hdrmodeContent = {
                    type: 17,
                    content: this.hdrmodevalue
                };
                websocket.send(JSON.stringify(hdrmodeContent));
            },

            changecolorvalue1() {
                if (this.radio1 === "内置") {
                    $("#wzjmall").attr('style', 'display: none;');
                    $("#wzjmgrid").attr('style', 'display: none;');
                    $("#wzjmjishu").attr('style', 'display: none;');
                    $("#wzjmodd").attr('style', 'display: none;');
                } else {
                    if (this.colorvalue === "0") {
                        $("#wzjmall").attr('style', 'display: none;');
                        $("#wzjmgrid").attr('style', 'display: none;');
                        $("#wzjmjishu").attr('style', 'display: none;');
                        $("#wzjmodd").attr('style', 'display: none;');
                    } else {
                        $("#wzjmall").attr('style', 'display: block;');
                        $("#wzjmgrid").attr('style', 'display: block;');
                        $("#wzjmjishu").attr('style', 'display: block;');
                        $("#wzjmodd").attr('style', 'display: block;');
                    }
                }
                if (this.radio1 === "内置") {
                    let ledColorContent = {
                        type: 35,
                        content: this.colorvalue
                    };
                    websocket.send(JSON.stringify(ledColorContent));
                } else {
                    let ledColorContent = {
                        type: 34,
                        content: {
                            hexhigh: _self.hexhighvalue,
                            hexlow: _self.colorvalue
                        }
                    };
                    websocket.send(JSON.stringify(ledColorContent));
                }
            },

            onChangeClockvalue() {
                let ledClockValue = {
                    type: 28,
                    content: this.clockvalue
                };
                websocket.send(JSON.stringify(ledClockValue));
            },
            onChangeCgvalue() {
                let ledGamutValue = {
                    type: 22,
                    content: this.cgvalue
                };
                websocket.send(JSON.stringify(ledGamutValue));
            },

            onChangeValue5() {
                let hdrContent = {
                    type: 21,
                    content: this.value5
                };
                websocket.send(JSON.stringify(hdrContent));
            },

            onChangedefault() {
                this.value2 = 0;
                this.value4 = 100;
                this.value7 = 0;
                this.value8 = 24;
                this.value9 = 100;

                let dafaulthueContent = {
                    type: 15,
                    content: this.value2
                };
                websocket.send(JSON.stringify(dafaulthueContent));

                let dafaultcolorContent = {
                    type: 14,
                    content: this.value4
                };
                websocket.send(JSON.stringify(dafaultcolorContent));

                let dafaultgrayStandardContent = {
                    type: 13,
                    content: this.value7
                };
                websocket.send(JSON.stringify(dafaultgrayStandardContent));

                let dafaultsenderPlusContent = {
                    type: 16,
                    content: this.value8
                };
                websocket.send(JSON.stringify(dafaultsenderPlusContent));

                let dafaultgrayPlusContent = {
                    type: 12,
                    content: this.value9
                };
                websocket.send(JSON.stringify(dafaultgrayPlusContent));
            },

            /**
             * tab增删方法
             * */
            handleChange_pingti(value) {
                //判断上一次增删按钮改变前的值是否存在
                if (typeof (this.last_pingti_num) != "undefined") {
                    //删屏
                    if (this.last_pingti_num > value) {
                        let targetName = this.tabIndex + "";
                        let tabs = this.editableTabs;
                        let activeName = this.editableTabsValue;
                        if (activeName === targetName) {
                            tabs.forEach((tab, index) => {
                                if (tab.name === targetName) {
                                    let nextTab = tabs[index + 1] || tabs[index - 1];
                                    if (nextTab) {
                                        activeName = nextTab.name;
                                    }
                                }
                            });
                        }
                        this.editableTabsValue = activeName;
                        this.editableTabs = tabs.filter(tab => tab.name !== targetName);
                        this.pingti_num = this.pingti_num--;
                        let nowtabIndex = this.tabIndex - 1;
                        this.tabIndex = nowtabIndex;
                        //绘制所属tab-图形
                        let index = this.editableTabsValue - 1;
                        this.rowNum = this.editableTabs[index].contextbody.row;
                        this.lineNum = this.editableTabs[index].contextbody.line;
                        clearCanvas();
                        draw(this.rowNum, this.lineNum);

                        //箱体选择方法
                        area_port = null;
                        this.port_radio = null;
                        this.backupName = null;
                        $('.chooseBackUpId').css('display', 'none');

                        //发送卡判断方法--涉及全局变量得改变
                        this.ifExistSender(index);
                        //重画连接箱
                        this.drawConnectedAgain(index);
                        //重置网口按钮
                        this.resetPortBtn();
                        //筛选出不用的网口
                        this.makePortDisabled(index);

                        becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);

                        this.pianyinumX = this.editableTabs[index].contextbody.pianyiliangX;
                        this.pianyinumY = this.editableTabs[index].contextbody.pianyiliangY;

                        this.boxtype = this.editableTabs[index].contextbody.boxtype;
                        /**
                         *筛选箱体宽度和箱体高度
                         * */
                        for (let i = 0; i < this.boxItem.length; i++) {
                            if (this.boxItem[i].name === this.boxtype) {
                                let box = this.boxItem[i].box.split('×');
                                this.box_width = box[0];
                                this.box_height = box[1];
                            }
                        }


                        this.clicked_Box = null;
                    } else {
                        //当前屏体数量+1
                        //新的Tab名字序号
                        let newTabName = ++this.tabIndex + '';
                        this.editableTabs.push({
                            title: '屏体 ' + newTabName,
                            name: newTabName,
                            content: '屏体 ' + newTabName,
                            contextbody: {
                                row: 0,
                                line: 0,
                                pianyiliangX: 0,
                                pianyiliangY: 0,
                                boxtype: 'UHPII1.2',
                                senderItem: []
                            }
                        });
                        // this.editableTabsValue = newTabName;
                    }
                } else {
                    //新的Tab名字序号
                    let newTabName = ++this.tabIndex + '';
                    this.editableTabs.push({
                        title: '屏体 ' + newTabName,
                        name: newTabName,
                        content: '屏体 ' + newTabName,
                        contextbody: {
                            row: 0,
                            line: 0,
                            pianyiliangX: 0,
                            pianyiliangY: 0,
                            boxtype: 'UHPII1.2',
                            senderItem: []
                        }
                    });
                    // this.editableTabsValue = newTabName;
                }
                this.last_pingti_num = value;
            },
            /**
             * 增删屏体按钮获取焦点
             * */
            becomeReadOnly() {
                $(".addtab input").attr("readOnly", "true");
            },

            /**
             * tab删除方法
             * */
            removeTab(targetName) {
                let tabs = this.editableTabs;
                let activeName = this.editableTabsValue;
                if (activeName === targetName) {
                    tabs.forEach((tab, index) => {
                        if (tab.name === targetName) {
                            let nextTab = tabs[index + 1] || tabs[index - 1];
                            if (nextTab) {
                                activeName = nextTab.name;
                            }
                        }
                    });
                }
                this.editableTabsValue = activeName;
                this.editableTabs = tabs.filter(tab => tab.name !== targetName);
                this.pingti_num = this.pingti_num--;
                //绘制所属tab-图形
                let index = this.editableTabsValue - 1;
                this.rowNum = this.editableTabs[index].contextbody.row;
                this.lineNum = this.editableTabs[index].contextbody.line;
                clearCanvas();
                draw(this.rowNum, this.lineNum);

                if (senderIndex != null) {
                    becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                }
            },

            /**
             * 偏移量X改变
             * */
            handleChange_pianyiliangX(value) {
                let index = this.editableTabsValue - 1;
                this.editableTabs[index].contextbody.pianyiliangX = value;
            },

            /**
             * 偏移量Y改变
             * */
            handleChange_pianyiliangY(value) {
                let index = this.editableTabsValue - 1;
                this.editableTabs[index].contextbody.pianyiliangY = value;
            },

            /**
             * 接收卡列数计数器改变的方法
             * */
            handleRowChange(value) {
                // if(senderIndex == null){
                //     return false;
                // }else{
                if (value > 10) {
                    let width = value - 10
                    canvasWidth = canvasWidth + 126 * width;
                    canvas.width = canvasWidth;
                    canvas.height = canvasHeight;
                }
                let index = this.editableTabsValue - 1;
                let lastRow = this.editableTabs[index].contextbody.row;
                let lastLine = this.editableTabs[index].contextbody.line;
                let nowIndex = 0;
                if (senderIndex != null) {
                    nowIndex = senderIndex;
                }
                //清空所有接口
                this.editableTabs[index].contextbody.senderItem[nowIndex].port = [];
                this.port_radio = null;
                this.backupName = null;
                area_port = null;
                clearCanvas();
                //判断增减列数
                //当箱体列数减少时 XPOS -
                draw(this.rowNum, this.lineNum);
                this.editableTabs[index].contextbody.row = value;

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[nowIndex].port);

                $('.chooseBackUpId').css('display', 'none');
                // }
            },
            /**
             * 接收卡行数计数器改变的方法
             * */
            handleLineChange(value) {
                // if(senderIndex == null){
                //     return false;
                // }else{
                if (value > 8) {
                    let height = value - 8
                    canvasHeight = canvasHeight + 78 * height;
                    canvas.width = canvasWidth;
                    canvas.height = canvasHeight;
                }
                let nowIndex = 0;
                if (senderIndex != null) {
                    nowIndex = senderIndex;
                }
                //清空所有接口
                let index = this.editableTabsValue - 1;
                let lastRow = this.editableTabs[index].contextbody.row;
                let lastLine = this.editableTabs[index].contextbody.line;

                this.editableTabs[index].contextbody.senderItem[nowIndex].port = [];
                this.port_radio = null;
                this.backupName = null;
                area_port = null;
                clearCanvas();
                //判断增减行数
                //当箱体行数减少时  YPOS -
                draw(this.rowNum, this.lineNum);
                this.editableTabs[index].contextbody.line = value;

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[nowIndex].port);
                // }
                $('.chooseBackUpId').css('display', 'none');
            },

            /**
             *  切换屏体tab转换的方法
             * **/
            senderTabClick(tab, event) {
                let index = this.editableTabsValue - 1;

                this.pianyinumX = this.editableTabs[tab.index].contextbody.pianyiliangX;

                this.pianyinumY = this.editableTabs[tab.index].contextbody.pianyiliangY;

                this.rowNum = this.editableTabs[tab.index].contextbody.row;
                this.lineNum = this.editableTabs[tab.index].contextbody.line;
                clearCanvas();
                draw(this.rowNum, this.lineNum);
                area_port = null;
                this.port_radio = null;
                this.backupName = null;
                $('.chooseBackUpId').css('display', 'none');
                //依次遍历出箱体连接
                //判断发送卡是否为空
                if (this.singleSender != null) {

                    //发送卡判断方法--涉及全局变量得改变
                    this.ifExistSender(tab.index);
                    //重画连接箱
                    this.drawConnectedAgain(tab.index);
                    //重置网口按钮
                    this.resetPortBtn();
                    //筛选出不用的网口
                    this.makePortDisabled(index);

                    becomeUsingPort(this.editableTabs[tab.index].contextbody.senderItem[senderIndex].port);


                }
                this.boxtype = this.editableTabs[tab.index].contextbody.boxtype;
                /**
                 *筛选箱体宽度和箱体高度
                 * */
                for (let i = 0; i < this.boxItem.length; i++) {
                    if (this.boxItem[i].name === this.boxtype) {
                        let box = this.boxItem[i].box.split('×');
                        this.box_width = box[0];
                        this.box_height = box[1];
                    }
                }

                this.clicked_Box = null;

            },

            /**
             * 发送卡改变方法
             * */
            changSender() {
                let index = this.editableTabsValue - 1;
                //遍历当前tab的发送卡列表---判断发送卡列表中是否有该发送卡
                this.ifExistSender(index);
                //重置按钮
                this.resetPortBtn();
                //筛选网口
                this.makePortDisabled(index);
                this.port_radio = null;
                this.backupName = null;
                $('.chooseBackUpId').css('display', 'none');
                //点击箱体为空
                this.clicked_Box = null;

                //按钮变色龙
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);

            },

            /**
             * 筛选出不用的网口
             * */
            makePortDisabled(index) {
                //筛选出不用的网口
                //遍历屏体参数
                for (let i = 0; i < this.editableTabs.length; i++) {
                    //遍历发送卡
                    for (let a = 0; a < this.editableTabs[i].contextbody.senderItem.length; a++) {
                        let sender = this.editableTabs[i].contextbody.senderItem[a];
                        //判断发送卡是当前所选的发送卡时
                        if (sender.name === this.singleSender) {
                            //遍历发送卡网口
                            for (let s = 0; s < sender.port.length; s++) {
                                //遍历箱体
                                if (sender.port[s].box.length > 0) {
                                    //遍历当前页面网口按钮
                                    for (let cont = 0; cont < this.portItem.length; cont++) {
                                        //当有tab页面的port已经推入数据被占用时---当前页面的发送卡网口是否一直--指向所有发送卡的网口
                                        if (sender.port[s].name === this.portItem[cont].name) {
                                            //占用为true
                                            this.portItem[cont].status = true
                                            //当遍历的tab是当前页面时
                                            if (i === index) {
                                                //占用为false
                                                this.portItem[cont].status = false
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },

            /**
             *
             * 发送卡判断方法
             *
             * */
            ifExistSender(index) {
                let senderOrder = null;
                for (let GPA = 0; GPA < this.editableTabs[index].contextbody.senderItem.length; GPA++) {
                    if (this.editableTabs[index].contextbody.senderItem[GPA].name === this.singleSender) {
                        senderOrder = GPA
                    }
                }
                if (senderOrder == null) {
                    this.editableTabs[index].contextbody.senderItem.push(
                        {
                            name: this.singleSender,
                            port: []
                        }
                    )
                    senderIndex = this.editableTabs[index].contextbody.senderItem.length - 1;
                } else {
                    senderIndex = senderOrder;
                }
            },

            /**
             * 重置页面网口按钮
             * */
            resetPortBtn() {
                for (let cont = 0; cont < this.portItem.length; cont++) {
                    this.portItem[cont].status = false
                }
            },

            /**
             * 网口选择
             * */
            choosePort(value) {
                //当前tab索引
                let index = this.editableTabsValue - 1
                //获取当前网口
                area_port = value;

                //判断发送卡是否被选择
                if (this.singleSender == null || this.singleSender === '') {
                    alert("未选择发送卡");
                    this.port_radio = null;
                    area_port = null;
                    return false;
                }
                //遍历数组看是否存在该网口，如若存在则添加到全局网口变量
                let portList = this.editableTabs[index].contextbody.senderItem[senderIndex].port;
                let portCount = 0;
                for (let i = 0; i < portList.length; i++) {
                    if (portList[i].name === area_port) {
                        portCount++;
                    }
                }
                //当网口不存在时新增网口对象
                if (portCount === 0) {
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port.push(
                        {
                            name: area_port,
                            id: '',
                            //source箱体坐标
                            sourcePort: '',
                            //最终箱体坐标
                            lastPort: '',
                            //操作步数
                            step: -1,
                            //操作历史
                            canvasHistory: [],
                            //箱体信息
                            box: []

                        }
                    )
                }
                /**
                 * 更改网口状态
                 * */
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);

                /**
                 *点击的箱体为空
                 * */
                this.clicked_Box = null;

            },

            /**
             * 原点在左上方水平顺序走线方式按钮
             * */
            connetorFirst() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //获取当前页面的ROW和LINE----从左到右然后到终点则往下连接

                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                    //判断拐角--通过行数奇偶数进行判断顺序添加/逆序添加
                    if (lineIndex % 2 === 0) {
                        //从左到右
                        for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex + 1, lineIndex + 1)
                        }
                    } else {
                        //从右到左
                        for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex, lineIndex + 1)
                        }
                    }
                }
            },

            /**
             * 原点在右上方水平逆序走线方式按钮
             * */
            connetorSecond() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                    //判断拐角--通过行数奇偶数进行判断顺序添加/逆序添加
                    if (lineIndex % 2 === 0) {
                        //从右到左
                        for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex, lineIndex + 1)
                        }
                    } else {
                        //从左到右
                        for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex + 1, lineIndex + 1)
                        }
                    }
                }
            },

            /**
             * 原点在左下方竖直逆序走线方式按钮
             * */
            connetorThird() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                    if (rowIndex % 2 === 0) {
                        //从下到上
                        for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex + 1, lineIndex)
                        }
                    } else {
                        //从上到下
                        for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex + 1, lineIndex + 1)
                        }
                    }

                }
            },
            /**
             * 原点在左上方竖直顺序走线方式按钮
             * */
            connetorFouth() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                    if (rowIndex % 2 === 0) {
                        //从上到下
                        for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex + 1, lineIndex + 1)
                        }
                    } else {
                        //从下到上
                        for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                            //已知当前箱体逐个连接
                            createConnectLine(rowIndex + 1, lineIndex)
                        }
                    }

                }
            },
            /**
             * 原点在右下方逆序走线方式按钮
             * */
            connetorFifth() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //获取当前页面的ROW和LINE----从左到右然后到终点则往下连接

                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                if (line % 2 === 0) {
                    for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                        //判断拐角--通过行数奇偶数进行判断顺序添加/逆序添加
                        if (lineIndex % 2 === 0) {
                            //从右到左
                            for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        } else {
                            //从左到右
                            for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex + 1, lineIndex)
                            }
                        }
                    }
                } else {
                    for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                        //判断拐角--通过行数奇偶数进行判断顺序添加/逆序添加
                        if (lineIndex % 2 === 0) {
                            //从左到右
                            for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex + 1, lineIndex)
                            }
                        } else {
                            //从右到左
                            for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        }
                    }
                }
            },
            /**
             * 原点在左下方逆序走线方式按钮
             * */
            connetorSixth() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                if (line % 2 === 0) {
                    for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                        //判断拐角--通过行数奇偶数进行判断顺序添加/逆序添加
                        if (lineIndex % 2 === 0) {
                            //从左到右
                            for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex + 1, lineIndex)
                            }
                        } else {
                            //从右到左
                            for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        }
                    }
                } else {
                    for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                        //判断拐角--通过行数奇偶数进行判断顺序添加/逆序添加
                        if (lineIndex % 2 === 0) {
                            //从右到左
                            for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        } else {
                            //从左到右
                            for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex + 1, lineIndex)
                            }
                        }
                    }
                }
            },
            /**
             * 逆序走线方式按钮
             * */
            connetorSventh() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                if (row % 2 === 0) {
                    for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                        if (rowIndex % 2 === 0) {
                            //从下到上
                            for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        } else {
                            //从上到下
                            for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex + 1)
                            }
                        }

                    }
                } else {
                    for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                        if (rowIndex % 2 === 0) {
                            //从上到下
                            for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex + 1)
                            }
                        } else {
                            //从下到上
                            for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        }
                    }
                }
            },
            /**
             * 逆序走线方式按钮
             * */
            connetorEigth() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;

                if (row % 2 === 0) {
                    for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                        if (rowIndex % 2 === 0) {
                            //从上到下
                            for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex + 1)
                            }
                        } else {
                            //从下到上
                            for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        }
                    }
                } else {
                    for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                        if (rowIndex % 2 === 0) {
                            //从下到上
                            for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex)
                            }
                        } else {
                            //从上到下
                            for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                                //已知当前箱体逐个连接
                                createConnectLine(rowIndex, lineIndex + 1)
                            }
                        }

                    }
                }
            },

            /*
             *筛选可用网口---上一个变量-lastIndex避免重复输出
             * */
            getCanUsePort(index) {
                for (let portIndex = index; portIndex < this.portItem.length; portIndex++) {
                    if (this.portItem[portIndex].status === false) {
                        let result = $.inArray(portIndex, this.usedPortItem);
                        if (result === -1) {
                            return portIndex;
                            return false;
                        }
                    }
                }
                alert("该发送卡无可用网口");
                return false;
            },


            /**
             *向下网口顺序排序走线方式按钮
             */
            connetorNinth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }

                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                //先获取X值即是列数
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();

                //获取列数后逐列新增网口再逐行连线
                for (let rowIndex = 0; rowIndex < row; rowIndex++) {

                    let btnIndex = this.getCanUsePort(rowIndex);
                    if (btnIndex === false) {
                        break;
                    }
                    if (this.portItem.length > btnIndex) {
                        //中间变量
                        this.usedPortItem.push(btnIndex);
                        this.choosePort(this.portItem[btnIndex].name);
                    }
                    //从上到下
                    for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex + 1, lineIndex + 1)
                    }
                }

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },

            /**
             *向下网口逆序排序走线方式按钮
             */
            connetorTenth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                //先获取X值即是列数
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();
                let portGrop = [], atx = null;
                //逆序需要截取数组并且将数组翻转
                for (let s = 0; s < row; s++) {
                    //可用索引
                    let btnIndex = this.getCanUsePort(s);
                    if (btnIndex === false) {
                        break;
                    }
                    atx = this.portItem.slice(btnIndex, btnIndex + 1);
                    portGrop.push(atx[0]);
                    //中间变量
                    this.usedPortItem.push(btnIndex);
                }
                portGrop = portGrop.reverse();
                //获取列数后逐列新增网口再逐行连线
                for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                    if (portGrop.length === rowIndex) {
                        break;
                    }
                    this.choosePort(portGrop[rowIndex].name);
                    //从上到下
                    for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex + 1, lineIndex + 1)
                    }
                }

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },
            /**
             *向右网口顺序排序走线方式按钮
             */
            connetorElventh() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();

                for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                    let btnIndex = this.getCanUsePort(lineIndex);
                    if (btnIndex === false) {
                        break;
                    }
                    if (this.portItem.length > btnIndex) {
                        //中间变量
                        this.usedPortItem.push(btnIndex);
                        this.choosePort(this.portItem[btnIndex].name);
                    } else {
                        alert("该发送卡无可用网口");
                        break;
                        return false;
                    }
                    //从左到右
                    for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex + 1, lineIndex + 1)
                    }
                }

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },
            /**
             *向右网口逆序排序走线方式按钮
             */
            connetorTwelfth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();
                //逆序需要截取数组并且将数组翻转
                let portGrop = [], atx = null;
                for (let s = 0; s < line; s++) {
                    //可用索引
                    let btnIndex = this.getCanUsePort(s);
                    if (btnIndex === false) {
                        break;
                    }
                    atx = this.portItem.slice(btnIndex, btnIndex + 1);
                    portGrop.push(atx[0]);
                    //中间变量
                    this.usedPortItem.push(btnIndex);
                }
                portGrop = portGrop.reverse();
                for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                    if (portGrop.length === lineIndex) {
                        break;
                    }
                    this.choosePort(portGrop[lineIndex].name);
                    //从左到右
                    for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex + 1, lineIndex + 1)
                    }
                }
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },
            /**
             *向左网口顺序排序走线方式按钮
             */
            connetorTirteenth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();

                for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                    let btnIndex = this.getCanUsePort(lineIndex);
                    if (btnIndex === false) {
                        break;
                    }
                    if (this.portItem.length > btnIndex) {
                        //中间变量
                        this.usedPortItem.push(btnIndex);
                        this.choosePort(this.portItem[btnIndex].name);
                    } else {
                        alert("该发送卡无可用网口");
                        break;
                        return false;
                    }
                    //从右到左
                    for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex, lineIndex + 1)
                    }
                }
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },
            /**
             *向左网口逆序排序走线方式按钮
             */
            connetorFourteenth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();
                //逆序需要截取数组并且将数组翻转
                let portGrop = [], atx = null;
                for (let s = 0; s < line; s++) {
                    //可用索引
                    let btnIndex = this.getCanUsePort(s);
                    if (btnIndex === false) {
                        break;
                    }
                    atx = this.portItem.slice(btnIndex, btnIndex + 1);
                    portGrop.push(atx[0]);
                    //中间变量
                    this.usedPortItem.push(btnIndex);
                }
                portGrop = portGrop.reverse();

                for (let lineIndex = 0; lineIndex < line; lineIndex++) {
                    if (portGrop.length === lineIndex) {
                        break;
                    }
                    this.choosePort(portGrop[lineIndex].name);
                    //从右到左
                    for (let rowIndex = row; rowIndex > 0; rowIndex--) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex, lineIndex + 1)
                    }
                }
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },
            /**
             *向上网口顺序排序走线方式按钮
             */
            connetorFifteenth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                //先获取X值即是列数
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();
                //获取列数后逐列新增网口再逐行连线
                for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                    let btnIndex = this.getCanUsePort(rowIndex);
                    if (btnIndex === false) {
                        break;
                    }
                    if (this.portItem.length > btnIndex) {
                        //中间变量
                        this.usedPortItem.push(btnIndex);
                        this.choosePort(this.portItem[btnIndex].name);
                    } else {
                        alert("该发送卡无可用网口");
                        break;
                        return false;
                    }
                    //从下到上
                    for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex + 1, lineIndex)
                    }
                }
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },
            /**
             *向上网口逆序排序走线方式按钮
             */
            connetorSixteenth() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                this.usedPortItem = [];
                //tab索引
                let index = this.editableTabsValue - 1;
                //先获取X值即是列数
                let row = this.editableTabs[index].contextbody.row;
                let line = this.editableTabs[index].contextbody.line;
                this.resetAllPortBtn();
                let portGrop = [], atx = null;
                //逆序需要截取数组并且将数组翻转
                for (let s = 0; s < row; s++) {
                    //可用索引
                    let btnIndex = this.getCanUsePort(s);
                    if (btnIndex === false) {
                        break;
                    }
                    atx = this.portItem.slice(btnIndex, btnIndex + 1);
                    portGrop.push(atx[0]);
                    //中间变量
                    this.usedPortItem.push(btnIndex);
                }
                portGrop = portGrop.reverse();

                //获取列数后逐列新增网口再逐行连线
                for (let rowIndex = 0; rowIndex < row; rowIndex++) {
                    if (portGrop.length === rowIndex) {
                        break;
                    }
                    this.choosePort(portGrop[rowIndex].name);
                    //从下到上
                    for (let lineIndex = line; lineIndex > 0; lineIndex--) {
                        //已知当前箱体逐个连接
                        createConnectLine(rowIndex + 1, lineIndex)
                    }
                }
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
                $('.chooseBackUpId').css('display', 'none');
            },


            /**
             * canvas连接回退操作
             * */
            goBackBtn() {
                if (area_port == null || area_port === '') {
                    alert("未选择网口");
                    return false;
                }
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                //当前tab索引
                let index = this.editableTabsValue - 1;
                /**
                 * canvas绘制数组与现行次数
                 * */
                let canvasHistory, step, portIndex;
                //遍历数组看是否存在该网口，如若存在则添加到局部网口变量
                let portList = this.editableTabs[index].contextbody.senderItem[senderIndex].port
                for (let i = 0; i < portList.length; i++) {
                    if (portList[i].name === area_port) {
                        step = portList[i].step;
                        canvasHistory = portList[i].canvasHistory;
                        portIndex = i;
                    }
                }

                let colorIndex = 0
                for (let ogj = 0; ogj < this.portItem.length; ogj++) {
                    if (this.portItem[ogj].name === portList[portIndex].name) {
                        colorIndex = ogj
                    }
                }


                if (step > 0) {
                    step--;
                    // ctx.clearRect(0, 0, canvasWidth, canvasHeight);
                    // let canvasPic = canvasHistory[step];
                    // ctx.putImageData(canvasPic, 0, 0);
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].step = step;
                    //连线问题解决
                    let deleteBox = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box.pop();
                    let deletexpos = deleteBox.xpos - 1;
                    let deleteypos = deleteBox.ypos - 1;
                    ctx.clearRect(deletexpos * xTox + 8, deleteypos * yToy + 8, xTox, yToy);
                    ctx.font = "10px Arial";
                    //绘制矩形
                    //绘制图形样式
                    ctx.fillStyle = "#CCFFFF";
                    ctx.strokeStyle = "#ffffcc";
                    ctx.lineWidth = 2;
                    ctx.fillRect(xTox * deletexpos + 10, deleteypos * yToy + 10, 126, 78);
                    ctx.strokeRect(xTox * deletexpos + 10, deleteypos * yToy + 10, 126, 78);

                    let boxLength = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box.length;
                    let xpos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box[boxLength - 1].xpos - 1;
                    let ypos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box[boxLength - 1].ypos - 1;
                    if (step > 1) {
                        //清除画布
                        ctx.clearRect(xpos * xTox + 8, ypos * yToy + 8, xTox, yToy);
                        let lastxpos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box[boxLength - 2].xpos - 1;
                        let lastypos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box[boxLength - 2].ypos - 1;
                        drawConnectedBox(xpos, ypos, '#99cccc', portList[portIndex].name, deleteBox.order - 1, 141, 135);
                        drawConnectBoxFont(xpos, ypos, portList[portIndex].name, deleteBox.order - 1, 141, 135);
                        drawArrow(lastxpos * xTox + 70, lastypos * yToy + 51, xpos * xTox + 70, ypos * yToy + 51, connectLineColorGroup[colorIndex]);
                    } else if (step > 0) {
                        //清除画布
                        ctx.clearRect(xpos * xTox + 8, ypos * yToy + 8, xTox, yToy);
                        let lastxpos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].sourcePort.x
                        let lastypos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].sourcePort.y
                        drawConnectedBox(xpos, ypos, '#99cccc', portList[portIndex].name, deleteBox.order - 1, 141, 135);
                        drawConnectBoxFont(xpos, ypos, portList[portIndex].name, deleteBox.order - 1, 141, 135);
                        drawArrow(lastxpos * xTox + 70, lastypos * yToy + 51, xpos * xTox + 70, ypos * yToy + 51, connectLineColorGroup[colorIndex]);
                    } else {
                        //清除画布
                        ctx.clearRect(xpos * xTox + 8, ypos * yToy + 8, xTox, yToy);
                        drawConnectedBox(xpos, ypos, '#99cccc', portList[portIndex].name, deleteBox.order - 1, 141, 135);
                        drawConnectBoxFont(xpos, ypos, portList[portIndex].name, deleteBox.order - 1, 141, 135);
                        drawArc(xpos, ypos, connectLineColorGroup[colorIndex]);
                    }
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].lastPort = {
                        x: xpos,
                        y: ypos
                    }
                } else if (step === 0) {

                    step--;
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].step = step;
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].canvasHistory = [];
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].sourcePort = "";
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].lastPort = "";
                    let xpos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box[0].xpos - 1;
                    let ypos = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box[0].ypos - 1;

                    ctx.clearRect(xpos * xTox + 8, ypos * yToy + 8, xTox, yToy);
                    ctx.font = "10px Arial";
                    //绘制矩形
                    //绘制图形样式
                    ctx.fillStyle = "#CCFFFF";
                    ctx.strokeStyle = "#ffffcc";
                    ctx.lineWidth = 2;
                    ctx.fillRect(xTox * xpos + 10, ypos * yToy + 10, 126, 78);
                    ctx.strokeRect(xTox * xpos + 10, ypos * yToy + 10, 126, 78);
                    //连线问题解决
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box.pop();
                } else {
                    console.log('不能再继续撤销了');
                }
            },
            /**
             *canvas重置操作
             * */
            // resetgoBackBtn(){
            //     if (step < canvasHistory.length - 1) {
            //         step++;
            //         ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            //         let canvasPic = canvasHistory[step];
            //         ctx.putImageData(canvasPic, 0, 0);
            //     } else {
            //         console.log('已经是最新的记录了');
            //     }
            // },
            /**
             *重置所有网口
             * */
            resetAllPortBtn() {
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                }
                //当前tab索引
                let index = this.editableTabsValue - 1;
                this.editableTabs[index].contextbody.senderItem[senderIndex].port = [];
                this.port_radio = null;
                this.backupName = null;
                $('.chooseBackUpId').css('display', 'none');
                area_port = null;
                clearCanvas();
                draw(this.rowNum, this.lineNum);

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
            },
            /**
             * 重置当前网口
             * */
            resetThisPortBtn() {
                //当前tab索引
                let index = this.editableTabsValue - 1;
                if (senderIndex == null) {
                    alert("未选择发送卡");
                    return false;
                } else if (area_port == null) {
                    alert("未选择网口");
                    return false;
                }

                for (let portIndex = 0; portIndex < this.editableTabs[index].contextbody.senderItem[senderIndex].port.length; portIndex++) {
                    if (this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].name === area_port) {
                        this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].canvasHistory = [];
                        this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].box = [];
                        this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].sourcePort = '';
                        this.editableTabs[index].contextbody.senderItem[senderIndex].port[portIndex].lastPort = '';
                    }
                }
                clearCanvas();
                draw(this.rowNum, this.lineNum);
                this.drawConnectedAgain(index);

                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
            },
            /**
             * 选择箱体类型
             * */
            chooseReviceType() {

                let index = this.editableTabsValue - 1;
                this.editableTabs[index].contextbody.boxtype = this.boxtype;

                for (let i = 0; i < this.boxItem.length; i++) {
                    if (this.boxItem[i].name === this.boxtype) {
                        let box = this.boxItem[i].box.split('×');
                        this.box_width = box[0];
                        this.box_height = box[1];
                    }
                }
            },

            /**
             * 当页面改变时重新绘制连接走线封装方法
             * */
            drawConnectedAgain(index) {
                for (let senderIndex = 0; senderIndex < this.editableTabs[index].contextbody.senderItem.length; senderIndex++) {
                    //1.遍历网口
                    for (let portcount = 0; portcount < this.editableTabs[index].contextbody.senderItem[senderIndex].port.length; portcount++) {
                        let port = this.editableTabs[index].contextbody.senderItem[senderIndex].port[portcount];

                        let colorIndex = 0
                        for (let ogj = 0; ogj < this.portItem.length; ogj++) {
                            if (port.name === this.portItem[ogj].name) {
                                colorIndex = ogj
                            }
                        }

                        //2.遍历箱体---找出原点并将原点划入
                        for (let boxcount = 0; boxcount < this.editableTabs[index].contextbody.senderItem[senderIndex].port[portcount].box.length; boxcount++) {
                            //找出原点
                            let box = port.box[boxcount];
                            let x = box.xpos - 1;
                            let y = box.ypos - 1;
                            if (boxcount === 0) {
                                drawConnectedBox(x, y, '#99cccc');
                                drawConnectBoxFont(x, y, port.name, box.order, 141, 135);
                                //绘制箱体源点
                                drawArc(x, y, connectLineColorGroup[colorIndex]);
                            } else {
                                let lastBox = port.box[boxcount - 1];
                                let lastX = lastBox.xpos - 1;
                                let lastY = lastBox.ypos - 1;

                                drawConnectedBox(x, y, '#99cccc', port.name, box.order, 141, 135);
                                drawConnectBoxFont(x, y, port.name, box.order, 141, 135);
                                drawArrow(lastX * xTox + 70, lastY * yToy + 51, x * xTox + 70, y * yToy + 51, connectLineColorGroup[colorIndex]);
                            }
                        }
                    }
                }
            },
            //选取设置备份网口的方法
            optionDbBackup() {
                if (this.pairingChecked === true) {
                    if (senderIndex == null) {
                        alert("未选择发送卡");
                        this.pairingChecked = false;
                        return false;
                    }
                    //判断前八个网口是否配对
                    for(let portItemIndex = 0;portItemIndex < this.portItem.slice(0,8).length;portItemIndex++){
                        if(this.portItem[portItemIndex].backupid === null){
                            for(let asdas = 8;asdas < this.portItem.length;asdas++){
                                if(this.portItem[asdas].backupid === null){
                                    this.portItem[portItemIndex].backupid = this.portItem[asdas].id;
                                    this.portItem[asdas].backupid = this.portItem[portItemIndex].id;
                                    break;
                                }
                            }
                        }
                    }

                    /**
                     *赋值展示网口的方法
                     * */
                    let newList =  JSON.parse(JSON.stringify(this.portItem));
                    this.masterPortItem = newList;
                    for(let s = 0;s<this.masterPortItem.length;s++){
                        let nowMasterPort = this.masterPortItem[s];
                        for(let a = 0;a<this.masterPortItem.length;a++){
                            let singleMasterPort = this.masterPortItem[a];
                            if(nowMasterPort.id === singleMasterPort.backupid){
                                this.masterPortItem.splice(a,1);
                                break;
                            }
                        }
                    }

                    //变换网口排列
                    $('.normalPort').css('display', 'none');
                    $('.abnormalPort').css('display', 'block');
                } else {
                    $('.chooseBackUpId').css('display', 'none');
                    $('.normalPort').css('display', 'block');
                    $('.abnormalPort').css('display', 'none');
                }
                //清除画布上的所有接线
                let index = this.editableTabsValue - 1;
                this.editableTabs[index].contextbody.senderItem[senderIndex].port = [];
                this.port_radio = null;
                this.backupName = null;
                area_port = null;
                clearCanvas();
                draw(this.rowNum, this.lineNum);
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);
            },
            //网口选取值后的方法
            handleCommand(command) {
                //原组合的值
                if (this.backupName === '' || this.backupName === null) {
                    alert("未选择网口值");
                    return false;
                }

                let backupName = this.backupName;
                backupName = backupName.substring(0, backupName.length - 1)
                backupName = backupName.substring(2, backupName.length)
                let group = backupName.split(',')

                if (group [0] === command) {
                    this.backupName = null;
                    alert("不可设置本网口为备用接口");
                    return false;
                }

                //替换目标网口
                for (let a = 0; a < this.portItem.length; a++) {
                    let port = this.portItem[a];
                    if (port.id === group [0] + "") {
                        this.portItem[a].backupid = command + "";
                    }
                }

                for (let r = 0; r < this.portItem.length; r++) {
                    let port = this.portItem[r];
                    if (port.id === command + "") {
                        this.portItem[r].backupid = group [0] + "";
                    }
                }

                let lastId = null;
                //替换原网口
                for (let s = 0; s < this.portItem.length; s++) {
                    let port = this.portItem[s];
                    if (port.backupid === command + "") {
                        if (port.id != group [0] + "") {
                            lastId = this.portItem[s].id
                            this.portItem[s].backupid = group[1] + "";
                        }
                    }
                }

                for (let h = 0; h < this.portItem.length; h++) {
                    let port = this.portItem[h];
                    if (port.id === group[1] + "") {
                        this.portItem[h].backupid = lastId + "";
                    }
                }

                //清除画布上的所有接线
                let index = this.editableTabsValue - 1;
                this.editableTabs[index].contextbody.senderItem[senderIndex].port = [];
                this.port_radio = null;
                this.backupName = null;
                area_port = null;
                clearCanvas();
                draw(this.rowNum, this.lineNum);
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);

                /**
                 *赋值展示网口的方法
                 * */
                let newList =  JSON.parse(JSON.stringify(this.portItem));
                this.masterPortItem = newList;
                for(let s = 0;s<this.masterPortItem.length;s++){
                    let nowMasterPort = this.masterPortItem[s];
                    for(let a = 0;a<this.masterPortItem.length;a++){
                        let singleMasterPort = this.masterPortItem[a];
                        if(nowMasterPort.id === singleMasterPort.backupid){
                            this.masterPortItem.splice(a,1);
                            break;
                        }
                    }
                }

                $('.chooseBackUpId').css('display','none');
            },

            //尝试重写配置网口按钮的下拉随着点击而移动的事件
            changeBackupName() {
                if (this.backupName === null) {
                    return false;
                }
                $('.chooseBackUpId').css('display','block');
                let backupName = this.backupName;
                backupName = backupName.substring(0, backupName.length - 1)
                backupName = backupName.substring(2, backupName.length)
                let group = backupName.split(',')

                //赋值新菜单
                this.backUpPortItem = [];
                for(let portIndex = 0;portIndex < this.portItem.length;portIndex++){
                    if(this.portItem[portIndex].id === group[0]){
                        continue;
                    }else if(this.portItem[portIndex].id === group[1]){
                        continue;
                    }
                    this.backUpPortItem.push(this.portItem[portIndex]);
                }

                //如果已经开启了配对模式 则应当把当前网口遍历出来接而赋值给全局变量
                //当前tab索引
                let index = this.editableTabsValue - 1
                //获取当前网口
                area_port = "P"+group[0];
                //遍历数组看是否存在该网口，如若存在则添加到全局网口变量
                let portList = this.editableTabs[index].contextbody.senderItem[senderIndex].port;
                let portCount = 0;
                for (let i = 0; i < portList.length; i++) {
                    if (portList[i].name === area_port) {
                        portCount++;
                    }
                }

                //当网口不存在时新增网口对象
                if (portCount === 0) {
                    this.editableTabs[index].contextbody.senderItem[senderIndex].port.push(
                        {
                            name: area_port,
                            id: '',
                            //source箱体坐标
                            sourcePort: '',
                            //最终箱体坐标
                            lastPort: '',
                            //操作步数
                            step: -1,
                            //操作历史
                            canvasHistory: [],
                            //箱体信息
                            box: []

                        }
                    )
                }
                /**
                 * 更改网口状态
                 * */
                becomeUsingPort(this.editableTabs[index].contextbody.senderItem[senderIndex].port);

                /**
                 *点击的箱体为空
                 * */
                this.clicked_Box = null;

                let boxId = group[0];
                for(let s = 0;s<this.masterPortItem.length;s++){
                    let nowMasterPort = this.masterPortItem[s];
                    if(nowMasterPort.id === group[0]){
                        boxId = s+1+"";
                    }
                }
                switch (boxId) {
                    case '1':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P1");
                        break;
                    case '2':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P2");
                        break;
                    case '3':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P3");
                        break;
                    case '4':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P4");
                        break;
                    case '5':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P5");
                        break;
                    case '6':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P6");
                        break;
                    case '7':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P7");
                        break;
                    case '8':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P8");
                        break;
                    case '9':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P9");
                        break;
                    case '10':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P10");
                        break;
                    case '11':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P11");
                        break;
                    case '12':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P12");
                        break;
                    case '13':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P13");
                        break;
                    case '14':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P14");
                        break;
                    case '15':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P15");
                        break;
                    case '16':
                        $(".portRow .chooseBackUpId").removeAttr("style");
                        $(".portRow .chooseBackUpId").removeAttr("id");
                        $(".portRow .chooseBackUpId").attr("id", "P16");
                        break;
                    default:
                        alert("数据异常");
                }

            }
        },
    });


</script>

<script type="text/javascript">
    //tab切换
    $(function () {
        $(".index_nav ul li").each(function (index) {
            $(this).click(function () {
                $(this).addClass("nav_active").siblings().removeClass("nav_active");
                /*  $(".index_tabs .tab").eq(index).fadeIn().siblings("div").hide();*/
                $(".index_tabs .tab").eq(index).show().siblings("div").hide();
                setScrollTop(0, 0);
                /* $("body").scroll().top();*/
                if (index === 1) {
                    $(this).addClass("asz");
                    $(".index_nav ul li").removeClass("akz").removeClass("azm");
                    $("#jk").addClass("zm");
                } else if (index === 2) {
                    $(this).addClass("akz");
                    $(".index_nav ul li").removeClass("asz").removeClass("azm");
                    $("#jk").addClass("zm");
                } else {
                    $(this).addClass("azm");
                    $(".index_nav ul li").removeClass("asz").removeClass("akz");
                }
            });
        });
    });

    //设置滑动条默认打开滑动块位于最上面，最左边
    function setScrollTop(x, y) {
        let objScroll = document.getElementById("webjk");
        if (objScroll) {
            objScroll.scrollLeft = x;
            objScroll.scrollTop = y;
        }
    }

    /**
     * 格式化秒
     * @return string result 格式化后的字符串
     * @param value
     */
    function formatSeconds(value) {

        var theTime = parseInt(value);// 需要转换的时间秒
        var theTime1 = 0;// 分
        var theTime2 = 0;// 小时
        var theTime3 = 0;// 天
        if (theTime >= 60) {
            theTime1 = parseInt(theTime / 60);
            theTime = parseInt(theTime % 60);
            if (theTime1 >= 60) {
                theTime2 = parseInt(theTime1 / 60);
                theTime1 = parseInt(theTime1 % 60);
                if (theTime2 >= 24) {
                    //大于24小时
                    theTime3 = parseInt(theTime2 / 24);
                    theTime2 = parseInt(theTime2 % 24);
                }
            }
        }
        var result = '';
        if (theTime > 0) {
            result = "" + parseInt(theTime) + "秒";
        }
        if (theTime1 > 0) {
            result = "" + parseInt(theTime1) + "分" + result;
        }
        if (theTime2 > 0) {
            result = "" + parseInt(theTime2) + "小时" + result;
        }
        if (theTime3 > 0) {
            result = "" + parseInt(theTime3) + "天" + result;
        }
        _self.curworktime = result;
    }

    function formatSeconds1(value) {

        var theTime = parseInt(value);// 需要转换的时间秒
        var theTime1 = 0;// 分
        var theTime2 = 0;// 小时
        var theTime3 = 0;// 天
        if (theTime >= 60) {
            theTime1 = parseInt(theTime / 60);
            theTime = parseInt(theTime % 60);
            if (theTime1 >= 60) {
                theTime2 = parseInt(theTime1 / 60);
                theTime1 = parseInt(theTime1 % 60);
                if (theTime2 >= 24) {
                    //大于24小时
                    theTime3 = parseInt(theTime2 / 24);
                    theTime2 = parseInt(theTime2 % 24);
                }
            }
        }
        var result = '';
        if (theTime > 0) {
            result = "" + parseInt(theTime) + "秒";
        }
        if (theTime1 > 0) {
            result = "" + parseInt(theTime1) + "分" + result;
        }
        if (theTime2 > 0) {
            result = "" + parseInt(theTime2) + "小时" + result;
        }
        if (theTime3 > 0) {
            result = "" + parseInt(theTime3) + "天" + result;
        }
        _self.talworktime = result;
    }

    function onChangeSenderCard(value) {
        /*alert("发送卡id:"+value);*/
        let j = parseInt(value) - 1;
        _self.macaddr = _self.senderlist[j].MACADDR;
        _self.sendcardstatus = _self.senderlist[j].STATUS;
        if (_self.sendcardstatus === "1") {
            $("#fskonspan").html("在线").css("color", "green");
        } else {
            $("#fskonspan").html("离线").css("color", "red");
        }
        _self.sender_type = _self.senderlist[j].SENDER_TYPE;
        _self.ver = _self.senderlist[j].VER;
        _self.inputsource = _self.senderlist[j].INPUTSOURCE;
        _self.insrc_rslt = _self.senderlist[j].INSRC_RSLT;
        _self.insrc_fre = _self.senderlist[j].INSRC_FRE;
        if (typeof (_self.senderlist[j].BRIGHT) != "undefined") {
            _self.bright = _self.senderlist[j].BRIGHT;
        } else {
            _self.bright = "";
        }
        if (typeof (_self.senderlist[j].GAMMA) != "undefined") {
            _self.gamma = _self.senderlist[j].GAMMA;
        } else {
            _self.gamma = "";
        }
        if (typeof (_self.senderlist[j].CHROMA) != "undefined") {
            _self.chroma = _self.senderlist[j].CHROMA;
        } else {
            _self.chroma = "";
        }
        if (typeof (_self.senderlist[j].HUE) != "undefined") {
            _self.hue = _self.senderlist[j].HUE;
        } else {
            _self.hue = "";
        }
        if (typeof (_self.senderlist[j].COLC) != "undefined") {
            _self.colc = _self.senderlist[j].COLC;
        } else {
            _self.colc = "";
        }
        if (typeof (_self.senderlist[j].CONC) != "undefined") {
            _self.conc = _self.senderlist[j].CONC;
        } else {
            _self.conc = "";
        }
        if (typeof (_self.senderlist[j].BRTC) != "undefined") {
            _self.brtc = _self.senderlist[j].BRTC;
        } else {
            _self.brtc = "";
        }
        if (typeof (_self.senderlist[j].CENH) != "undefined") {
            _self.cenh = _self.senderlist[j].CENH;
        } else {
            _self.cenh = "";
        }
        let option0 = {
            tooltip: {
                formatter: function (param) {
                    if (param.seriesName === '亮度等级') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.bright;
                    } else if (param.seriesName === '伽马') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.gamma;
                    } else if (param.seriesName === '色温') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.chroma + 'k';
                    } else if (param.seriesName === '色相') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.hue;
                    } else if (param.seriesName === '色度') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.colc;
                    } else if (param.seriesName === '灰度增益') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.conc;
                    } else if (param.seriesName === '灰度基准值') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.brtc / 2;
                    } else if (param.seriesName === '增强器调整') {
                        return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.cenh;
                    } else {
                        return "";
                    }
                },
            },

            series: [{
                type: 'liquidFill',
                name: '亮度等级',
                radius: '20%',
                color: ['#195ba6'],
                center: ['30%', '15%'],
                data: [1],
                backgroundStyle: {
                    borderWidth: 2,
                    borderColor: '#1789fb',
                    color: '#1c233f',
                },
                outline: {
                    itemStyle: {
                        borderWidth: 5,
                        borderColor: '#1789fb',
                        borderType: 'dashed',
                    }
                },
                label: {
                    normal: { //此处没有生效，本地生效 1
                        formatter: function (param) {
                            return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.bright;
                        },
                        textStyle: {
                            fontSize: 10,
                            color: '#e6e6e6',
                        },
                    },
                },
            },
                {
                    type: 'liquidFill',
                    name: '伽马',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['70%', '15%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { //此处没有生效，本地生效 4
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.gamma;
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },
                },
                {

                    type: 'liquidFill',
                    name: '色温',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['30%', '35%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { // 同上 3
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.chroma + 'k';
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },

                },

                {

                    type: 'liquidFill',
                    name: '色相',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['70%', '35%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { // 同上 6
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.hue;
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },

                },

                {
                    type: 'liquidFill',
                    name: '色度',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['30%', '55%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { // 同上 3
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.colc;
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },

                },
                {
                    type: 'liquidFill',
                    name: '灰度增益',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['70%', '55%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { //此处没有生效，本地生效 1
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.conc;
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },
                },

                {
                    type: 'liquidFill',
                    name: '灰度基准值',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['30%', '75%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { //此处没有生效，本地生效 1
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.brtc / 2;
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },
                },

                {
                    type: 'liquidFill',
                    name: '增强器调整',
                    radius: '20%',
                    color: ['#195ba6'],
                    center: ['70%', '75%'],
                    data: [1],
                    backgroundStyle: {
                        borderWidth: 2,
                        borderColor: '#1789fb',
                        color: '#1c233f',
                    },
                    outline: {
                        itemStyle: {
                            borderWidth: 5,
                            borderColor: '#1789fb',
                            borderType: 'dashed',
                        }
                    },
                    label: {
                        normal: { //此处没有生效，本地生效 1
                            formatter: function (param) {
                                return param === 'NaN' ? '' : param.seriesName + '\n' + param.name + '\n' + _self.cenh;
                            },
                            textStyle: {
                                fontSize: 10,
                                color: '#e6e6e6',
                            },
                        },
                    },
                }
            ]
        };
        //获取dom容器
        let myChart0 = echarts.init(document.getElementById('chartmain0'));
        // 使用刚指定的配置项和数据显示图表。
        myChart0.setOption(option0);
    }

    function changeColor() {
        if (_self.status4) {
            _self.status4 = false;
            $("#wzjm_content").attr('style', 'background-color: #06B9D1;').html("显示");
            let fontBoxOrderon = {
                type: 30,
                content: 1
            };
            websocket.send(JSON.stringify(fontBoxOrderon));
        } else {
            _self.status4 = true;
            $("#wzjm_content").attr('style', 'background-color: #ABABAB;').html("不显示");
            let fontBoxOrderoff = {
                type: 30,
                content: 0
            };
            websocket.send(JSON.stringify(fontBoxOrderoff));
        }
    }

    function recChangeColor() {
        if (_self.status4) {
            $("#wzjm_content").attr('style', 'background-color: #06B9D1;').html("显示");
        } else {
            $("#wzjm_content").attr('style', 'background-color: #ABABAB;').html("不显示");
        }
    }

    function changeRedColor() {
        if (_self.status5) {
            _self.status5 = false;
            _self.ledred = "1";
            $("#wzjmred_content").attr('style', 'background-color: #DB4527;');
            let fonTRed1 = {
                type: 31,
                content: {
                    red: _self.ledred,
                    green: _self.ledgreen,
                    blue: _self.ledblue
                }
            };
            websocket.send(JSON.stringify(fonTRed1));
        } else {
            _self.status5 = true;
            _self.ledred = "0";
            $("#wzjmred_content").attr('style', 'background-color: #ABABAB;');
            let fonTRed0 = {
                type: 31,
                content: {
                    red: _self.ledred,
                    green: _self.ledgreen,
                    blue: _self.ledblue
                }
            };
            websocket.send(JSON.stringify(fonTRed0));
        }
    }

    function recChangeRedColor() {
        if (_self.status5) {
            $("#wzjmred_content").attr('style', 'background-color: #DB4527;');
        } else {
            $("#wzjmred_content").attr('style', 'background-color: #ABABAB;');
        }
    }

    function changeGreenColor() {
        if (_self.status6) {
            _self.status6 = false;
            _self.ledgreen = "1";
            $("#wzjmgreen_content").attr('style', 'background-color: #008F0A;');
            let fonTGreen1 = {
                type: 31,
                content: {
                    red: _self.ledred,
                    green: _self.ledgreen,
                    blue: _self.ledblue
                }
            };
            websocket.send(JSON.stringify(fonTGreen1));
        } else {
            _self.status6 = true;
            _self.ledgreen = "0";
            $("#wzjmgreen_content").attr('style', 'background-color: #ABABAB;');
            let fonTGreen0 = {
                type: 31,
                content: {
                    red: _self.ledred,
                    green: _self.ledgreen,
                    blue: _self.ledblue
                }
            };
            websocket.send(JSON.stringify(fonTGreen0));
        }
    }

    function recChangeGreenColor() {
        if (_self.status6) {
            $("#wzjmgreen_content").attr('style', 'background-color: #008F0A;');
        } else {
            $("#wzjmgreen_content").attr('style', 'background-color: #ABABAB;');
        }
    }

    function changeBlueColor() {
        if (_self.status7) {
            _self.status7 = false;
            _self.ledblue = "1";
            $("#wzjmblue_content").attr('style', 'background-color: #1E90FF;');
            let fonTBlue1 = {
                type: 31,
                content: {
                    red: _self.ledred,
                    green: _self.ledgreen,
                    blue: _self.ledblue
                }
            };
            websocket.send(JSON.stringify(fonTBlue1));
        } else {
            _self.status7 = true;
            _self.ledblue = "0";
            $("#wzjmblue_content").attr('style', 'background-color: #ABABAB;');
            let fonTBlue0 = {
                type: 31,
                content: {
                    red: _self.ledred,
                    green: _self.ledgreen,
                    blue: _self.ledblue
                }
            };
            websocket.send(JSON.stringify(fonTBlue0));
        }
    }

    function recChangeBlueColor() {
        if (_self.status7) {
            $("#wzjmblue_content").attr('style', 'background-color: #1E90FF;');
        } else {
            $("#wzjmblue_content").attr('style', 'background-color: #ABABAB;');
        }
    }

    function changergbColor() {
        if (_self.status8) {
            _self.status8 = false;
            $("#rgbshow_content").attr('style', 'background-color: #ABABAB;').html("隐藏");
            let fonTVideoOn = {
                type: 32,
                content: 1
            };
            websocket.send(JSON.stringify(fonTVideoOn));
        } else {
            _self.status8 = true;
            $("#rgbshow_content").attr('style', 'background-color: #06B9D1;').html("显示");
            let fonTVideoOff = {
                type: 32,
                content: 0
            };
            websocket.send(JSON.stringify(fonTVideoOff));
        }
    }

    function recChangergbColor() {
        if (_self.status8) {
            $("#rgbshow_content").attr('style', 'background-color: #06B9D1;').html("显示");
        } else {
            $("#rgbshow_content").attr('style', 'background-color: #ABABAB;').html("隐藏");
        }
    }

    function changeAllColor() {
        $("#wzjmall_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmgrid_content").attr('style', 'background-color:  #ABABAB;');
        $("#wzjmodd_content").attr('style', 'background-color:  #ABABAB;');
        $("#wzjmjishu_content").attr('style', 'background-color: #ABABAB;');
        if (_self.colorvalue === "0") {
            let testGrid = {
                type: 34,
                content: {
                    hexhigh: "0",
                    hexlow: "0"
                }
            };
            websocket.send(JSON.stringify(testGrid));
        } else {
            let testAll = {
                type: 34,
                content: {
                    hexhigh: "0",
                    hexlow: _self.colorvalue
                }
            };
            websocket.send(JSON.stringify(testAll));
        }

    }

    function recChangeAllColor() {
        $("#wzjmall_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmgrid_content").attr('style', 'background-color:  #ABABAB;');
        $("#wzjmodd_content").attr('style', 'background-color:  #ABABAB;');
        $("#wzjmjishu_content").attr('style', 'background-color: #ABABAB;');
    }

    function changeGridColor() {
        $("#wzjmgrid_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmall_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmodd_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmjishu_content").attr('style', 'background-color: #ABABAB;');
        if (_self.colorvalue === "0") {
            let testGrid = {
                type: 34,
                content: {
                    hexhigh: "0",
                    hexlow: "0"
                }
            };
            websocket.send(JSON.stringify(testGrid));
        } else {
            let testGrid = {
                type: 34,
                content: {
                    hexhigh: "1",
                    hexlow: _self.colorvalue
                }
            };
            websocket.send(JSON.stringify(testGrid));
        }

    }

    function recChangeGridColor() {
        $("#wzjmgrid_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmall_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmodd_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmjishu_content").attr('style', 'background-color: #ABABAB;');
    }

    function changeJishuColor() {
        $("#wzjmjishu_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmall_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmgrid_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmodd_content").attr('style', 'background-color: #ABABAB;');
        if (_self.colorvalue === "0") {
            let testGrid = {
                type: 34,
                content: {
                    hexhigh: "0",
                    hexlow: "0"
                }
            };
            websocket.send(JSON.stringify(testGrid));
        } else {
            let testJishu = {
                type: 34,
                content: {
                    hexhigh: "2",
                    hexlow: _self.colorvalue
                }
            };
            websocket.send(JSON.stringify(testJishu));
        }
    }

    function recChangeJishuColor() {
        $("#wzjmjishu_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmall_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmgrid_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmodd_content").attr('style', 'background-color: #ABABAB;');
    }

    function changeOddColor() {
        $("#wzjmodd_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmall_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmgrid_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmjishu_content").attr('style', 'background-color: #ABABAB;');
        if (_self.colorvalue === "0") {
            let testGrid = {
                type: 34,
                content: {
                    hexhigh: "0",
                    hexlow: "0"
                }
            };
            websocket.send(JSON.stringify(testGrid));
        } else {
            let testOdd = {
                type: 34,
                content: {
                    hexhigh: "4",
                    hexlow: _self.colorvalue
                }
            };
            websocket.send(JSON.stringify(testOdd));
        }
    }

    function recChangeOddColor() {
        $("#wzjmodd_content").attr('style', 'background-color: #06B9D1;');
        $("#wzjmall_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmgrid_content").attr('style', 'background-color: #ABABAB;');
        $("#wzjmjishu_content").attr('style', 'background-color: #ABABAB;');
    }

    function changecolorvalue() {
        if (_self.radio1 === "内置") {
            $("#wzjmall").attr('style', 'display: none;');
            $("#wzjmgrid").attr('style', 'display: none;');
            $("#wzjmjishu").attr('style', 'display: none;');
            $("#wzjmodd").attr('style', 'display: none;');
        } else {
            if (_self.colorvalue === "0") {
                $("#wzjmall").attr('style', 'display: none;');
                $("#wzjmgrid").attr('style', 'display: none;');
                $("#wzjmjishu").attr('style', 'display: none;');
                $("#wzjmodd").attr('style', 'display: none;');
            } else {
                $("#wzjmall").attr('style', 'display: block;');
                $("#wzjmgrid").attr('style', 'display: block;');
                $("#wzjmjishu").attr('style', 'display: block;');
                $("#wzjmodd").attr('style', 'display: block;');
            }
        }
    }
</script>

<script type="text/javascript">
    //点击close-pop这个类时取消弹框
    $('.close-pop').on('click', function () {
        $('#cover').css('display', 'none');
        $(this).parent().parent().hide().find('.cont-div').attr('style', 'visibility: hidden');
    });

    function aiguozhe(item) {
        let modGroup = demo.clicked_Box_ModGroup;

        if (modGroup != null) {
            for (let i = 0; i < modGroup.length; i++) {

                let sigleMod = modGroup[i];

                let target = null;
                let pos = parseInt(sigleMod.POS);
                switch (pos) {
                    case 1:
                        target = "module1";
                        break;
                    case 2:
                        target = "module5";
                        break;
                    case 3:
                        target = "module2";
                        break;
                    case 4:
                        target = "module6";
                        break;
                    case 5:
                        target = "module3";
                        break;
                    case  6:
                        target = "module7";
                        break;
                    case  7:
                        target = "module4";
                        break;
                    case  8:
                        target = "module8";
                        break;
                }
                if (item === target) {
                    //无法检测-灰色
                    if (modGroup[i].MOD_STATE === "0") {
                        //清空模组的方法
                        clearModedetail("无法检测模组-暂无数据");
                        //正常
                    } else if (modGroup[i].MOD_STATE === "1") {
                        if (typeof (sigleMod.ID) != "undefined") {
                            $('#MOD_ID').text(sigleMod.ID);
                        } else {
                            $('#MOD_ID').text("暂无数据");
                        }
                        //警告-黄色
                    } else if (modGroup[i].MOD_STATE === "2") {
                        if (typeof (sigleMod.ID) != "undefined") {
                            $('#MOD_ID').text(sigleMod.ID);
                        } else {
                            $('#MOD_ID').text("暂无数据");
                        }
                        //报警-红色
                    } else {
                        //清空模组的方法
                        clearModedetail("模组故障-暂无数据");

                    }
                }
            }
        } else {
            clearModedetail("暂无数据");
        }
        if ($('.modedetail').css('display') === 'none') {
            $('.modedetail').attr('style', 'display:block;');
            $('.set-div').attr('style', 'z-index:1;');
        } else {
            $(".modedetail").hide();
            $('.set-div').attr('style', 'z-index:3;');
        }
    }

    //在箱体报警时清空箱体信息封装方法
    function clearPopup(value) {
        $('#productTitle').text(value);
        $('#SENSOR_VOL').text(value);
        $('#SENSOR_CURRENT').text(value);
        $('#SENSOR_TMP').text(value);
        $('#SENSOR_HUMI').text(value);
        $('#RT_POWERDIS').text(value);
        $('#rec_Type').text(value);
        $('#rec_Count').text(value);
        $('#REC_VER').text(value);
        $('#REC_Carrying_Area').text(value);
        $('#PORT_MASTER').text(value);
        $('#BOX_MASTER').text(value);
        $('#POWER_MASTER').text(value);
        $('#MOD_ORDER').text(value);
        $('#MOD_NORMAL').text(value);
        $('#MOD_FAULT').text(value);
    }

    //在模组报警时清空箱体信息封装方法
    function clearModedetail(value) {
        $('#MOD_RSL').text(value);
        $('#MOD_SPACE').text(value);
        $('#MOD_SCAN_NUM').text(value);
        $('#MOD_ID').text(value);
    }


    //定义canvas图形
    let canvas = document.getElementById('box-canvas');
    let ctx = canvas.getContext("2d");
    //canvas宽高
    let canvasWidth = 1380;
    let canvasHeight = 680;
    canvas.width = canvasWidth;
    canvas.height = canvasHeight;
    //连接线颜色数组
    let connectLineColorGroup =
        ["#007b43",
            "#4b5cc4",
            "#ff461f",
            "#60281e",
            "#bddd22",
            "#a4e2c6",
            "#50616d",
            "#faff72",
            "#fff2df",
            "#2ca9e1",
            "#6e7955",
            "#ee7800",
            "#e0c38c",
            "#a22041",
            "#c099a0",
            "#ffea00"]

    //当row没有改变得时候
    function drawLine(lineNum, lastLineIndex, rowNum) {
        let linecha = lastLineIndex - lineNum;
        for (let i = 0; i < linecha + 1; i++) {
            let realLineIndex = lastLineIndex - i;
            for (let s = 0; s < rowNum; s++) {
                ctx.clearRect(s * xTox + 8, realLineIndex * yToy + 8, xTox, yToy);
            }
        }
    }

    //当line没有改变得时候
    function drawRow(rowNum, lastRowIndex, lineNum) {
        let rowcha = lastRowIndex - rowNum;
        for (let i = 0; i < rowcha + 1; i++) {
            let realRowIndex = lastRowIndex - i;
            for (let s = 0; s < lineNum; s++) {
                ctx.clearRect(realRowIndex * xTox + 8, s * yToy + 8, xTox, 154);
            }
        }
    }

    //生成未连接箱体的封装方法
    function draw(rowNum, lineNum) {
        if (!canvas.getContext) return;
        for (let i = 0; i < rowNum; i++) {
            for (let s = 0; s < lineNum; s++) {
                ctx.font = "10px Arial";
                //绘制矩形
                //绘制图形样式
                ctx.fillStyle = "#CCFFFF";
                ctx.strokeStyle = "#ffffcc";
                ctx.lineWidth = 2;
                ctx.fillRect(xTox * i + 10, s * yToy + 10, 126, 78);
                ctx.strokeRect(xTox * i + 10, s * yToy + 10, 126, 78);
            }
        }
    }

    //生成已连接箱体的封装方法-----#274a78
    function drawConnectedBox(x, y, color) {
        //绘制矩形
        //绘制图形样式
        ctx.fillStyle = "#009999";
        ctx.strokeStyle = "#ffffcc";
        ctx.lineWidth = 2;
        ctx.fillRect(xTox * x + 10, y * yToy + 10, 126, 78);
        ctx.strokeRect(xTox * x + 10, y * yToy + 10, 126, 78);
    }

    function drawConnectBoxFont(x, y, portName, portOrder, boxWidth, boxHeight) {
        ctx.font = "14px Arial";
        ctx.fillStyle = '#fffbf0'; //填充线样式

        //当双网口配置开启的时候网口名更改
        if(demo.pairingChecked === true){
            for(let portIndex = 0;portIndex < demo.portItem.slice(0,8).length;portIndex++){
                if(portName === demo.portItem[portIndex].name){
                    portName = "P("+demo.portItem[portIndex].id+","+demo.portItem[portIndex].backupid+")";
                }
            }
            ctx.fillText("Port:" + portName, xTox * x + 50, y * yToy + 28);
        }else{
            ctx.fillText("Port:" + portName, xTox * x + 50, y * yToy + 28);
        }
        ctx.fillText("Receiver:" + portOrder, xTox * x + 50, y * yToy + 40);

        //获取箱体类型
        let boxtype = demo.boxtype;
        let boxItem = demo.boxItem;
        for (let s = 0; s < boxItem.length; s++) {
            if (boxtype === boxItem[s].name) {
                let box = boxItem[s].box.split('×');
                boxWidth = box[0];
                boxHeight = box[1];
            }
        }
        ctx.fillText("width:" + boxWidth, xTox * x + 50, y * yToy + 52);
        ctx.fillText("Height:" + boxHeight, xTox * x + 50, y * yToy + 64);
    }

    //注：使用这个函数，需要给Canvas元素的position设为absolute。
    //要判断事件对象发生的位置，事件对象e的layerX和layerY属性表示Canvas内部坐标系中的坐标
    function getEventPosition(ev) {
        var x, y;
        if (ev.layerX || ev.layerX === 0) {
            x = ev.layerX;
            y = ev.layerY;
        } else if (ev.offsetX || ev.offsetX === 0) { // Opera
            x = ev.offsetX;
            y = ev.offsetY;
        }
        return {x: x, y: y};
    }

    //原点的画法
    function drawArc(x, y, color) {
        ctx.beginPath();
        ctx.fillStyle = color;

        // 顺时针--context.arc(x,y,r,sAngle,eAngle,counterclockwise);
        ctx.arc(x * xTox + 70, y * yToy + 51, 8, 0, 2 * Math.PI / 4 * 3);
        // 是否闭合路径 : 闭合路径后起点与终点会连接
        ctx.closePath();
        ctx.fill();

        ctx.font = '30px bold';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('S', x * xTox + 50, y * yToy + 31);
    }

    // /**
    //  * 获取偏移量的封装方法
    //  * */
    // function getPianYiLiang(xPos,yPos){
    //     if(senderIndex == null){
    //         alert("未选择发送卡");
    //     }
    //     //tab索引
    //     let index = demo.editableTabsValue -1
    //
    //     //判断该箱体是否存在----- x > row   y>line  ---如果不存在则不获取
    //     if(xPos>demo.editableTabs[index].contextbody.row){
    //         return false;
    //     }else if(yPos>demo.editableTabs[index].contextbody.line){
    //         return false;
    //     }
    //
    //     //获取当前网口筛选出当前箱体
    //     let portList = demo.editableTabs[index].contextbody.senderItem[senderIndex].port
    //     for(let portNum = 0;portNum<portList.length;portNum++){
    //         let boxList = portList[portNum].box;
    //         //判断该箱体是否已经存在XPOS--YPOS
    //         for(let s = 0;s<boxList.length;s++){
    //             if(boxList[s].xpos === xPos ){
    //                 if(boxList[s].ypos === yPos ){
    //                     //具体业务
    //                     demo.pianyinumX = boxList[s].pianyiliangx;
    //                     demo.pianyinumY = boxList[s].pianyiliangy;
    //                     demo.clicked_Box = {
    //                         x:xPos,
    //                         y:yPos
    //                     }
    //                 }
    //
    //             }
    //         }
    //     }
    // }

    // /**
    //  * 设置偏移量的封装方法
    //  * */
    // function setPianYiLiang(clicked_Box,pianyiliangx,pianyiliangy){
    //     if(senderIndex == null){
    //         alert("未选择发送卡");
    //     }
    //     //tab索引
    //     let index = demo.editableTabsValue -1
    //
    //     xPos = clicked_Box.x;
    //     yPos = clicked_Box.y;
    //
    //     //判断该箱体是否存在----- x > row   y>line  ---如果不存在则不获取
    //     if(xPos>demo.editableTabs[index].contextbody.row){
    //         return false;
    //     }else if(yPos>demo.editableTabs[index].contextbody.line){
    //         return false;
    //     }
    //
    //     //获取当前网口筛选出当前箱体
    //     let portList = demo.editableTabs[index].contextbody.senderItem[senderIndex].port
    //     for(let portNum = 0;portNum<portList.length;portNum++){
    //         let boxList = portList[portNum].box;
    //         //判断该箱体是否已经存在XPOS--YPOS
    //         for(let s = 0;s<boxList.length;s++){
    //             if(boxList[s].xpos === xPos ){
    //                 if(boxList[s].ypos === yPos ){
    //                     //具体业务
    //                     boxList[s].pianyiliangx = pianyiliangx;
    //                     boxList[s].pianyiliangy = pianyiliangy;
    //                 }
    //
    //             }
    //         }
    //     }
    // }

    /**
     * 绘制连接线的封装方法
     * */
    function createConnectLine(xPos, yPos) {

        //tab索引
        let index = demo.editableTabsValue - 1
        //用以绘制连接线的X坐标
        let x = xPos - 1;
        //用以绘制连接线的Y坐标
        let y = yPos - 1;


        //判断该箱体是否存在----- x > row   y>line  ---如果不存在则不绘制
        if (xPos > demo.editableTabs[index].contextbody.row) {
            return false;
        } else if (yPos > demo.editableTabs[index].contextbody.line) {
            return false;
        } else if (xPos < 1) {
            return false;
        } else if (yPos < 1) {
            return false;
        }

        //网口索引
        let portIndex = null;
        //获取当前网口筛选出当前箱体
        let portList = demo.editableTabs[index].contextbody.senderItem[senderIndex].port
        for (let i = 0; i < portList.length; i++) {
            //当前网口
            if (portList[i].name === area_port) {
                portIndex = i;
            }
        }
        for (let portNum = 0; portNum < portList.length; portNum++) {
            let boxList = portList[portNum].box;
            //判断该箱体是否已经存在XPOS--YPOS
            for (let s = 0; s < boxList.length; s++) {
                if (boxList[s].xpos === xPos) {
                    if (boxList[s].ypos === yPos) {
                        return false;
                    }

                }
            }
        }

        //当加一个箱体就在数组内push一个数组
        let box = {
            order: portList[portIndex].box.length + 1,
            xpos: xPos,
            ypos: yPos,
            boxwidth: '',
            boxheight: ''
        }
        portList[portIndex].box.push(box);

        /**
         * canvas绘制数组与现行次数
         * */
        let canvasHistory, step;
        step = portList[portIndex].step;
        canvasHistory = portList[portIndex].canvasHistory;
        /**
         * 记录绘图记录
         * */
        step++;
        if (step < canvasHistory.length) {
            canvasHistory.length = step; // 截断数组
        }

        portList[portIndex].step = step;

        let colorIndex = 0
        for (let ogj = 0; ogj < demo.portItem.length; ogj++) {
            if (demo.portItem[ogj].name === portList[portIndex].name) {
                colorIndex = ogj
            }
        }

        if (portList[portIndex].sourcePort === '') {
            //x*102+62, y*62+45
            portList[portIndex].sourcePort = {
                x: x,
                y: y
            }
            drawConnectedBox(x, y, '#99cccc');
            drawConnectBoxFont(x, y, portList[portIndex].name, box.order, 141, 135);
            //绘制箱体源点
            drawArc(x, y, connectLineColorGroup[colorIndex]);
        } else if (portList[portIndex].lastPort === '') {
            let sourcePort = portList[portIndex].sourcePort;
            // drawArrow(fromX, fromY, toX, toY)
            drawConnectedBox(x, y, '#99cccc', portList[portIndex].name, box.order, 141, 135);
            drawConnectBoxFont(x, y, portList[portIndex].name, box.order, 141, 135);
            drawArrow(sourcePort.x * xTox + 70, sourcePort.y * yToy + 51, x * xTox + 70, y * yToy + 51, connectLineColorGroup[colorIndex]);
            portList[portIndex].lastPort = {
                x: x,
                y: y
            }
        } else {
            let lastPort = portList[portIndex].lastPort;
            drawConnectedBox(x, y, '#99cccc', portList[portIndex].name, box.order, 141, 135);
            drawConnectBoxFont(x, y, portList[portIndex].name, box.order, 141, 135);
            drawArrow(lastPort.x * xTox + 70, lastPort.y * yToy + 51, x * xTox + 70, y * yToy + 51, connectLineColorGroup[colorIndex]);
            portList[portIndex].lastPort = {
                x: x,
                y: y
            }
        }
        // alert("第"+Math.ceil(realX/102)+"列 第"+Math.ceil(realY/62)+"行，即：（"+Math.ceil(realX/102)+","+Math.ceil(realY/62)+"）");

        // 添加新的绘制到历史记录
        let imgData = ctx.getImageData(0, 0, 1000, 1000);
        canvasHistory.push(imgData);
        portList[portIndex].canvasHistory = canvasHistory;
    }


    //箱体绘制画面点击事件
    canvas.addEventListener('click', function (e) {


        p = getEventPosition(e);
        //初始值--//绘制矩形ctx.fillRect (102*i+10,s*62+10, 100, 60);
        // console.log("当前网口"+area_port);
        //真实X值
        var realX = p.x - 10;
        // console.log("X取整数=="+Math.ceil(realX/102));
        //真实Y值
        var realY = p.y - 10;
        //通过取整确定点击的箱体是第几行或者第几列
        // console.log("Y取整数=="+Math.ceil(realY/62));

        //tab索引
        let index = demo.editableTabsValue - 1

        //点击坐标转换的X坐标
        let xPos = Math.ceil(realX / xTox);
        //点击坐标转换的Y坐标
        let yPos = Math.ceil(realY / yToy);

        if (area_port == null || area_port === '') {
            alert("未选择网口");
            return false;
        }
        //调用方法创建连接线
        createConnectLine(xPos, yPos);

    }, false);

    //鼠标移入
    canvas.addEventListener('mousemove', function (e) {
        p = getEventPosition(e);
        //初始值--//绘制矩形ctx.fillRect (102*i+10,s*62+10, 100, 60);
        //真实X值
        var realX = p.x - 10;
        //真实Y值
        var realY = p.y - 10;
        //通过取整确定点击的箱体是第几行或者第几列
        // console.log("监听鼠标移动X-Y:("+Math.ceil(realX/102)+","+Math.ceil(realY/62)+")");
        // alert("第"+Math.ceil(realX/102)+"列 第"+Math.ceil(realY/62)+"行，即：（"+Math.ceil(realX/102)+","+Math.ceil(realY/62)+"）");
    }, false);

    //按下鼠标按键
    canvas.addEventListener('mousedown', function (e) {
        p = getEventPosition(e);

        //初始值--//绘制矩形ctx.fillRect (102*i+10,s*62+10, 100, 60);
        //真实X值
        var realX = p.x - 10;
        //真实Y值
        var realY = p.y - 10;
        //通过取整确定点击的箱体是第几行或者第几列
        // console.log("监听鼠标按下X-Y"+p.x+","+p.y);
        // console.log("监听鼠标按下X-Y:("+Math.ceil(realX/102)+","+Math.ceil(realY/62)+")");
        // alert("第"+Math.ceil(realX/102)+"列 第"+Math.ceil(realY/62)+"行，即：（"+Math.ceil(realX/102)+","+Math.ceil(realY/62)+"）");
    }, false);

    //松开鼠标按键
    canvas.addEventListener('mouseup', function (e) {
        p = getEventPosition(e);

        //初始值--//绘制矩形ctx.fillRect (102*i+10,s*62+10, 100, 60);
        //真实X值
        var realX = p.x - 10;
        //真实Y值
        var realY = p.y - 10;
        //通过取整确定点击的箱体是第几行或者第几列
        // console.log("监听鼠标松开X-Y:("+Math.ceil(realX/102)+","+Math.ceil(realY/62)+")");
        // alert("第"+Math.ceil(realX/102)+"列 第"+Math.ceil(realY/62)+"行，即：（"+Math.ceil(realX/102)+","+Math.ceil(realY/62)+"）");
    }, false);


    /**
     *
     // 向右箭头
     drawArrow(ctx, myCanvas.width / 2, myCanvas.height / 2, myCanvas.width / 2 + 150, myCanvas.height / 2,30,30,4,'#f36');
     // 向下箭头
     drawArrow(ctx, myCanvas.width / 2, myCanvas.height / 2, myCanvas.width / 2, myCanvas.height / 2  + 150,30,30,4,'#f66');
     // 向左箭头
     drawArrow(ctx, myCanvas.width / 2, myCanvas.height / 2, myCanvas.width / 2 - 150, myCanvas.height / 2,30,30,4,'#0f6');
     // 向上箭头
     drawArrow(ctx, myCanvas.width / 2, myCanvas.height / 2, myCanvas.width / 2, myCanvas.height / 2 - 150,30,30,4,'#d6f');
     *
     * */
    function drawArrow(fromX, fromY, toX, toY, color) {
        theta = 25;
        headlen = 15;
        width = 6;
        theta = typeof (theta) != 'undefined' ? theta : 30;
        headlen = typeof (theta) != 'undefined' ? headlen : 10;
        width = typeof (width) != 'undefined' ? width : 1;
        color = typeof (color) != 'color' ? color : '#000';

        // 计算各角度和对应的P2,P3坐标
        var angle = Math.atan2(fromY - toY, fromX - toX) * 180 / Math.PI,
            angle1 = (angle + theta) * Math.PI / 180,
            angle2 = (angle - theta) * Math.PI / 180,
            topX = headlen * Math.cos(angle1),
            topY = headlen * Math.sin(angle1),
            botX = headlen * Math.cos(angle2),
            botY = headlen * Math.sin(angle2);

        ctx.save();
        ctx.beginPath();

        var arrowX = fromX - topX,
            arrowY = fromY - topY;

        ctx.moveTo(arrowX, arrowY);
        ctx.moveTo(fromX, fromY);
        ctx.lineTo(toX, toY);
        arrowX = toX + topX;
        arrowY = toY + topY;
        ctx.moveTo(arrowX, arrowY);
        ctx.lineTo(toX, toY);
        arrowX = toX + botX;
        arrowY = toY + botY;
        ctx.lineTo(arrowX, arrowY);
        ctx.strokeStyle = color;
        ctx.lineWidth = width;
        ctx.stroke();
        ctx.restore();
    }

    /**
     * 清除画布的封装方法
     * */
    function clearCanvas() {
        ctx.clearRect(0, 0, canvasWidth, canvasHeight);
    }

    /**
     * 改变网口状态让其显示使用中的状态
     * */
    function becomeUsingPort(portList) {

        let group = [];

        //令span变色的方法
        $("span").each(function () {
            $(this).removeClass("usingPort");
            for (let s = 0; s < portList.length; s++) {
                if ($(this).text() === portList[s].name) {
                    if (typeof (portList[s].box) != "undefined") {
                        if (portList[s].box.length > 0) {
                            group.push(portList[s].name);
                        }

                    }

                }
            }
        });

        //令span变色的方法
        $("span").each(function () {
            for (let s = 0; s < group.length; s++) {
                if ($(this).text() === group[s]) {
                    $(this).addClass("usingPort");
                }
            }
        });

        //当双网口配置模式开启时
        if(demo.pairingChecked === true){
            let abgroup = [];
            for(let a = 0;a<group.length;a++){
                for(let portIndex = 0;portIndex < demo.portItem.slice(0,8).length;portIndex++){
                    if(group[a] === demo.portItem[portIndex].name){
                        abgroup.push("P("+demo.portItem[portIndex].id+","+demo.portItem[portIndex].backupid+")");
                    }
                }
            }

            $("span").each(function () {
                for (let s = 0; s < abgroup.length; s++) {
                    if ($(this).text() === abgroup[s]) {
                        $(this).addClass("usingPort");
                    }
                }
            });
        }


    }

    function sendJsonToMachine() {
        alert("执行发送方法");
        demo.senderPostList = [];
        //遍历屏体数据方便抽出数组
        for (let editableIndex = 0; editableIndex < demo.editableTabs.length; editableIndex++) {
            //获取contextBody对象
            let contextBody = demo.editableTabs[editableIndex].contextbody;
            let boxName = contextBody.boxtype;
            let pianyiLiangX = contextBody.pianyiliangX;
            let pianyiLiangY = contextBody.pianyiliangY;
            let modHPixel = null;
            let modVPixel = null;
            let BoxHPixel = null;
            let BoxVPixel = null;
            //匹配箱体数据
            for (let constBox = 0; constBox < demo.boxItem.length; constBox++) {
                if (contextBody.boxtype === demo.boxItem[constBox].name) {
                    let mod = demo.boxItem[constBox].mod.split('×');
                    modHPixel = mod[0];
                    modVPixel = mod[1];

                    let box = demo.boxItem[constBox].box.split('×');
                    BoxHPixel = box[0];
                    BoxVPixel = box[1];
                }
            }
            //获取发送卡列表
            for (let senderIndex = 0; senderIndex < contextBody.senderItem.length; senderIndex++) {
                let sender = contextBody.senderItem[senderIndex];
                //摒弃无网口数据
                if (sender.port.length < 1) {
                    continue;
                }
                let senderId = sender.name;
                //输出通道配置
                let outputConfs = [];
                //网口配置
                let portConfs = [];

                //筛选网口X值Y值
                let x = 0;
                let x1 = 0;
                let x2 = 0;
                let y = 1;
                //获取网口列表
                for (let portIndex = 0; portIndex < sender.port.length; portIndex++) {
                    let port = sender.port[portIndex];
                    //当没有箱体数据的网口摒除掉
                    if (port.box.length < 1) {
                        continue;
                    }
                    //当前网口带载的箱体
                    let boxConfs = [];
                    //筛选网口值
                    let num = parseInt(port.name.replace(/[^0-9]/ig, ""));
                    //推入输出通道号
                    let outputConf = {
                        // 输出板号---1
                        boardNum: "1",
                        // 输出通道号----1,2,3,4,-配置网口排序
                        channelNum: num + ""
                    };
                    //推入输出通道的布局数据
                    outputConfs.push(outputConf);
                    if (num < 9) {
                        x1++;
                    } else {
                        x2++;
                        if (y < 2) {
                            y++;
                        } else {
                            y = 2;
                        }
                    }
                    //获取箱体列表
                    for (let boxIndex = 0; boxIndex < port.box.length; boxIndex++) {
                        let box = port.box[boxIndex];
                        let box_x = null;
                        let box_y = null;
                        //上下相连
                        if (port.box[0].xpos - port.box[port.box.length - 1].xpos === 0) {
                            box_x = pianyiLiangX;
                            box_y = box.ypos + pianyiLiangY - 1;
                            //左右相连
                        } else {
                            box_x = box.xpos + pianyiLiangX - 1;
                            box_y = pianyiLiangY;
                        }
                        let boxConf = {
                            id: (box.xpos + "") + (box.ypos + ""),
                            //  箱体X坐标
                            xPos: box.xpos + pianyiLiangX + "",
                            //  箱体Y坐标
                            yPos: box.ypos + pianyiLiangY + "",
                            // 箱体的连接顺序
                            boxOder: box.order + "",
                            // 输出图像的箱体水平起始位置（输出分辨率）
                            lbdh: box_x * BoxHPixel + "",
                            // 输出图像的箱体垂直起始位置（输出分辨率）
                            lbdv: box_y * BoxVPixel + ""
                        }
                        boxConfs.push(boxConf);
                    }

                    //计算输出图像的水平起始位置
                    //箱体宽度
                    let host = parseInt(BoxHPixel) * (port.sourcePort.x + pianyiLiangX) + "";
                    //箱体高
                    //计算输出图像的垂直起始位置
                    let vostnumber = parseInt(BoxVPixel) * (port.sourcePort.y + pianyiLiangY) + "";

                    let portXPos = null;

                    let portYPos = null;


                    //争议设计的地方
                    //单网口单个箱体的情况
                    if (port.lastPort.x === '') {
                        portXPos = port.sourcePort.x;
                        portYPos = port.sourcePort.y;
                    }
                    //上下连通
                    else if (port.sourcePort.x - port.lastPort.x === 0) {
                        portXPos = port.sourcePort.x;
                        portYPos = 0;
                        //左右连通
                    } else {
                        portXPos = 0;
                        portYPos = port.sourcePort.y;
                    }


                    //当前网口配置
                    let portConf = {
                        id: port.name,
                        //--输出通道X坐标
                        xPos: portXPos + 1 + pianyiLiangX + "",
                        //--输出通道Y坐标
                        yPos: portYPos + 1 + pianyiLiangY + "",
                        // 单个网口对应的箱体行数
                        boxRow: sender.port[0].lastPort.x + 1 + "",
                        // 单个网口对应的箱体列数
                        boxColumn: sender.port[0].lastPort.y + 1 + "",
                        // 输出图像的水平起始位置（输出分辨率）----根据源坐标输出
                        host: host,
                        // 输出图像的垂直起始位置（输出分辨率）----根据源坐标输出
                        vost: vostnumber,
                        // 网口带载的箱体
                        boxConfs: boxConfs
                    }
                    //推入数组
                    portConfs.push(portConf);
                }
                //选取X轴的和
                x = x1 + x2

                //构建箱体配置信息
                let pSet = {
                    //箱体类型
                    boxName: boxName,
                    // 每个接收卡有多少个模组  IM /接收卡数量（0-3位：垂直   4-7位：水平）---66
                    perRecMod: "66",
                    // 每个箱体有多少个接收卡  接收卡/箱体的数量（0-3位：垂直   4-7位：水平）----17
                    perPanelRec: "17",
                    // 模组的横向像素
                    modHPixel: modHPixel,
                    // 模组的纵向像素
                    modVPixel: modVPixel
                };
                //构建发送卡数据
                let PostSender = {
                    //发送卡ID
                    id: senderId,
                    //屏幕分割数 ---常量1
                    scrs: "1",
                    // // 设置图像输出开始位置（水平） ---常量1
                    // hscr:"1",
                    // // 设置图像输出开始位置（垂直） ---常量1
                    // vscr:"1",
                    // 输出通道水平位置数-X 网口  ---配置网口数量 上下 X
                    horiNum: x + "",
                    // 输出通道垂直位置数-Y 网口  -----配置网口数量 -- Y
                    vertNum: y + "",
                    // 配置箱体信息
                    pSet: pSet,
                    // 配置输出通道的布局
                    outputConfs: outputConfs,
                    // 网口配置
                    portConfs: portConfs
                }
                demo.senderPostList.push(PostSender);

            }
        }
        console.log("demo.senderPostList:" + JSON.stringify(demo.senderPostList));
        let screenCofContent = {
            type: 39,
            content: demo.senderPostList
        };
        websocket.send(JSON.stringify(screenCofContent));

        let configTimeOut = setInterval(function () {
            let screenCofContent = {
                type: 39,
                content: demo.senderPostList
            };
            websocket.send(JSON.stringify(screenCofContent));
        }, 15000);
        setTimeout(function () {
            clearTimeout(configTimeOut);
        }, 30000);
    }

</script>
</html>
